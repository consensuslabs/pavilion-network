{"L":"INFO","T":"2025-02-25T16:41:23.313+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:41:23.334+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"5.9735ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:41:23.356+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.617ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.421+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"62.186125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.427+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.649375ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T16:41:23.427+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:41:23.427+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.474+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"46.799292ms"}
{"L":"INFO","T":"2025-02-25T16:41:23.474+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:41:23.476+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T16:41:23.476+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T16:41:23.477+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T16:41:51.730+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:41:51.750+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.817917ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:94","M":"Configured connection pool","maxIdleConns":10,"maxOpenConns":100}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:41:51.781+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"21.709167ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.842+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"56.602666ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.849+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"5.660833ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:41:51.849+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:41:51.849+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.898+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"48.446959ms"}
{"L":"INFO","T":"2025-02-25T16:41:51.898+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"backend/app.go:133","M":"S3 Configuration in App","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"s3/service.go:26","M":"S3 Service Configuration","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":""}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T16:42:57.606+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:42:57.626+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.607458ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:42:57.642+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"11.599208ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.699+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"55.016ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.704+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.937416ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T16:42:57.704+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:42:57.704+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.753+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"48.975917ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:42:57.753+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:42:57.755+0300","C":"backend/app.go:133","M":"S3 Configuration in App","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T16:42:57.755+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T16:42:57.756+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T16:43:40.412+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('3f545849-6f80-4327-8bc4-4d806d7622bc','dsfds','fsdfd','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','','',10064431,'97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"8.089ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T16:43:40.421+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.495166ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402',NULL,'pending','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:43:40.438+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.204083ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('3f545849-6f80-4327-8bc4-4d806d7622bc','dsfds','fsdfd','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','','',10064431,'97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:43:40.451+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.780125ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='97a29958-da6a-4fca-8f1c-f4ae45f37030',\"updated_at\"='2025-02-25 16:43:40.439' WHERE \"id\" = '81defba1-3f13-4009-a61f-f2f6a5b34159'"}
{"L":"INFO","T":"2025-02-25T16:43:40.452+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153"}
{"L":"INFO","T":"2025-02-25T16:43:51.612+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:51.969+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_width":1280,"target_height":720,"resolution":"720p","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:43:51.969+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","dimensions":"1280x719","original_width":854,"original_height":480,"input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/720p.mp4","resolution_name":"720p"}
{"L":"INFO","T":"2025-02-25T16:43:52.013+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:52.013+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.023+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.027+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.027+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.050+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15a10f470] height not divisible by 2 (1280x719)\n[vost#0:0/libx264 @ 0x15a10f0f0] Error while opening encoder - maybe incorrect parameters such as bit_rate, rate, width or height.\n[vf#0:0 @ 0x15a106160] Error sending frames to consumers: Generic error in an external library\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.051+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vf#0:0 @ 0x15a106160] Task finished with error code: -542398533 (Generic error in an external library)\n[vf#0:0 @ 0x15a106160] Terminating thread with return code -542398533 (Generic error in an external library)\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.051+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vost#0:0/libx264 @ 0x15a10f0f0] Could not open encoder before EOF\n[vost#0:0/libx264 @ 0x15a10f0f0] Task finished with error code: -22 (Invalid argument)\n[vost#0:0/libx264 @ 0x15a10f0f0] Terminating thread with return code -22 (Invalid argument)\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.528+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15a10ff20] Nothing was written into output file, because at least one of its streams received no packets.\nframe=    0 fps=0.0 q=0.0 Lsize=       0KiB time=N/A bitrate=N/A speed=N/A    \n"}
{"L":"INFO","T":"2025-02-25T16:43:52.530+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Conversion failed!\n"}
{"L":"ERROR","T":"2025-02-25T16:43:52.538+0300","C":"ffmpeg/service.go:215","M":"Transcoding failed: input=/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4, output=/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/720p.mp4, dimensions=1280x719","error":"exit status 187","S":"github.com/consensuslabs/pavilion-network/backend/internal/video/ffmpeg.(*Service).Transcode\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/ffmpeg/service.go:215\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:197\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:43:52.623+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:43:52.664+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:52.664+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.676+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.677+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.677+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.713+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.716+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x141807110] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T16:43:52.717+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:43:53.182+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   46 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.46 bitrate=5719.8kbits/s speed= 2.9x    \r"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x141806240] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=149 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.89x    \n"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x141807110] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x141807110] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x141807110] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x141807110] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x141807110] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x141807110] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x141807110] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x141807110] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x141807110] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x141807110] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x141807110] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x141807110] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x141"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"807110] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x141807110] ref P L0: 87.8% 12.2%\n[libx264 @ 0x141807110] ref B L0: 91.9%  8.1%\n[libx264 @ 0x141807110] ref B L1: 98.6%  1.4%\n[libx264 @ 0x141807110] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T16:43:53.694+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","dimensions":"854x480","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4","resolution_name":"480p"}
{"L":"INFO","T":"2025-02-25T16:43:57.142+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/480p.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:57.425+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:57.465+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:57.466+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.476+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.477+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.477+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.495+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x15561b320] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T16:43:57.498+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.982+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   77 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.50 bitrate=4194.5kbits/s speed=4.95x    \r"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15561a4e0] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=7.15x    \n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] frame I:1     Avg QP:26.22  size: 52767\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x15561b320] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x15561b320] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x15561b320] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x15561b320] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x15561b320] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x15561b320] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x15561b320] "}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x15561b320] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x15561b320] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x15561b320] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x15561b320] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x15561b320] ref P L0: 84.8% 15.2%\n[libx264 @ 0x15561b320] ref B L0: 91.1%  8.9%\n[libx264 @ 0x15561b320] ref B L1: 97.0%  3.0%\n[libx264 @ 0x15561b320] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.172+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:44:00.295+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:44:00.497+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":1,"video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","successful_resolutions":["480p","360p"],"failed_resolutions":["720p"],"total_successful":2}
{"L":"DEBUG","T":"2025-02-25T16:44:00.509+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.442959ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 16:44:00.501' WHERE \"id\" = '97a29958-da6a-4fca-8f1c-f4ae45f37030'"}
{"L":"DEBUG","T":"2025-02-25T16:44:00.516+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.198667ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','mp4','2025-02-25 16:43:51.827','2025-02-25 16:43:51.827') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:44:00.522+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('403331df-2098-4fe0-9c5c-211816df4dd6','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 16:43:51.827','2025-02-25 16:43:51.827') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"5.544625ms"}
{"L":"DEBUG","T":"2025-02-25T16:44:00.536+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.910083ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('c4a49dcd-c378-40b6-b438-d6e2a933e67e','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 16:43:57.369','2025-02-25 16:43:57.369') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:44:00.536+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.286125ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','mp4','2025-02-25 16:43:52.539','2025-02-25 16:43:52.539') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"ERROR","T":"2025-02-25T16:44:00.544+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T16:44:00.551+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"POST","path":"/video/upload","status":500,"latency_ms":20169}
{"L":"INFO","T":"2025-02-25T16:55:16.343+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"POST","path":"/video/upload","status":401,"latency_ms":0}
{"L":"INFO","T":"2025-02-25T16:55:24.244+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.271+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"26.07875ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T16:55:24.338+0300"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.348+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.045042ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTY1MjQsIm5iZiI6MTc0MDQ5MTcyNCwiaWF0IjoxNzQwNDkxNzI0LCJqdGkiOiJmNWNlOTdkNy1kZmRiLTQ0OWYtODVjNy1hYzI0ZjFiOTk4NTcifQ.BJWtwkK1hCGH-cMdLAyj3Vv2dkXEwhHMnxf9TzbThNQ'"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.366+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTY1MjQsIm5iZiI6MTc0MDQ5MTcyNCwiaWF0IjoxNzQwNDkxNzI0LCJqdGkiOiJmNWNlOTdkNy1kZmRiLTQ0OWYtODVjNy1hYzI0ZjFiOTk4NTcifQ.BJWtwkK1hCGH-cMdLAyj3Vv2dkXEwhHMnxf9TzbThNQ','2025-03-04 16:55:24.338','2025-02-25 16:55:24.348',NULL) RETURNING \"id\"","source":"gorm","duration":"17.681083ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T16:55:24.366+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.383+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"16.899042ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 16:55:24.366',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 16:55:24.367' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:55:24.383+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T16:55:24.383+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":143,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T16:56:15.919+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.934167ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('a9eacc46-56cb-4e12-b373-c04f99dd29c0','dsfds','fsdfd','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','','',10064431,'dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.655209ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906',NULL,'pending','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.953+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.911041ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('a9eacc46-56cb-4e12-b373-c04f99dd29c0','dsfds','fsdfd','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','','',10064431,'dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.968+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"30.765166ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='dc58941b-bcf7-4cc1-a837-cb7831d3ea06',\"updated_at\"='2025-02-25 16:56:15.953' WHERE \"id\" = '9f4c3cee-3422-4467-a367-94db28d01168'"}
{"L":"INFO","T":"2025-02-25T16:56:15.969+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195"}
{"L":"INFO","T":"2025-02-25T16:56:26.194+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T16:56:26.790+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_width":1280,"target_height":720,"resolution":"720p","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:26.790+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/720p.mp4","resolution_name":"720p","dimensions":"1280x719","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:26.841+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:26.842+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.854+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.854+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.859+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.860+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.910+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x154630fe0] height not divisible by 2 (1280x719)\n[vost#0:0/libx264 @ 0x154630b80] Error while opening encoder - maybe incorrect parameters such as bit_rate, rate, width or height.\n[vf#0:0 @ 0x154631790] Error sending frames to consumers: Generic error in an external library\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.912+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vf#0:0 @ 0x154631790] Task finished with error code: -542398533 (Generic error in an external library)\n[vf#0:0 @ 0x154631790] Terminating thread with return code -542398533 (Generic error in an external library)\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.912+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vost#0:0/libx264 @ 0x154630b80] Could not open encoder before EOF\n[vost#0:0/libx264 @ 0x154630b80] Task finished with error code: -22 (Invalid argument)\n[vost#0:0/libx264 @ 0x154630b80] Terminating thread with return code -22 (Invalid argument)\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.365+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15462f6f0] Nothing was written into output file, because at least one of its streams received no packets.\nframe=    0 fps=0.0 q=0.0 Lsize=       0KiB time=N/A bitrate=N/A speed=N/A    \n"}
{"L":"INFO","T":"2025-02-25T16:56:27.366+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Conversion failed!\n"}
{"L":"ERROR","T":"2025-02-25T16:56:27.369+0300","C":"ffmpeg/service.go:215","M":"Transcoding failed: input=/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4, output=/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/720p.mp4, dimensions=1280x719","error":"exit status 187","S":"github.com/consensuslabs/pavilion-network/backend/internal/video/ffmpeg.(*Service).Transcode\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/ffmpeg/service.go:215\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:197\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:27.446+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:27.486+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:27.486+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.497+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.497+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.512+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.513+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.513+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.514+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.514+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.002+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   57 fps=0.0 q=29.0 size=    1536KiB time=00:00:01.83 bitrate=6863.6kbits/s speed=3.63x    \r"}
{"L":"INFO","T":"2025-02-25T16:56:28.409+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15be2fd60] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=0.0 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=5.41x    \n"}
{"L":"INFO","T":"2025-02-25T16:56:28.410+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x15be30ab0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x15be30ab0] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x15be30ab0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x15be30ab0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x15be30ab0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x15be30ab0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x15be30ab0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x15be30ab0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.410+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x15be30ab0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x15be30ab0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x15be30ab0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x15be30ab0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x15be30ab0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x15be30ab0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x15be30ab0] ref B L1: 98.6%  1.4%\n[libx264 @ 0x15be30ab0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.417+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4","resolution_name":"480p","dimensions":"854x480"}
{"L":"INFO","T":"2025-02-25T16:56:33.197+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/480p.mp4","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"480p"}
{"L":"INFO","T":"2025-02-25T16:56:33.448+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T16:56:33.488+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:33.488+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.498+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.501+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.501+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.517+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x150706350] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x150706350] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T16:56:33.519+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.008+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   33 fps=0.0 q=29.0 size=     256KiB time=00:00:01.03 bitrate=2029.9kbits/s speed=2.05x    \r"}
{"L":"INFO","T":"2025-02-25T16:56:34.432+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x150705480] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed= 5.3x    \n"}
{"L":"INFO","T":"2025-02-25T16:56:34.433+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x150706350] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x150706350] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x150706350] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x150706350] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x150706350] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x150706350] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x150706350] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x150706350] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.433+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x150706350] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x150706350] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x150706350] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x150706350] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x150706350] ref P L0: 84.8% 15.2%\n[libx264 @ 0x150706350] ref B L0: 91.1%  8.9%\n[libx264 @ 0x150706350] ref B L1: 97.0%  3.0%\n[libx264 @ 0x150706350] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.440+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:56:36.322+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:56:36.496+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","successful_resolutions":["480p","360p"],"failed_resolutions":["720p"],"total_successful":2,"total_failed":1}
{"L":"DEBUG","T":"2025-02-25T16:56:36.509+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.133708ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 16:56:36.499' WHERE \"id\" = 'dc58941b-bcf7-4cc1-a837-cb7831d3ea06'"}
{"L":"DEBUG","T":"2025-02-25T16:56:36.516+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.64025ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','mp4','2025-02-25 16:56:26.477','2025-02-25 16:56:26.477') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:36.522+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('1c889035-12a9-4bc7-ba02-abd054bb3376','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 16:56:26.477','2025-02-25 16:56:26.477') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"5.740875ms"}
{"L":"DEBUG","T":"2025-02-25T16:56:36.538+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.544167ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('ea7fe632-0759-4960-a580-c4e591bd4610','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 16:56:33.396','2025-02-25 16:56:33.396') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:36.538+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','mp4','2025-02-25 16:56:27.37','2025-02-25 16:56:27.37') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.995291ms","rows_affected":1}
{"L":"ERROR","T":"2025-02-25T16:56:36.547+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:36.553+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195"}
{"L":"INFO","T":"2025-02-25T16:56:36.553+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T16:56:36.553+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:36.554+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":500,"latency_ms":20667,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-25T17:04:50.779+0300","C":"database/service.go:34","M":"Attempting to connect to database","host":"localhost","port":26257,"database":"pavilion_db"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.797+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"5.461042ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T17:04:50.827+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.233083ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.897+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"65.280417ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.903+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"6.62ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:04:50.903+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T17:04:50.903+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.966+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"62.097792ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T17:04:50.966+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T17:04:50.969+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T17:04:50.969+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T17:04:50.970+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T17:05:28.315+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.342+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"26.382583ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T17:05:28.438+0300"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.446+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.942292ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTcxMjgsIm5iZiI6MTc0MDQ5MjMyOCwiaWF0IjoxNzQwNDkyMzI4LCJqdGkiOiI3YjE3MTQzZS0xOWEyLTQ3ODktYmFmYS0yZWM5MjA5ZjI0ZmYifQ.J2QK7ULStefCeB3vG0lkJEo1u5sgnivHfFfoAT4B-dQ'"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.462+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"15.658792ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTcxMjgsIm5iZiI6MTc0MDQ5MjMyOCwiaWF0IjoxNzQwNDkyMzI4LCJqdGkiOiI3YjE3MTQzZS0xOWEyLTQ3ODktYmFmYS0yZWM5MjA5ZjI0ZmYifQ.J2QK7ULStefCeB3vG0lkJEo1u5sgnivHfFfoAT4B-dQ','2025-03-04 17:05:28.438','2025-02-25 17:05:28.446',NULL) RETURNING \"id\"","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:05:28.462+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.481+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"19.127458ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 17:05:28.462',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 17:05:28.463' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-25T17:05:28.481+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T17:05:28.481+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":167,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T17:06:02.770+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.856959ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('792418cc-7878-4808-bbd2-b1a1d8207c58','dsfds','fsdfd','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','','',10064431,'8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:02.780+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726',NULL,'pending','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.3105ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T17:06:02.818+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.791ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('792418cc-7878-4808-bbd2-b1a1d8207c58','dsfds','fsdfd','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','','',10064431,'8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:02.843+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='8ad66aba-f56c-4ed4-af54-328e3c58b9fa',\"updated_at\"='2025-02-25 17:06:02.818' WHERE \"id\" = '12857ef0-c6eb-40a6-8a03-94aee8d6e454'","source":"gorm","duration":"50.46925ms"}
{"L":"INFO","T":"2025-02-25T17:06:02.844+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657"}
{"L":"INFO","T":"2025-02-25T17:06:14.199+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa"}
{"L":"INFO","T":"2025-02-25T17:06:14.489+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_height":720,"resolution":"720p","original_width":854,"original_height":480,"target_width":1280}
{"L":"INFO","T":"2025-02-25T17:06:14.489+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:14.533+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:14.533+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.544+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000"}
{"L":"INFO","T":"2025-02-25T17:06:14.544+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":", bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.548+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.548+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.578+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.579+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.579+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.580+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:15.050+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   17 fps=0.0 q=29.0 size=     512KiB time=00:00:00.50 bitrate=8389.4kbits/s speed=0.997x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:15.554+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   56 fps= 56 q=29.0 size=    2304KiB time=00:00:01.80 bitrate=10486.0kbits/s speed=1.79x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:16.058+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   97 fps= 64 q=29.0 size=    4096KiB time=00:00:03.16 bitrate=10596.3kbits/s speed= 2.1x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x133107630] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 78 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.58x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x1331114e0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x1331114e0] "}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x1331114e0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x1331114e0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x1331114e0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x1331114e0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x1331114e0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x1331114e0] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x1331114e0] i16 v,h,dc,p: 28% 35% 18% 18%\n"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x1331114e0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x1331114e0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x1331114e0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x1331114e0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x1331114e0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x1331114e0] ref B L1: 97.9%  2.1%\n[libx264 @ 0x1331114e0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T17:06:16.477+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T17:06:22.264+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/720p.mp4","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa"}
{"L":"INFO","T":"2025-02-25T17:06:22.626+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4","resolution_name":"480p"}
{"L":"INFO","T":"2025-02-25T17:06:22.667+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:22.667+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.678+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.679+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.679+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.710+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.711+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x13b805850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T17:06:22.712+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.179+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   40 fps=0.0 q=29.0 size=     768KiB time=00:00:01.26 bitrate=4967.2kbits/s speed=2.53x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:23.683+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=  111 fps=111 q=29.0 size=    2816KiB time=00:00:03.63 bitrate=6349.3kbits/s speed=3.62x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13b804980] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=126 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.13x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x13b805850] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x13b805850] frame B:111   Avg QP:30.29  size: 18000\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x13b805850] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x13b805850] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x13b805850] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x13b805850] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x13b805850] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x13b805850] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x13b805850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x13b805850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x13b805850] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x13b805850] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13b805850] "}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ref P L0: 87.8% 12.2%\n[libx264 @ 0x13b805850] ref B L0: 91.9%  8.1%\n[libx264 @ 0x13b805850] ref B L1: 98.6%  1.4%\n[libx264 @ 0x13b805850] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.879+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.291+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/480p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.600+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.641+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:27.642+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.652+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.652+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.653+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.653+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.677+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.678+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x137805850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T17:06:27.681+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.155+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   63 fps=0.0 q=29.0 size=     768KiB time=00:00:02.03 bitrate=3094.3kbits/s speed=4.05x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:28.467+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x137804980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.06x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x137805850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x137805850] frame B:111   Avg QP:30.81  size:  9314\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x137805850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x137805850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x137805850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x137805850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x137805850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x137805850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x137805850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x137805850] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x137805850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x137805850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x137805850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x137805850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x137805850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.471+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4","resolution_name":"360p","dimensions":"640x360"}
{"L":"INFO","T":"2025-02-25T17:06:31.493+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/360p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:31.629+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","failed_resolutions":[],"total_successful":3,"total_failed":0,"video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","successful_resolutions":["720p","480p","360p"]}
{"L":"DEBUG","T":"2025-02-25T17:06:31.643+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.530667ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 17:06:31.632' WHERE \"id\" = '8ad66aba-f56c-4ed4-af54-328e3c58b9fa'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.653+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','mp4','2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.706167ms"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.661+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('0e8be840-8929-415f-847d-11305bd7fa08','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"8.417ms"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.679+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.229083ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49221a86-b9e6-42ea-a6cc-bdde6c82115f','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 17:06:22.569','2025-02-25 17:06:22.569') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:31.679+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','mp4','2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"17.73225ms"}
{"L":"ERROR","T":"2025-02-25T17:06:31.688+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T17:06:31.699+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":500,"latency_ms":29016,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-25T17:58:20.396+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T17:58:20.397+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T17:58:20.405+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:00:09.805+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:00:09.833+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"10.276584ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T18:00:09.837+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:00:09.837+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:00:09.838+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:00:09.860+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.332167ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.931+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"67.307458ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.938+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.931125ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:00:09.938+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:00:09.938+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.986+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"48.20225ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:00:09.986+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T18:00:24.199+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"POST","path":"/video/upload","status":401}
{"L":"INFO","T":"2025-02-25T18:00:34.722+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.741+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1","source":"gorm","duration":"18.321458ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:00:34.839+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T18:00:34.840+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T18:00:34.840+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T18:00:34.840+0300"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.851+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"11.008916ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDExMDA0MzQsIm5iZiI6MTc0MDQ5NTYzNCwiaWF0IjoxNzQwNDk1NjM0LCJqdGkiOiIyZDAzOTNkNi1kNGU1LTQxNzYtYjA1ZC00NGEwOTQ0YmE5MzIifQ.nukB7cmZ82pOMLEo-dbS6c-A8R_Wf7SdJ0DivKk5WUs'"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.866+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDExMDA0MzQsIm5iZiI6MTc0MDQ5NTYzNCwiaWF0IjoxNzQwNDk1NjM0LCJqdGkiOiIyZDAzOTNkNi1kNGU1LTQxNzYtYjA1ZC00NGEwOTQ0YmE5MzIifQ.nukB7cmZ82pOMLEo-dbS6c-A8R_Wf7SdJ0DivKk5WUs','2025-03-04 18:00:34.84','2025-02-25 18:00:34.851',NULL) RETURNING \"id\"","source":"gorm","duration":"14.994667ms"}
{"L":"INFO","T":"2025-02-25T18:00:34.866+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.882+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 18:00:34.866',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 18:00:34.867' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm","duration":"16.498584ms"}
{"L":"INFO","T":"2025-02-25T18:00:34.882+0300","C":"auth/service.go:110","M":"Login successful","email":"user@example.com","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T18:00:34.882+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":160,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T18:01:05.269+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"52.301709ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('78a9b134-6452-4490-bac7-502e34048eee','dsfds','fsdfd','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','','',10064431,'10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.278+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.051541ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024',NULL,'pending','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.301+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.156792ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('78a9b134-6452-4490-bac7-502e34048eee','dsfds','fsdfd','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','','',10064431,'10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.316+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"31.259791ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='10077cec-fc55-4ab0-9226-393cb982516b',\"updated_at\"='2025-02-25 18:01:05.301' WHERE \"id\" = '65cd8802-2bf1-4d34-9ef0-cb40274ddd7a'"}
{"L":"INFO","T":"2025-02-25T18:01:05.318+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e"}
{"L":"INFO","T":"2025-02-25T18:01:15.713+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:16.031+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:01:16.031+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:16.078+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:16.078+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.089+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.094+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\nPress [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.118+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.119+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.119+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.120+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.595+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.06x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:17.096+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   53 fps= 53 q=29.0 size=    2048KiB time=00:00:01.70 bitrate=9869.2kbits/s speed= 1.7x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:17.598+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   90 fps= 60 q=29.0 size=    3840KiB time=00:00:02.93 bitrate=10724.2kbits/s speed=1.95x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x1458049c0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 76 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.49x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x144e3a1d0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x144e3a1d0] frame B:111   Avg QP:29.43  size: 29595\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x144e3a1d0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x144e3a1d0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x144e3a1d0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x144e3a1d0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x144e3a1d0] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x144e3a1d0] i16 v,h,dc,p: 28% 35% 18% 18%\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x144e3a1d0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x144e3a1d0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x144e3a1d0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x144e3a1d0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x144e3a1d0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x144e3a1d0] ref B L1: 97.9%  2.1%\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.096+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:01:23.467+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:23.817+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:23.858+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:23.858+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.868+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.869+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.869+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.893+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x14ff23a00] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x14ff23a00] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:01:23.898+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.375+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   46 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.46 bitrate=5719.8kbits/s speed=2.91x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:24.874+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  145 fps=144 q=-1.0 size=    3328KiB time=00:00:04.76 bitrate=5719.6kbits/s speed=4.74x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x14ff22b90] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=149 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.89x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x14ff23a00] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x14ff23a00] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x14ff23a00] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x14ff23a00] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x14ff23a00] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x14ff23a00] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x14ff23a00] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x14ff23a00] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x14ff23a00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x14ff23a00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x14ff23a00] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x14ff23a00] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x14ff23a00] ref P L0: 87.8% 12.2%\n[libx264 @ 0x14ff23a00] ref B L0: 91.9%  8.1%\n[libx264 @ 0x14ff23a00] ref B L1: 98.6%  1.4%\n[libx264 @ 0x14ff23a00] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.886+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:28.172+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:28.510+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:01:28.553+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:28.553+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.564+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]"}
{"L":"INFO","T":"2025-02-25T18:01:28.565+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.567+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.567+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.586+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] profile High, level 3.0, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4':\n  Metadata:\n    major_brand     : "}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":", 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.072+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   61 fps=0.0 q=29.0 size=     768KiB time=00:00:01.96 bitrate=3199.2kbits/s speed=3.89x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x129104980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.13x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x129105850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x129105850] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x129105850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x129105850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x129105850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x129105850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x129105850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x129105850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x129105850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x129105850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x129105850] i8c dc,h,v,p: 50% 22% 17% 10%\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x129105850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x129105850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x129105850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x129105850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.377+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"640x360","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T18:01:31.275+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:31.418+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0}
{"L":"DEBUG","T":"2025-02-25T18:01:31.431+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.328875ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:01:31.42' WHERE \"id\" = '10077cec-fc55-4ab0-9226-393cb982516b'"}
{"L":"DEBUG","T":"2025-02-25T18:01:31.437+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.955125ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','mp4','2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:31.445+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.260833ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('5dd4cf34-44d1-4d87-931e-b254e15b19c9','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:31.460+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.925292ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('8b9ca11b-48e7-4d36-9af5-8d2997462308','videos/10077cec-fc55-4ab0-9226-393cb982516b/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:01:23.764','2025-02-25 18:01:23.764') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:01:31.460+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','mp4','2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.142125ms","rows_affected":1}
{"L":"ERROR","T":"2025-02-25T18:01:31.469+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T18:01:31.478+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":500,"latency_ms":26561,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-25T18:03:14.248+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:03:14.249+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:03:14.256+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:07:12.683+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:07:12.711+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"8.949125ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:07:12.740+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.820958ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.816+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"72.196042ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.822+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.839834ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:07:12.822+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:07:12.822+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.887+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"64.997709ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:07:12.887+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:07:12.890+0300","C":"backend/app.go:133","M":"S3 Configuration in App","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-25T18:07:12.890+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T18:07:12.891+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:07:15.935+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.611083ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:15.945+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.889416ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923',NULL,'pending','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:15.972+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.992375ms"}
{"L":"DEBUG","T":"2025-02-25T18:07:15.988+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.611083ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='e1116374-a8cd-4a2c-ac02-006c534aa9f1',\"updated_at\"='2025-02-25 18:07:15.972' WHERE \"id\" = 'c4355387-9ee6-46dc-bd7a-992e1306cc17'"}
{"L":"INFO","T":"2025-02-25T18:07:15.988+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f"}
{"L":"INFO","T":"2025-02-25T18:07:27.202+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:07:27.586+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:27.586+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_height":480,"input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4","resolution_name":"720p","dimensions":"1280x720","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:27.627+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:27.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.638+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.643+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.643+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.672+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.672+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.673+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:28.148+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   22 fps=0.0 q=29.0 size=     512KiB time=00:00:00.66 bitrate=6292.0kbits/s speed=1.32x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:28.653+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   58 fps= 57 q=29.0 size=    2304KiB time=00:00:01.86 bitrate=10111.5kbits/s speed=1.85x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   92 fps= 61 q=29.0 size=    4096KiB time=00:00:03.00 bitrate=11184.9kbits/s speed=1.98x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.658+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  135 fps= 67 q=29.0 size=    5376KiB time=00:00:04.43 bitrate=9934.0kbits/s speed= 2.2x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x144804a70] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 72 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.38x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x144805940] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x144805940] frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x144805940] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x144805940] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x144805940] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x144805940] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x144805940] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x144805940] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x144805940] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x144805940] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x144805940] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x144805940] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x144805940] ref P L0: 81.6% 18.4%\n[libx264 @ 0x144805940] ref B L0: 90.7%  9.3%\n[libx264 @ 0x144805940] ref B L1: 97.9%  2.1%\n[libx264 @ 0x144805940] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:07:29.733+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:07:34.965+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:35.283+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:07:35.325+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:35.325+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.335+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.338+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.338+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.367+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x158f06ab0] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x158f06ab0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:07:35.370+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.842+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   35 fps=0.0 q=29.0 size=     768KiB time=00:00:01.13 bitrate=5551.6kbits/s speed=2.25x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:36.345+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   99 fps= 98 q=29.0 size=    2560KiB time=00:00:03.23 bitrate=6486.2kbits/s speed=3.21x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x158f05bc0] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=118 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=3.89x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x158f06ab0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x158f06ab0] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x158f06ab0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x158f06ab0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x158f06ab0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x158f06ab0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x158f06ab0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x158f06ab0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x158f06ab0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x158f06ab0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x158f06ab0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x158f06ab0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x158f06ab0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x158f06ab0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x158f06ab0] ref B L1: 98.6%  1.4%\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.607+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.620+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:40.716+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"480p","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:07:40.985+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_height":480,"input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:41.026+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:41.027+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.037+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.038+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.038+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.072+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.073+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x14062fc10] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T18:07:41.073+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.542+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   64 fps=0.0 q=29.0 size=     768KiB time=00:00:02.06 bitrate=3044.4kbits/s speed= 4.1x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x14062ee00] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.28x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x14062fc10] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x14062fc10] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x14062fc10] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x14062fc10] mb I  I16..4:  4.6% 18.5% 77.0%\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x14062fc10] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x14062fc10] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x14062fc10] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x14062fc10] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x14062fc10] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x14062fc10] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x14062fc10] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x14062fc10] "}
{"L":"INFO","T":"2025-02-25T18:07:41.825+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x14062fc10] ref P L0: 84.8% 15.2%\n[libx264 @ 0x14062fc10] ref B L0: 91.1%  8.9%\n[libx264 @ 0x14062fc10] ref B L1: 97.0%  3.0%\n[libx264 @ 0x14062fc10] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.830+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.120+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.323+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0}
{"L":"DEBUG","T":"2025-02-25T18:07:44.335+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"9.305042ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:07:44.326' WHERE \"id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.342+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.622459ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.350+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.269292ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9e7222ce-cda5-4ecc-bf37-9fd24fcfd822','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.21675ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('4f0e0668-ffd6-4dcb-8a9b-40f03b131645','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.003666ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.371+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"3.775ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('4f0e0668-ffd6-4dcb-8a9b-40f03b131645','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.385+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.426542ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9483f562-83e2-4fa5-a428-6fe30333afa1','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.385+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.495583ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.388+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.711583ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9483f562-83e2-4fa5-a428-6fe30333afa1','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.402+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.871833ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('24677bd6-97d6-4a98-8b03-811cceaf8388','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:07:44.323','2025-02-25 18:07:44.323') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.402+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.759334ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.406+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('24677bd6-97d6-4a98-8b03-811cceaf8388','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:07:44.323','2025-02-25 18:07:44.323') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"3.738833ms"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.417+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:44.326') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.539ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-25T18:07:44.428+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.935542ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:07:44.406',\"status\"='completed',\"updated_at\"='2025-02-25 18:07:44.406',\"video_id\"='e1116374-a8cd-4a2c-ac02-006c534aa9f1' WHERE \"id\" = 'c4355387-9ee6-46dc-bd7a-992e1306cc17'"}
{"L":"INFO","T":"2025-02-25T18:07:44.439+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.467+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.789125ms","rows_affected":7,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('24677bd6-97d6-4a98-8b03-811cceaf8388','4f0e0668-ffd6-4dcb-8a9b-40f03b131645','9483f562-83e2-4fa5-a428-6fe30333afa1','9e7222ce-cda5-4ecc-bf37-9fd24fcfd822')"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.467+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.569459ms","rows_affected":4,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.475+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.353291ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.475+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1' ORDER BY \"videos\".\"id\" LIMIT 1","source":"gorm","duration":"35.966625ms"}
{"L":"INFO","T":"2025-02-25T18:07:44.475+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","file_path":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.475+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":28585,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-25T18:26:12.621+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:26:12.622+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:26:12.632+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:26:34.767+0300","C":"database/service.go:34","M":"Attempting to connect to database","port":26257,"database":"pavilion_db","host":"localhost"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.785+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"USE pavilion_db","source":"gorm","duration":"5.887167ms"}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:26:34.807+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.696292ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.864+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"54.902125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.871+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.035ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:26:34.871+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:26:34.871+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.922+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"51.25125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:26:34.922+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:26:34.925+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T18:26:34.925+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T18:26:34.926+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"ERROR","T":"2025-02-25T18:26:44.739+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:76\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:75\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:72\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:44.741+0300","C":"video/logger_adapter.go:17","M":"Failed to initialize upload","request_id":"","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-25T18:26:44.741+0300","C":"http/response_handler.go:34","M":"Failed to initialize upload","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:78\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:44.741+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":500,"latency_ms":37,"client_ip":"::1","method":"POST"}
{"L":"ERROR","T":"2025-02-25T18:26:53.496+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:76\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:75\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:72\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:53.498+0300","C":"video/logger_adapter.go:17","M":"Failed to initialize upload","request_id":"","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-25T18:26:53.498+0300","C":"http/response_handler.go:34","M":"Failed to initialize upload","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:78\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:53.499+0300","C":"http/middleware.go:44","M":"HTTP Request","status":500,"latency_ms":33,"client_ip":"::1","method":"POST","path":"/video/upload"}
{"L":"INFO","T":"2025-02-25T18:28:50.116+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:28:50.117+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:28:50.120+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:29:08.293+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:29:08.318+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.310417ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:29:08.343+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.546791ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.409+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"64.103791ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.415+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.469417ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:29:08.415+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:29:08.415+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.462+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"47.093166ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:29:08.462+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:29:10.225+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.231375ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:10.235+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213',NULL,'pending','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.920125ms"}
{"L":"DEBUG","T":"2025-02-25T18:29:10.257+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.54325ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:10.275+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='9dffedcf-7403-4733-a994-32b95d29314f',\"updated_at\"='2025-02-25 18:29:10.257' WHERE \"id\" = '4439efdd-bf44-4de1-8172-4d87819d84ee'","source":"gorm","duration":"31.485417ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:29:10.276+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc"}
{"L":"INFO","T":"2025-02-25T18:29:10.434+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"9dffedcf-7403-4733-a994-32b95d29314f"}
{"L":"INFO","T":"2025-02-25T18:29:20.641+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4","video_id":"9dffedcf-7403-4733-a994-32b95d29314f"}
{"L":"INFO","T":"2025-02-25T18:29:21.036+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_width":854,"original_height":480,"target_width":1280,"target_height":720,"resolution":"720p"}
{"L":"INFO","T":"2025-02-25T18:29:21.036+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:21.081+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:21.081+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.093+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.093+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.100+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\nPress [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.138+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.139+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.139+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.611+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.05x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:22.124+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   51 fps= 50 q=29.0 size=    2048KiB time=00:00:01.63 bitrate=10272.0kbits/s speed= 1.6x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:22.626+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   82 fps= 54 q=29.0 size=    3584KiB time=00:00:02.66 bitrate=11010.2kbits/s speed=1.75x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:23.131+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  129 fps= 64 q=29.0 size=    5120KiB time=00:00:04.23 bitrate=9907.9kbits/s speed=2.09x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x1480042f0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 70 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.31x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x1480051b0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x1480051b0] frame B:111   Avg QP:29.43  size: 29595\n"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x1480051b0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x1480051b0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x1480051b0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x1480051b0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x1480051b0] "}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x1480051b0] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x1480051b0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x1480051b0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x1480051b0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x1480051b0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x1480051b0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x1480051b0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x1480051b0] ref B L1: 97.9%  2.1%\n[libx264 @ 0x1480051b0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:29:23.249+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"1280x720","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4","resolution_name":"720p"}
{"L":"INFO","T":"2025-02-25T18:29:28.782+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:29.116+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.168+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.171+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.171+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.189+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : "}
{"L":"INFO","T":"2025-02-25T18:29:29.192+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.676+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   50 fps=0.0 q=29.0 size=    1280KiB time=00:00:01.60 bitrate=6553.8kbits/s speed=3.17x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15160fe10] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=0.0 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=5.03x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x151610ce0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x151610ce0] frame B:111   Avg QP:30.29  size: 18000\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x151610ce0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x151610ce0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x151610ce0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x151610ce0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x151610ce0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x151610ce0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x151610ce0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x151610ce0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x151610ce0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x151610ce0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x151610ce0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x151610ce0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x151610ce0] ref B L1: 98.6%  1.4%\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.159+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4","resolution_name":"480p","dimensions":"854x480"}
{"L":"INFO","T":"2025-02-25T18:29:33.459+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:33.783+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:33.823+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:33.823+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.833+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.835+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.835+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.854+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x128005850] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x128005850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:29:33.855+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.342+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   93 fps=0.0 q=29.0 size=    1536KiB time=00:00:03.03 bitrate=4148.3kbits/s speed=6.01x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x128004980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=7.22x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x128005850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x128005850] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x128005850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x128005850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x128005850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x128005850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x128005850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x128005850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x128005850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x128005850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x128005850] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x128005850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x128005850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x128005850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x128005850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x128005850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.527+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:36.516+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:36.996+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":0,"video_id":"9dffedcf-7403-4733-a994-32b95d29314f","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3}
{"L":"DEBUG","T":"2025-02-25T18:29:37.009+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.943833ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:29:36.999' WHERE \"id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.016+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:20.892','2025-02-25 18:29:20.892') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"7.433791ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:37.035+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.382917ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb','videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.035+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"18.329291ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:20.892','2025-02-25 18:29:20.892') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.041+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"6.22ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb','videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.055+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('6c5c7a5f-23ba-45b1-98e9-1873eeccc574','videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.574291ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:37.055+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.734625ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.059+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.855ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('6c5c7a5f-23ba-45b1-98e9-1873eeccc574','videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.072+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"8.6425ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49289247-3036-4f48-8694-8f5ff80adf2c','videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:29:36.996','2025-02-25 18:29:36.996') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.072+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.008917ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.076+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.239958ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49289247-3036-4f48-8694-8f5ff80adf2c','videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:29:36.996','2025-02-25 18:29:36.996') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.087+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.306416ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:36.999') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.095+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.424042ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:29:37.076',\"status\"='completed',\"updated_at\"='2025-02-25 18:29:37.076',\"video_id\"='9dffedcf-7403-4733-a994-32b95d29314f' WHERE \"id\" = '4439efdd-bf44-4de1-8172-4d87819d84ee'"}
{"L":"INFO","T":"2025-02-25T18:29:37.106+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.128+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.369042ms","rows_affected":6,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('49289247-3036-4f48-8694-8f5ff80adf2c','6c5c7a5f-23ba-45b1-98e9-1873eeccc574','cf0c311a-67af-4502-90f3-a79ec9ee5f2f','e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb')"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.128+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.768417ms","rows_affected":4,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.137+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.202042ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.137+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"30.292459ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '9dffedcf-7403-4733-a994-32b95d29314f' ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T18:29:37.137+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","file_path":"videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:37.137+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":26949,"client_ip":"::1","method":"POST","path":"/video/upload","status":200}
{"L":"INFO","T":"2025-02-25T18:35:01.520+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:35:01.521+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:35:01.526+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:35:12.618+0300","C":"database/service.go:34","M":"Attempting to connect to database","host":"localhost","port":26257,"database":"pavilion_db"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.635+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"4.579042ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:35:12.664+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.796ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.736+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"69.038459ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.743+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.204916ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:35:12.743+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:35:12.743+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.797+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"54.10625ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:12.797+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:35:12.800+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:35:12.800+0300","C":"s3/service.go:26","M":"S3 Service Configuration","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":""}
{"L":"INFO","T":"2025-02-25T18:35:12.801+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.528+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"16.580292ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.541+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507',NULL,'pending','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"13.56875ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.571+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"19.06575ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.589+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"38.543333ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='3632bb3f-4ad0-4f07-a3d2-ab964aa50cae',\"updated_at\"='2025-02-25 18:35:17.571' WHERE \"id\" = '3822c098-119c-46cc-8b48-fda7ef57d66e'"}
{"L":"INFO","T":"2025-02-25T18:35:17.590+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e"}
{"L":"INFO","T":"2025-02-25T18:35:17.742+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae"}
{"L":"INFO","T":"2025-02-25T18:35:28.271+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:35:28.569+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:35:28.569+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:28.614+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:28.614+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.624+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.649+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x13a005940] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"        vendor_id       : "}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: "}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:29.133+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   22 fps=0.0 q=29.0 size=     512KiB time=00:00:00.66 bitrate=6292.0kbits/s speed=1.32x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:29.637+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   65 fps= 64 q=29.0 size=    2816KiB time=00:00:02.10 bitrate=10985.3kbits/s speed=2.08x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:30.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  113 fps= 75 q=29.0 size=    4608KiB time=00:00:03.70 bitrate=10202.5kbits/s speed=2.45x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13a004a70] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 86 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.83x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x13a005940] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x13a005940] frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x13a005940] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x13a005940] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x13a005940] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x13a005940] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x13a005940] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x13a005940] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x13a005940] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x13a005940] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x13a005940] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x13a005940] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13a005940] ref P L0: 81.6% 18.4%\n[libx264 @ 0x13a005940] ref B L0: 90.7%  9.3%\n[libx264 @ 0x13a005940] "}
{"L":"INFO","T":"2025-02-25T18:35:30.375+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ref B L1: 97.9%  2.1%\n[libx264 @ 0x13a005940] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:35:30.384+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:35:35.584+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:35.922+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:35:35.963+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:35.963+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.973+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.974+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.974+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.000+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.001+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x145005850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T18:35:36.002+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.479+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   39 fps=0.0 q=29.0 size=     768KiB time=00:00:01.23 bitrate=5101.5kbits/s speed=2.44x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:36.983+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  138 fps=137 q=29.0 size=    3328KiB time=00:00:04.53 bitrate=6014.0kbits/s speed=4.49x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x145004980] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=145 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.76x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x145005850] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x145005850] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x145005850] "}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x145005850] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x145005850] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x145005850] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x145005850] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x145005850] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x145005850] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x145005850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x145005850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x145005850] i8c dc,h,v,p: 48% 26% 16% 11%\n"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x145005850] ref P L0: 87.8% 12.2%\n[libx264 @ 0x145005850] ref B L0: 91.9%  8.1%\n[libx264 @ 0x145005850] ref B L1: 98.6%  1.4%\n[libx264 @ 0x145005850] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:35:37.018+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:40.170+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/480p.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"480p"}
{"L":"INFO","T":"2025-02-25T18:35:40.468+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_width":854,"original_height":480,"input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4","resolution_name":"360p","dimensions":"640x360"}
{"L":"INFO","T":"2025-02-25T18:35:40.509+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:40.510+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.520+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.520+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.523+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.523+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.547+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x10fe05090] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x10fe05090] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x10fe05090] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.548+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:41.028+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   86 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.80 bitrate=3745.1kbits/s speed=5.54x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x10fe041c0] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed= 7.4x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x10fe05090] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x10fe05090] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x10fe05090] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x10fe05090] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x10fe05090] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x10fe05090] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x10fe05090] "}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x10fe05090] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x10fe05090] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x10fe05090] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x10fe05090] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x10fe05090] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x10fe05090] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x10fe05090] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x10fe05090] ref P L0: 84.8% 15.2%\n[libx264 @ 0x10fe05090] ref B L0: 91.1%  8.9%\n[libx264 @ 0x10fe05090] ref B L1: 97.0%  3.0%\n[libx264 @ 0x10fe05090] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:35:41.194+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"640x360","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T18:35:44.612+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/360p.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"360p"}
{"L":"INFO","T":"2025-02-25T18:35:44.820+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0,"video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.831+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.38675ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:35:44.823' WHERE \"id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.839+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:28.489','2025-02-25 18:35:28.489') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"7.29525ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.845+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.643917ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('fd2c83e3-d782-4cae-8b38-557f78c6929f','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:35:44.839','2025-02-25 18:35:44.839') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.849+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.820292ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:35.867','2025-02-25 18:35:35.867') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.853+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('a91f8115-4730-4113-b571-dd63180b8816','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:35:44.849','2025-02-25 18:35:44.849') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.211833ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.677083ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:40.414','2025-02-25 18:35:40.414') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.864+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('37a9ab5b-9085-4741-993e-098d7caa92ca','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:35:44.859','2025-02-25 18:35:44.859') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.497125ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.875+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:44.823') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.963ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-25T18:35:44.883+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"18.96375ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:35:44.864',\"status\"='completed',\"updated_at\"='2025-02-25 18:35:44.864',\"video_id\"='3632bb3f-4ad0-4f07-a3d2-ab964aa50cae' WHERE \"id\" = '3822c098-119c-46cc-8b48-fda7ef57d66e'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:44.895+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.918+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.408584ms","rows_affected":3,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('37a9ab5b-9085-4741-993e-098d7caa92ca','a91f8115-4730-4113-b571-dd63180b8816','fd2c83e3-d782-4cae-8b38-557f78c6929f')"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.918+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"14.857708ms","rows_affected":3,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.27475ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.692666ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae' ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T18:35:44.928+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","file_path":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:44.928+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":27457,"client_ip":"::1","method":"POST"}
