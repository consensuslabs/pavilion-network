{"L":"INFO","T":"2025-02-25T16:41:23.313+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:41:23.334+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"5.9735ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T16:41:23.340+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:41:23.356+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.617ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.421+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"62.186125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.427+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.649375ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T16:41:23.427+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:41:23.427+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:41:23.474+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"46.799292ms"}
{"L":"INFO","T":"2025-02-25T16:41:23.474+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:41:23.476+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T16:41:23.476+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T16:41:23.477+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T16:41:51.730+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:41:51.750+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.817917ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:94","M":"Configured connection pool","maxIdleConns":10,"maxOpenConns":100}
{"L":"INFO","T":"2025-02-25T16:41:51.757+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:41:51.781+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"21.709167ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.842+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"56.602666ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.849+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"5.660833ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:41:51.849+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:41:51.849+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:41:51.898+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"48.446959ms"}
{"L":"INFO","T":"2025-02-25T16:41:51.898+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"backend/app.go:133","M":"S3 Configuration in App","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"s3/service.go:26","M":"S3 Service Configuration","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":""}
{"L":"INFO","T":"2025-02-25T16:41:51.902+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T16:42:57.606+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T16:42:57.626+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.607458ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T16:42:57.629+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T16:42:57.642+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"11.599208ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.699+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"55.016ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.704+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.937416ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T16:42:57.704+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T16:42:57.704+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T16:42:57.753+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"48.975917ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:42:57.753+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T16:42:57.755+0300","C":"backend/app.go:133","M":"S3 Configuration in App","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T16:42:57.755+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T16:42:57.756+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T16:43:40.412+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('3f545849-6f80-4327-8bc4-4d806d7622bc','dsfds','fsdfd','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','','',10064431,'97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"8.089ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T16:43:40.421+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.495166ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402',NULL,'pending','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:43:40.438+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.204083ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('3f545849-6f80-4327-8bc4-4d806d7622bc','dsfds','fsdfd','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','','',10064431,'97a29958-da6a-4fca-8f1c-f4ae45f37030','2025-02-25 16:43:40.402','2025-02-25 16:43:40.402') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:43:40.451+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.780125ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='97a29958-da6a-4fca-8f1c-f4ae45f37030',\"updated_at\"='2025-02-25 16:43:40.439' WHERE \"id\" = '81defba1-3f13-4009-a61f-f2f6a5b34159'"}
{"L":"INFO","T":"2025-02-25T16:43:40.452+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153"}
{"L":"INFO","T":"2025-02-25T16:43:51.612+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:51.969+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_width":1280,"target_height":720,"resolution":"720p","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:43:51.969+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","dimensions":"1280x719","original_width":854,"original_height":480,"input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/720p.mp4","resolution_name":"720p"}
{"L":"INFO","T":"2025-02-25T16:43:52.013+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:52.013+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.023+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.027+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.027+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.050+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15a10f470] height not divisible by 2 (1280x719)\n[vost#0:0/libx264 @ 0x15a10f0f0] Error while opening encoder - maybe incorrect parameters such as bit_rate, rate, width or height.\n[vf#0:0 @ 0x15a106160] Error sending frames to consumers: Generic error in an external library\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.051+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vf#0:0 @ 0x15a106160] Task finished with error code: -542398533 (Generic error in an external library)\n[vf#0:0 @ 0x15a106160] Terminating thread with return code -542398533 (Generic error in an external library)\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.051+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vost#0:0/libx264 @ 0x15a10f0f0] Could not open encoder before EOF\n[vost#0:0/libx264 @ 0x15a10f0f0] Task finished with error code: -22 (Invalid argument)\n[vost#0:0/libx264 @ 0x15a10f0f0] Terminating thread with return code -22 (Invalid argument)\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.528+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15a10ff20] Nothing was written into output file, because at least one of its streams received no packets.\nframe=    0 fps=0.0 q=0.0 Lsize=       0KiB time=N/A bitrate=N/A speed=N/A    \n"}
{"L":"INFO","T":"2025-02-25T16:43:52.530+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Conversion failed!\n"}
{"L":"ERROR","T":"2025-02-25T16:43:52.538+0300","C":"ffmpeg/service.go:215","M":"Transcoding failed: input=/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4, output=/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/720p.mp4, dimensions=1280x719","error":"exit status 187","S":"github.com/consensuslabs/pavilion-network/backend/internal/video/ffmpeg.(*Service).Transcode\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/ffmpeg/service.go:215\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:197\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:43:52.623+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:43:52.664+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:52.664+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.676+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.677+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.677+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.713+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:43:52.716+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x141807110] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T16:43:52.717+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:43:53.182+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   46 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.46 bitrate=5719.8kbits/s speed= 2.9x    \r"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x141806240] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=149 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.89x    \n"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x141807110] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x141807110] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x141807110] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x141807110] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x141807110] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x141807110] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x141807110] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x141807110] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x141807110] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x141807110] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x141807110] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x141807110] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x141807110] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x141"}
{"L":"INFO","T":"2025-02-25T16:43:53.686+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"807110] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x141807110] ref P L0: 87.8% 12.2%\n[libx264 @ 0x141807110] ref B L0: 91.9%  8.1%\n[libx264 @ 0x141807110] ref B L1: 98.6%  1.4%\n[libx264 @ 0x141807110] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T16:43:53.694+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","dimensions":"854x480","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/480p.mp4","resolution_name":"480p"}
{"L":"INFO","T":"2025-02-25T16:43:57.142+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/480p.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:57.425+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:43:57.465+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:43:57.466+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.476+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.477+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.477+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.495+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x15561b320] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T16:43:57.498+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:43:57.982+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   77 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.50 bitrate=4194.5kbits/s speed=4.95x    \r"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15561a4e0] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=7.15x    \n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] frame I:1     Avg QP:26.22  size: 52767\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x15561b320] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x15561b320] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x15561b320] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x15561b320] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15561b320] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x15561b320] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x15561b320] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x15561b320] "}
{"L":"INFO","T":"2025-02-25T16:43:58.167+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x15561b320] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x15561b320] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x15561b320] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x15561b320] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x15561b320] ref P L0: 84.8% 15.2%\n[libx264 @ 0x15561b320] ref B L0: 91.1%  8.9%\n[libx264 @ 0x15561b320] ref B L1: 97.0%  3.0%\n[libx264 @ 0x15561b320] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T16:43:58.172+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","output":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/360p.mp4","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153/original.mp4"}
{"L":"INFO","T":"2025-02-25T16:44:00.295+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:44:00.497+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":1,"video_id":"97a29958-da6a-4fca-8f1c-f4ae45f37030","successful_resolutions":["480p","360p"],"failed_resolutions":["720p"],"total_successful":2}
{"L":"DEBUG","T":"2025-02-25T16:44:00.509+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.442959ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 16:44:00.501' WHERE \"id\" = '97a29958-da6a-4fca-8f1c-f4ae45f37030'"}
{"L":"DEBUG","T":"2025-02-25T16:44:00.516+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.198667ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','mp4','2025-02-25 16:43:51.827','2025-02-25 16:43:51.827') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:44:00.522+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('403331df-2098-4fe0-9c5c-211816df4dd6','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 16:43:51.827','2025-02-25 16:43:51.827') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"5.544625ms"}
{"L":"DEBUG","T":"2025-02-25T16:44:00.536+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.910083ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('c4a49dcd-c378-40b6-b438-d6e2a933e67e','videos/97a29958-da6a-4fca-8f1c-f4ae45f37030/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 16:43:57.369','2025-02-25 16:43:57.369') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:44:00.536+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.286125ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('97a29958-da6a-4fca-8f1c-f4ae45f37030','mp4','2025-02-25 16:43:52.539','2025-02-25 16:43:52.539') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"ERROR","T":"2025-02-25T16:44:00.544+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/01082e5d-f48b-4322-8b0f-3bdbda170153"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T16:44:00.551+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:44:00.551+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"POST","path":"/video/upload","status":500,"latency_ms":20169}
{"L":"INFO","T":"2025-02-25T16:55:16.343+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"POST","path":"/video/upload","status":401,"latency_ms":0}
{"L":"INFO","T":"2025-02-25T16:55:24.244+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.271+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"26.07875ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T16:55:24.338+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T16:55:24.338+0300"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.348+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.045042ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTY1MjQsIm5iZiI6MTc0MDQ5MTcyNCwiaWF0IjoxNzQwNDkxNzI0LCJqdGkiOiJmNWNlOTdkNy1kZmRiLTQ0OWYtODVjNy1hYzI0ZjFiOTk4NTcifQ.BJWtwkK1hCGH-cMdLAyj3Vv2dkXEwhHMnxf9TzbThNQ'"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.366+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTY1MjQsIm5iZiI6MTc0MDQ5MTcyNCwiaWF0IjoxNzQwNDkxNzI0LCJqdGkiOiJmNWNlOTdkNy1kZmRiLTQ0OWYtODVjNy1hYzI0ZjFiOTk4NTcifQ.BJWtwkK1hCGH-cMdLAyj3Vv2dkXEwhHMnxf9TzbThNQ','2025-03-04 16:55:24.338','2025-02-25 16:55:24.348',NULL) RETURNING \"id\"","source":"gorm","duration":"17.681083ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T16:55:24.366+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T16:55:24.383+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"16.899042ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 16:55:24.366',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 16:55:24.367' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T16:55:24.383+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T16:55:24.383+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":143,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T16:56:15.919+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.934167ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('a9eacc46-56cb-4e12-b373-c04f99dd29c0','dsfds','fsdfd','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','','',10064431,'dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.655209ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906',NULL,'pending','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.953+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.911041ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('a9eacc46-56cb-4e12-b373-c04f99dd29c0','dsfds','fsdfd','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','','',10064431,'dc58941b-bcf7-4cc1-a837-cb7831d3ea06','2025-02-25 16:56:15.906','2025-02-25 16:56:15.906') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:15.968+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"30.765166ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='dc58941b-bcf7-4cc1-a837-cb7831d3ea06',\"updated_at\"='2025-02-25 16:56:15.953' WHERE \"id\" = '9f4c3cee-3422-4467-a367-94db28d01168'"}
{"L":"INFO","T":"2025-02-25T16:56:15.969+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195"}
{"L":"INFO","T":"2025-02-25T16:56:26.194+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T16:56:26.790+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_width":1280,"target_height":720,"resolution":"720p","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:26.790+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/720p.mp4","resolution_name":"720p","dimensions":"1280x719","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:26.841+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:26.842+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.854+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.854+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.859+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.860+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.910+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x154630fe0] height not divisible by 2 (1280x719)\n[vost#0:0/libx264 @ 0x154630b80] Error while opening encoder - maybe incorrect parameters such as bit_rate, rate, width or height.\n[vf#0:0 @ 0x154631790] Error sending frames to consumers: Generic error in an external library\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.912+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vf#0:0 @ 0x154631790] Task finished with error code: -542398533 (Generic error in an external library)\n[vf#0:0 @ 0x154631790] Terminating thread with return code -542398533 (Generic error in an external library)\n"}
{"L":"INFO","T":"2025-02-25T16:56:26.912+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[vost#0:0/libx264 @ 0x154630b80] Could not open encoder before EOF\n[vost#0:0/libx264 @ 0x154630b80] Task finished with error code: -22 (Invalid argument)\n[vost#0:0/libx264 @ 0x154630b80] Terminating thread with return code -22 (Invalid argument)\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.365+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15462f6f0] Nothing was written into output file, because at least one of its streams received no packets.\nframe=    0 fps=0.0 q=0.0 Lsize=       0KiB time=N/A bitrate=N/A speed=N/A    \n"}
{"L":"INFO","T":"2025-02-25T16:56:27.366+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Conversion failed!\n"}
{"L":"ERROR","T":"2025-02-25T16:56:27.369+0300","C":"ffmpeg/service.go:215","M":"Transcoding failed: input=/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4, output=/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/720p.mp4, dimensions=1280x719","error":"exit status 187","S":"github.com/consensuslabs/pavilion-network/backend/internal/video/ffmpeg.(*Service).Transcode\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/ffmpeg/service.go:215\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:197\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:27.446+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T16:56:27.486+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:27.486+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.496+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.497+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.497+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.512+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.513+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.513+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.514+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:27.514+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.002+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   57 fps=0.0 q=29.0 size=    1536KiB time=00:00:01.83 bitrate=6863.6kbits/s speed=3.63x    \r"}
{"L":"INFO","T":"2025-02-25T16:56:28.409+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15be2fd60] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=0.0 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=5.41x    \n"}
{"L":"INFO","T":"2025-02-25T16:56:28.410+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x15be30ab0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x15be30ab0] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x15be30ab0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x15be30ab0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x15be30ab0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x15be30ab0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x15be30ab0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x15be30ab0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.410+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x15be30ab0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x15be30ab0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x15be30ab0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x15be30ab0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x15be30ab0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x15be30ab0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x15be30ab0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x15be30ab0] ref B L1: 98.6%  1.4%\n[libx264 @ 0x15be30ab0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T16:56:28.417+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/480p.mp4","resolution_name":"480p","dimensions":"854x480"}
{"L":"INFO","T":"2025-02-25T16:56:33.197+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/480p.mp4","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"480p"}
{"L":"INFO","T":"2025-02-25T16:56:33.448+0300","C":"ffmpeg/service.go:164","M":"Starting transcoding","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T16:56:33.488+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T16:56:33.488+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.498+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.501+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.501+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T16:56:33.517+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x150706350] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x150706350] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T16:56:33.519+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.008+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"frame=   33 fps=0.0 q=29.0 size=     256KiB time=00:00:01.03 bitrate=2029.9kbits/s speed=2.05x    \r"}
{"L":"INFO","T":"2025-02-25T16:56:34.432+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[out#0/mp4 @ 0x150705480] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed= 5.3x    \n"}
{"L":"INFO","T":"2025-02-25T16:56:34.433+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x150706350] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x150706350] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x150706350] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x150706350] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x150706350] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x150706350] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x150706350] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x150706350] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.433+0300","C":"ffmpeg/service.go:203","M":"FFmpeg output","output":"[libx264 @ 0x150706350] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x150706350] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x150706350] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x150706350] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x150706350] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x150706350] ref P L0: 84.8% 15.2%\n[libx264 @ 0x150706350] ref B L0: 91.1%  8.9%\n[libx264 @ 0x150706350] ref B L1: 97.0%  3.0%\n[libx264 @ 0x150706350] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T16:56:34.440+0300","C":"ffmpeg/service.go:220","M":"Transcoding completed successfully","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/original.mp4","output":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:56:36.322+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/360p.mp4"}
{"L":"INFO","T":"2025-02-25T16:56:36.496+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"dc58941b-bcf7-4cc1-a837-cb7831d3ea06","successful_resolutions":["480p","360p"],"failed_resolutions":["720p"],"total_successful":2,"total_failed":1}
{"L":"DEBUG","T":"2025-02-25T16:56:36.509+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.133708ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 16:56:36.499' WHERE \"id\" = 'dc58941b-bcf7-4cc1-a837-cb7831d3ea06'"}
{"L":"DEBUG","T":"2025-02-25T16:56:36.516+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.64025ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','mp4','2025-02-25 16:56:26.477','2025-02-25 16:56:26.477') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:36.522+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('1c889035-12a9-4bc7-ba02-abd054bb3376','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 16:56:26.477','2025-02-25 16:56:26.477') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"5.740875ms"}
{"L":"DEBUG","T":"2025-02-25T16:56:36.538+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.544167ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('ea7fe632-0759-4960-a580-c4e591bd4610','videos/dc58941b-bcf7-4cc1-a837-cb7831d3ea06/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 16:56:33.396','2025-02-25 16:56:33.396') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T16:56:36.538+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('dc58941b-bcf7-4cc1-a837-cb7831d3ea06','mp4','2025-02-25 16:56:27.37','2025-02-25 16:56:27.37') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.995291ms","rows_affected":1}
{"L":"ERROR","T":"2025-02-25T16:56:36.547+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:36.553+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/7c378c19-bc65-4112-b2b9-ee7745fd8195"}
{"L":"INFO","T":"2025-02-25T16:56:36.553+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T16:56:36.553+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T16:56:36.554+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":500,"latency_ms":20667,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-25T17:04:50.779+0300","C":"database/service.go:34","M":"Attempting to connect to database","host":"localhost","port":26257,"database":"pavilion_db"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.797+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"5.461042ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T17:04:50.804+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T17:04:50.827+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.233083ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.897+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"65.280417ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.903+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"6.62ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:04:50.903+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T17:04:50.903+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T17:04:50.966+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"62.097792ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T17:04:50.966+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T17:04:50.969+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T17:04:50.969+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T17:04:50.970+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T17:05:28.315+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.342+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"26.382583ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T17:05:28.438+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T17:05:28.438+0300"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.446+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.942292ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTcxMjgsIm5iZiI6MTc0MDQ5MjMyOCwiaWF0IjoxNzQwNDkyMzI4LCJqdGkiOiI3YjE3MTQzZS0xOWEyLTQ3ODktYmFmYS0yZWM5MjA5ZjI0ZmYifQ.J2QK7ULStefCeB3vG0lkJEo1u5sgnivHfFfoAT4B-dQ'"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.462+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"15.658792ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDEwOTcxMjgsIm5iZiI6MTc0MDQ5MjMyOCwiaWF0IjoxNzQwNDkyMzI4LCJqdGkiOiI3YjE3MTQzZS0xOWEyLTQ3ODktYmFmYS0yZWM5MjA5ZjI0ZmYifQ.J2QK7ULStefCeB3vG0lkJEo1u5sgnivHfFfoAT4B-dQ','2025-03-04 17:05:28.438','2025-02-25 17:05:28.446',NULL) RETURNING \"id\"","source":"gorm"}
{"L":"INFO","T":"2025-02-25T17:05:28.462+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T17:05:28.481+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"19.127458ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 17:05:28.462',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 17:05:28.463' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-25T17:05:28.481+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T17:05:28.481+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":167,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T17:06:02.770+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.856959ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('792418cc-7878-4808-bbd2-b1a1d8207c58','dsfds','fsdfd','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','','',10064431,'8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:02.780+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726',NULL,'pending','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.3105ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T17:06:02.818+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.791ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('792418cc-7878-4808-bbd2-b1a1d8207c58','dsfds','fsdfd','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','','',10064431,'8ad66aba-f56c-4ed4-af54-328e3c58b9fa','2025-02-25 17:06:02.726','2025-02-25 17:06:02.726') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:02.843+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='8ad66aba-f56c-4ed4-af54-328e3c58b9fa',\"updated_at\"='2025-02-25 17:06:02.818' WHERE \"id\" = '12857ef0-c6eb-40a6-8a03-94aee8d6e454'","source":"gorm","duration":"50.46925ms"}
{"L":"INFO","T":"2025-02-25T17:06:02.844+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657"}
{"L":"INFO","T":"2025-02-25T17:06:14.199+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa"}
{"L":"INFO","T":"2025-02-25T17:06:14.489+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","target_height":720,"resolution":"720p","original_width":854,"original_height":480,"target_width":1280}
{"L":"INFO","T":"2025-02-25T17:06:14.489+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:14.533+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:14.533+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.544+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000"}
{"L":"INFO","T":"2025-02-25T17:06:14.544+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":", bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.548+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.548+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.578+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.579+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.579+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T17:06:14.580+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:15.050+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   17 fps=0.0 q=29.0 size=     512KiB time=00:00:00.50 bitrate=8389.4kbits/s speed=0.997x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:15.554+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   56 fps= 56 q=29.0 size=    2304KiB time=00:00:01.80 bitrate=10486.0kbits/s speed=1.79x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:16.058+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   97 fps= 64 q=29.0 size=    4096KiB time=00:00:03.16 bitrate=10596.3kbits/s speed= 2.1x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x133107630] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 78 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.58x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x1331114e0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x1331114e0] "}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x1331114e0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x1331114e0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x1331114e0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x1331114e0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x1331114e0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x1331114e0] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x1331114e0] i16 v,h,dc,p: 28% 35% 18% 18%\n"}
{"L":"INFO","T":"2025-02-25T17:06:16.464+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x1331114e0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x1331114e0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x1331114e0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x1331114e0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x1331114e0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x1331114e0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x1331114e0] ref B L1: 97.9%  2.1%\n[libx264 @ 0x1331114e0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T17:06:16.477+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T17:06:22.264+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/720p.mp4","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa"}
{"L":"INFO","T":"2025-02-25T17:06:22.626+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4","resolution_name":"480p"}
{"L":"INFO","T":"2025-02-25T17:06:22.667+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:22.667+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.678+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.679+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.679+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.710+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:22.711+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x13b805850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T17:06:22.712+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.179+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   40 fps=0.0 q=29.0 size=     768KiB time=00:00:01.26 bitrate=4967.2kbits/s speed=2.53x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:23.683+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=  111 fps=111 q=29.0 size=    2816KiB time=00:00:03.63 bitrate=6349.3kbits/s speed=3.62x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13b804980] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=126 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.13x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x13b805850] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x13b805850] frame B:111   Avg QP:30.29  size: 18000\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x13b805850] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x13b805850] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x13b805850] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x13b805850] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x13b805850] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x13b805850] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x13b805850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x13b805850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x13b805850] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x13b805850] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13b805850] "}
{"L":"INFO","T":"2025-02-25T17:06:23.874+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ref P L0: 87.8% 12.2%\n[libx264 @ 0x13b805850] ref B L0: 91.9%  8.1%\n[libx264 @ 0x13b805850] ref B L1: 98.6%  1.4%\n[libx264 @ 0x13b805850] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T17:06:23.879+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/480p.mp4","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.291+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/480p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.600+0300","C":"ffmpeg/service.go:180","M":"Starting transcoding","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:27.641+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T17:06:27.642+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.652+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.652+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.653+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.653+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.677+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T17:06:27.678+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x137805850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T17:06:27.681+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.155+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"frame=   63 fps=0.0 q=29.0 size=     768KiB time=00:00:02.03 bitrate=3094.3kbits/s speed=4.05x    \r"}
{"L":"INFO","T":"2025-02-25T17:06:28.467+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[out#0/mp4 @ 0x137804980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.06x    \n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x137805850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x137805850] frame B:111   Avg QP:30.81  size:  9314\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x137805850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x137805850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x137805850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x137805850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x137805850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x137805850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x137805850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.468+0300","C":"ffmpeg/service.go:219","M":"FFmpeg output","output":"[libx264 @ 0x137805850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x137805850] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x137805850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x137805850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x137805850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x137805850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x137805850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T17:06:28.471+0300","C":"ffmpeg/service.go:236","M":"Transcoding completed successfully","input":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/original.mp4","output":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657/360p.mp4","resolution_name":"360p","dimensions":"640x360"}
{"L":"INFO","T":"2025-02-25T17:06:31.493+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/360p.mp4"}
{"L":"INFO","T":"2025-02-25T17:06:31.629+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","failed_resolutions":[],"total_successful":3,"total_failed":0,"video_id":"8ad66aba-f56c-4ed4-af54-328e3c58b9fa","successful_resolutions":["720p","480p","360p"]}
{"L":"DEBUG","T":"2025-02-25T17:06:31.643+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.530667ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 17:06:31.632' WHERE \"id\" = '8ad66aba-f56c-4ed4-af54-328e3c58b9fa'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.653+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','mp4','2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.706167ms"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.661+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('0e8be840-8929-415f-847d-11305bd7fa08','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"8.417ms"}
{"L":"DEBUG","T":"2025-02-25T17:06:31.679+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.229083ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49221a86-b9e6-42ea-a6cc-bdde6c82115f','videos/8ad66aba-f56c-4ed4-af54-328e3c58b9fa/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 17:06:22.569','2025-02-25 17:06:22.569') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T17:06:31.679+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('8ad66aba-f56c-4ed4-af54-328e3c58b9fa','mp4','2025-02-25 17:06:14.406','2025-02-25 17:06:14.406') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"17.73225ms"}
{"L":"ERROR","T":"2025-02-25T17:06:31.688+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/3b9b46b6-555e-4710-8dbb-7f33f5d2b657"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T17:06:31.699+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T17:06:31.699+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":500,"latency_ms":29016,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-25T17:58:20.396+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T17:58:20.397+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T17:58:20.405+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:00:09.805+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:00:09.833+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"10.276584ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T18:00:09.837+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:00:09.837+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:00:09.838+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:00:09.860+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.332167ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.931+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"67.307458ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.938+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.931125ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:00:09.938+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:00:09.938+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:00:09.986+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"48.20225ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:00:09.986+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-25T18:00:09.990+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-25T18:00:24.199+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"POST","path":"/video/upload","status":401}
{"L":"INFO","T":"2025-02-25T18:00:34.722+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.741+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1","source":"gorm","duration":"18.321458ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:00:34.839+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-25T18:00:34.840+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T18:00:34.840+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-04T18:00:34.840+0300"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.851+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"11.008916ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDExMDA0MzQsIm5iZiI6MTc0MDQ5NTYzNCwiaWF0IjoxNzQwNDk1NjM0LCJqdGkiOiIyZDAzOTNkNi1kNGU1LTQxNzYtYjA1ZC00NGEwOTQ0YmE5MzIifQ.nukB7cmZ82pOMLEo-dbS6c-A8R_Wf7SdJ0DivKk5WUs'"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.866+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJleHAiOjE3NDExMDA0MzQsIm5iZiI6MTc0MDQ5NTYzNCwiaWF0IjoxNzQwNDk1NjM0LCJqdGkiOiIyZDAzOTNkNi1kNGU1LTQxNzYtYjA1ZC00NGEwOTQ0YmE5MzIifQ.nukB7cmZ82pOMLEo-dbS6c-A8R_Wf7SdJ0DivKk5WUs','2025-03-04 18:00:34.84','2025-02-25 18:00:34.851',NULL) RETURNING \"id\"","source":"gorm","duration":"14.994667ms"}
{"L":"INFO","T":"2025-02-25T18:00:34.866+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-25T18:00:34.882+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-25 18:00:34.866',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-25 18:00:34.867' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm","duration":"16.498584ms"}
{"L":"INFO","T":"2025-02-25T18:00:34.882+0300","C":"auth/service.go:110","M":"Login successful","email":"user@example.com","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-25T18:00:34.882+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":160,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-25T18:01:05.269+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"52.301709ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('78a9b134-6452-4490-bac7-502e34048eee','dsfds','fsdfd','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','','',10064431,'10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.278+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.051541ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024',NULL,'pending','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.301+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.156792ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('78a9b134-6452-4490-bac7-502e34048eee','dsfds','fsdfd','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','','',10064431,'10077cec-fc55-4ab0-9226-393cb982516b','2025-02-25 18:01:05.024','2025-02-25 18:01:05.024') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:05.316+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"31.259791ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='10077cec-fc55-4ab0-9226-393cb982516b',\"updated_at\"='2025-02-25 18:01:05.301' WHERE \"id\" = '65cd8802-2bf1-4d34-9ef0-cb40274ddd7a'"}
{"L":"INFO","T":"2025-02-25T18:01:05.318+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e"}
{"L":"INFO","T":"2025-02-25T18:01:15.713+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:16.031+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:01:16.031+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:16.078+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:16.078+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.089+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.094+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\nPress [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.118+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.119+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.119+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.120+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:16.595+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.06x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:17.096+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   53 fps= 53 q=29.0 size=    2048KiB time=00:00:01.70 bitrate=9869.2kbits/s speed= 1.7x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:17.598+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   90 fps= 60 q=29.0 size=    3840KiB time=00:00:02.93 bitrate=10724.2kbits/s speed=1.95x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x1458049c0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 76 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.49x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x144e3a1d0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x144e3a1d0] frame B:111   Avg QP:29.43  size: 29595\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x144e3a1d0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x144e3a1d0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x144e3a1d0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x144e3a1d0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x144e3a1d0] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x144e3a1d0] i16 v,h,dc,p: 28% 35% 18% 18%\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x144e3a1d0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x144e3a1d0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x144e3a1d0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x144e3a1d0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x144e3a1d0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x144e3a1d0] ref B L1: 97.9%  2.1%\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.079+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144e3a1d0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:01:18.096+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:01:23.467+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:23.817+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:23.858+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:23.858+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.868+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.869+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.869+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:23.893+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x14ff23a00] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x14ff23a00] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:01:23.898+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.375+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   46 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.46 bitrate=5719.8kbits/s speed=2.91x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:24.874+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  145 fps=144 q=-1.0 size=    3328KiB time=00:00:04.76 bitrate=5719.6kbits/s speed=4.74x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x14ff22b90] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=149 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.89x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x14ff23a00] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x14ff23a00] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x14ff23a00] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x14ff23a00] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x14ff23a00] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x14ff23a00] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.879+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14ff23a00] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x14ff23a00] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x14ff23a00] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x14ff23a00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x14ff23a00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x14ff23a00] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x14ff23a00] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x14ff23a00] ref P L0: 87.8% 12.2%\n[libx264 @ 0x14ff23a00] ref B L0: 91.9%  8.1%\n[libx264 @ 0x14ff23a00] ref B L1: 98.6%  1.4%\n[libx264 @ 0x14ff23a00] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:01:24.886+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:28.172+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:28.510+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:01:28.553+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:01:28.553+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.564+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]"}
{"L":"INFO","T":"2025-02-25T18:01:28.565+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.567+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.567+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.586+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] profile High, level 3.0, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4':\n  Metadata:\n    major_brand     : "}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":", 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n"}
{"L":"INFO","T":"2025-02-25T18:01:28.587+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.072+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   61 fps=0.0 q=29.0 size=     768KiB time=00:00:01.96 bitrate=3199.2kbits/s speed=3.89x    \r"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x129104980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.13x    \n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x129105850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x129105850] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x129105850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x129105850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x129105850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x129105850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x129105850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x129105850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x129105850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x129105850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x129105850] i8c dc,h,v,p: 50% 22% 17% 10%\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.372+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x129105850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x129105850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x129105850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x129105850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x129105850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:01:29.377+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"640x360","input":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/original.mp4","output":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T18:01:31.275+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/10077cec-fc55-4ab0-9226-393cb982516b/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:01:31.418+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0}
{"L":"DEBUG","T":"2025-02-25T18:01:31.431+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.328875ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:01:31.42' WHERE \"id\" = '10077cec-fc55-4ab0-9226-393cb982516b'"}
{"L":"DEBUG","T":"2025-02-25T18:01:31.437+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.955125ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','mp4','2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:31.445+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.260833ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('5dd4cf34-44d1-4d87-931e-b254e15b19c9','videos/10077cec-fc55-4ab0-9226-393cb982516b/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:01:31.460+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.925292ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('8b9ca11b-48e7-4d36-9af5-8d2997462308','videos/10077cec-fc55-4ab0-9226-393cb982516b/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:01:23.764','2025-02-25 18:01:23.764') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:01:31.460+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('10077cec-fc55-4ab0-9226-393cb982516b','mp4','2025-02-25 18:01:15.965','2025-02-25 18:01:15.965') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.142125ms","rows_affected":1}
{"L":"ERROR","T":"2025-02-25T18:01:31.469+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:320\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ProcessUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:293\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:83\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/38e2d928-5460-4a2b-a4fb-b06e05d6be2e"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"video/logger_adapter.go:17","M":"Video processing failed","request_id":"","filename":"20250219_1239_Blockchain-Powered Creator World_simple_compose_01jmes6cndemeajhjd94ecvvnp (1).mp4","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)"}
{"L":"ERROR","T":"2025-02-25T18:01:31.478+0300","C":"http/response_handler.go:34","M":"Video transcoding failed","error":"failed to update records: failed to create segment record: ERROR: duplicate key value violates unique constraint \"transcode_segments_pkey\" (SQLSTATE 23505)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:89\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:01:31.478+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":500,"latency_ms":26561,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-25T18:03:14.248+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:03:14.249+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:03:14.256+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:07:12.683+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:07:12.711+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"8.949125ms","rows_affected":0}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:07:12.716+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:07:12.740+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.820958ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.816+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"72.196042ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.822+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.839834ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:07:12.822+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:07:12.822+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:07:12.887+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"64.997709ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:07:12.887+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:07:12.890+0300","C":"backend/app.go:133","M":"S3 Configuration in App","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-25T18:07:12.890+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T18:07:12.891+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:07:15.935+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.611083ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:15.945+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.889416ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923',NULL,'pending','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:15.972+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:15.923') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.992375ms"}
{"L":"DEBUG","T":"2025-02-25T18:07:15.988+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.611083ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='e1116374-a8cd-4a2c-ac02-006c534aa9f1',\"updated_at\"='2025-02-25 18:07:15.972' WHERE \"id\" = 'c4355387-9ee6-46dc-bd7a-992e1306cc17'"}
{"L":"INFO","T":"2025-02-25T18:07:15.988+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f"}
{"L":"INFO","T":"2025-02-25T18:07:27.202+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:07:27.586+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:27.586+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_height":480,"input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4","resolution_name":"720p","dimensions":"1280x720","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:27.627+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:27.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.638+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.643+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.643+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.672+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.672+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.673+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n"}
{"L":"INFO","T":"2025-02-25T18:07:27.674+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:28.148+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   22 fps=0.0 q=29.0 size=     512KiB time=00:00:00.66 bitrate=6292.0kbits/s speed=1.32x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:28.653+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   58 fps= 57 q=29.0 size=    2304KiB time=00:00:01.86 bitrate=10111.5kbits/s speed=1.85x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   92 fps= 61 q=29.0 size=    4096KiB time=00:00:03.00 bitrate=11184.9kbits/s speed=1.98x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.658+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  135 fps= 67 q=29.0 size=    5376KiB time=00:00:04.43 bitrate=9934.0kbits/s speed= 2.2x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x144804a70] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 72 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.38x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x144805940] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x144805940] frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x144805940] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x144805940] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x144805940] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x144805940] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n"}
{"L":"INFO","T":"2025-02-25T18:07:29.720+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x144805940] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x144805940] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x144805940] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x144805940] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x144805940] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x144805940] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x144805940] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x144805940] ref P L0: 81.6% 18.4%\n[libx264 @ 0x144805940] ref B L0: 90.7%  9.3%\n[libx264 @ 0x144805940] ref B L1: 97.9%  2.1%\n[libx264 @ 0x144805940] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:07:29.733+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:07:34.965+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:35.283+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:07:35.325+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:35.325+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.335+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.338+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.338+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.367+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x158f06ab0] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x158f06ab0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:07:35.370+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:35.842+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   35 fps=0.0 q=29.0 size=     768KiB time=00:00:01.13 bitrate=5551.6kbits/s speed=2.25x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:36.345+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   99 fps= 98 q=29.0 size=    2560KiB time=00:00:03.23 bitrate=6486.2kbits/s speed=3.21x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x158f05bc0] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=118 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=3.89x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x158f06ab0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x158f06ab0] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x158f06ab0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x158f06ab0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x158f06ab0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.606+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x158f06ab0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x158f06ab0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x158f06ab0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x158f06ab0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x158f06ab0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x158f06ab0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x158f06ab0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x158f06ab0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x158f06ab0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x158f06ab0] ref B L1: 98.6%  1.4%\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.607+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x158f06ab0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:07:36.620+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:40.716+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"480p","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:07:40.985+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_height":480,"input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854}
{"L":"INFO","T":"2025-02-25T18:07:41.026+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:07:41.027+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.037+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.038+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.038+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.072+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.073+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x14062fc10] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T18:07:41.073+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"uv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.542+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   64 fps=0.0 q=29.0 size=     768KiB time=00:00:02.06 bitrate=3044.4kbits/s speed= 4.1x    \r"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x14062ee00] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.28x    \n"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x14062fc10] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x14062fc10] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x14062fc10] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x14062fc10] mb I  I16..4:  4.6% 18.5% 77.0%\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.824+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x14062fc10] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x14062fc10] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x14062fc10] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x14062fc10] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x14062fc10] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x14062fc10] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x14062fc10] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x14062fc10] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x14062fc10] "}
{"L":"INFO","T":"2025-02-25T18:07:41.825+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x14062fc10] ref P L0: 84.8% 15.2%\n[libx264 @ 0x14062fc10] ref B L0: 91.1%  8.9%\n[libx264 @ 0x14062fc10] ref B L1: 97.0%  3.0%\n[libx264 @ 0x14062fc10] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:07:41.830+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","output":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/360p.mp4","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.120+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.323+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0}
{"L":"DEBUG","T":"2025-02-25T18:07:44.335+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"9.305042ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:07:44.326' WHERE \"id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.342+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.622459ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.350+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.269292ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9e7222ce-cda5-4ecc-bf37-9fd24fcfd822','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',5,'2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.21675ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('4f0e0668-ffd6-4dcb-8a9b-40f03b131645','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.003666ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:27.436','2025-02-25 18:07:27.436') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.371+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"3.775ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('4f0e0668-ffd6-4dcb-8a9b-40f03b131645','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.385+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.426542ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9483f562-83e2-4fa5-a428-6fe30333afa1','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.385+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.495583ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:35.23','2025-02-25 18:07:35.23') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.388+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.711583ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('9483f562-83e2-4fa5-a428-6fe30333afa1','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.402+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.871833ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('24677bd6-97d6-4a98-8b03-811cceaf8388','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:07:44.323','2025-02-25 18:07:44.323') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.402+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.759334ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('e1116374-a8cd-4a2c-ac02-006c534aa9f1','mp4','2025-02-25 18:07:40.931','2025-02-25 18:07:40.931') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:07:44.406+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('24677bd6-97d6-4a98-8b03-811cceaf8388','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:07:44.323','2025-02-25 18:07:44.323') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"3.738833ms"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.417+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('c5bcae0c-f32d-4153-8cf5-cb6ee6b845e5','dsfds','fsdfd','videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'e1116374-a8cd-4a2c-ac02-006c534aa9f1','2025-02-25 18:07:15.923','2025-02-25 18:07:44.326') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.539ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-25T18:07:44.428+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.935542ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:07:44.406',\"status\"='completed',\"updated_at\"='2025-02-25 18:07:44.406',\"video_id\"='e1116374-a8cd-4a2c-ac02-006c534aa9f1' WHERE \"id\" = 'c4355387-9ee6-46dc-bd7a-992e1306cc17'"}
{"L":"INFO","T":"2025-02-25T18:07:44.439+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/fcd73b1e-466f-421f-921e-a3f8ff9b7c9f"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.467+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.789125ms","rows_affected":7,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('24677bd6-97d6-4a98-8b03-811cceaf8388','4f0e0668-ffd6-4dcb-8a9b-40f03b131645','9483f562-83e2-4fa5-a428-6fe30333afa1','9e7222ce-cda5-4ecc-bf37-9fd24fcfd822')"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.467+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.569459ms","rows_affected":4,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.475+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.353291ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1'"}
{"L":"DEBUG","T":"2025-02-25T18:07:44.475+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = 'e1116374-a8cd-4a2c-ac02-006c534aa9f1' ORDER BY \"videos\".\"id\" LIMIT 1","source":"gorm","duration":"35.966625ms"}
{"L":"INFO","T":"2025-02-25T18:07:44.475+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"e1116374-a8cd-4a2c-ac02-006c534aa9f1","file_path":"videos/e1116374-a8cd-4a2c-ac02-006c534aa9f1/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:07:44.475+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":28585,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-25T18:26:12.621+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:26:12.622+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:26:12.632+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:26:34.767+0300","C":"database/service.go:34","M":"Attempting to connect to database","port":26257,"database":"pavilion_db","host":"localhost"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.785+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"USE pavilion_db","source":"gorm","duration":"5.887167ms"}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:26:34.788+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:26:34.807+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.696292ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.864+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"54.902125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.871+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.035ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:26:34.871+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:26:34.871+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:26:34.922+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"51.25125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:26:34.922+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:26:34.925+0300","C":"backend/app.go:133","M":"S3 Configuration in App","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-25T18:26:34.925+0300","C":"s3/service.go:26","M":"S3 Service Configuration","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-25T18:26:34.926+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"ERROR","T":"2025-02-25T18:26:44.739+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:76\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:75\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:72\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:44.741+0300","C":"video/logger_adapter.go:17","M":"Failed to initialize upload","request_id":"","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-25T18:26:44.741+0300","C":"http/response_handler.go:34","M":"Failed to initialize upload","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:78\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:44.741+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":500,"latency_ms":37,"client_ip":"::1","method":"POST"}
{"L":"ERROR","T":"2025-02-25T18:26:53.496+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Create\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:24\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:76\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).InitializeUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:75\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:72\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:53.498+0300","C":"video/logger_adapter.go:17","M":"Failed to initialize upload","request_id":"","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-25T18:26:53.498+0300","C":"http/response_handler.go:34","M":"Failed to initialize upload","error":"failed to create video record: ERROR: column \"duration\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).HandleUpload\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:78\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-25T18:26:53.499+0300","C":"http/middleware.go:44","M":"HTTP Request","status":500,"latency_ms":33,"client_ip":"::1","method":"POST","path":"/video/upload"}
{"L":"INFO","T":"2025-02-25T18:28:50.116+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:28:50.117+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:28:50.120+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:29:08.293+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-25T18:29:08.318+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.310417ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:29:08.324+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:29:08.343+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.546791ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.409+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"64.103791ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.415+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.469417ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:29:08.415+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:29:08.415+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:29:08.462+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"47.093166ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-25T18:29:08.462+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:29:08.465+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:29:10.225+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.231375ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:10.235+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213',NULL,'pending','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.920125ms"}
{"L":"DEBUG","T":"2025-02-25T18:29:10.257+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.54325ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:10.213') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:10.275+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='9dffedcf-7403-4733-a994-32b95d29314f',\"updated_at\"='2025-02-25 18:29:10.257' WHERE \"id\" = '4439efdd-bf44-4de1-8172-4d87819d84ee'","source":"gorm","duration":"31.485417ms","rows_affected":1}
{"L":"INFO","T":"2025-02-25T18:29:10.276+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc"}
{"L":"INFO","T":"2025-02-25T18:29:10.434+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"9dffedcf-7403-4733-a994-32b95d29314f"}
{"L":"INFO","T":"2025-02-25T18:29:20.641+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4","video_id":"9dffedcf-7403-4733-a994-32b95d29314f"}
{"L":"INFO","T":"2025-02-25T18:29:21.036+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_width":854,"original_height":480,"target_width":1280,"target_height":720,"resolution":"720p"}
{"L":"INFO","T":"2025-02-25T18:29:21.036+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:21.081+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:21.081+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.093+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.093+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.100+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\nPress [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.138+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.139+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.139+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:21.611+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.05x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:22.124+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   51 fps= 50 q=29.0 size=    2048KiB time=00:00:01.63 bitrate=10272.0kbits/s speed= 1.6x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:22.626+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   82 fps= 54 q=29.0 size=    3584KiB time=00:00:02.66 bitrate=11010.2kbits/s speed=1.75x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:23.131+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  129 fps= 64 q=29.0 size=    5120KiB time=00:00:04.23 bitrate=9907.9kbits/s speed=2.09x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x1480042f0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 70 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.31x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x1480051b0] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x1480051b0] frame B:111   Avg QP:29.43  size: 29595\n"}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x1480051b0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x1480051b0] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x1480051b0] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x1480051b0] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x1480051b0] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x1480051b0] "}
{"L":"INFO","T":"2025-02-25T18:29:23.233+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x1480051b0] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x1480051b0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x1480051b0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x1480051b0] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x1480051b0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x1480051b0] ref P L0: 81.6% 18.4%\n[libx264 @ 0x1480051b0] ref B L0: 90.7%  9.3%\n[libx264 @ 0x1480051b0] ref B L1: 97.9%  2.1%\n[libx264 @ 0x1480051b0] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:29:23.249+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"1280x720","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/720p.mp4","resolution_name":"720p"}
{"L":"INFO","T":"2025-02-25T18:29:28.782+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:29.116+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:29.158+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.168+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.171+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.171+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.189+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] profile High, level 3.1, 4:2:0, 8-bit\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : "}
{"L":"INFO","T":"2025-02-25T18:29:29.192+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:29.676+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   50 fps=0.0 q=29.0 size=    1280KiB time=00:00:01.60 bitrate=6553.8kbits/s speed=3.17x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x15160fe10] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=0.0 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=5.03x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x151610ce0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x151610ce0] frame B:111   Avg QP:30.29  size: 18000\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x151610ce0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x151610ce0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x151610ce0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x151610ce0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x151610ce0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x151610ce0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x151610ce0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x151610ce0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x151610ce0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x151610ce0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x151610ce0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x151610ce0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x151610ce0] ref B L1: 98.6%  1.4%\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.152+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x151610ce0] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:29:30.159+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/480p.mp4","resolution_name":"480p","dimensions":"854x480"}
{"L":"INFO","T":"2025-02-25T18:29:33.459+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:33.783+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:33.823+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:29:33.823+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.833+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.835+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.835+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:29:33.854+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x128005850] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x128005850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7"}
{"L":"INFO","T":"2025-02-25T18:29:33.855+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.342+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   93 fps=0.0 q=29.0 size=    1536KiB time=00:00:03.03 bitrate=4148.3kbits/s speed=6.01x    \r"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x128004980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=7.22x    \n"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x128005850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x128005850] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x128005850] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x128005850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x128005850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x128005850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x128005850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x128005850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x128005850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x128005850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.519+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x128005850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x128005850] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x128005850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x128005850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x128005850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x128005850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x128005850] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:29:34.527+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","resolution_name":"360p","dimensions":"640x360","input":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/original.mp4","output":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:36.516+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:36.996+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":0,"video_id":"9dffedcf-7403-4733-a994-32b95d29314f","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3}
{"L":"DEBUG","T":"2025-02-25T18:29:37.009+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.943833ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:29:36.999' WHERE \"id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.016+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:20.892','2025-02-25 18:29:20.892') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"7.433791ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:37.035+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.382917ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb','videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.035+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"18.329291ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:20.892','2025-02-25 18:29:20.892') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.041+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"6.22ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb','videos/9dffedcf-7403-4733-a994-32b95d29314f/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.055+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('6c5c7a5f-23ba-45b1-98e9-1873eeccc574','videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.574291ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-25T18:29:37.055+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.734625ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:29.064','2025-02-25 18:29:29.064') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.059+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.855ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('6c5c7a5f-23ba-45b1-98e9-1873eeccc574','videos/9dffedcf-7403-4733-a994-32b95d29314f/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.072+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"8.6425ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49289247-3036-4f48-8694-8f5ff80adf2c','videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:29:36.996','2025-02-25 18:29:36.996') ON CONFLICT (\"id\") DO UPDATE SET \"transcode_id\"=\"excluded\".\"transcode_id\" RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.072+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.008917ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('9dffedcf-7403-4733-a994-32b95d29314f','mp4','2025-02-25 18:29:33.729','2025-02-25 18:29:33.729') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.076+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.239958ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('49289247-3036-4f48-8694-8f5ff80adf2c','videos/9dffedcf-7403-4733-a994-32b95d29314f/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:29:36.996','2025-02-25 18:29:36.996') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:29:37.087+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"10.306416ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('1f44624c-22d7-422e-8170-123b7d0b1222','dsfds','fsdfd','videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'9dffedcf-7403-4733-a994-32b95d29314f','2025-02-25 18:29:10.213','2025-02-25 18:29:36.999') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.095+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.424042ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:29:37.076',\"status\"='completed',\"updated_at\"='2025-02-25 18:29:37.076',\"video_id\"='9dffedcf-7403-4733-a994-32b95d29314f' WHERE \"id\" = '4439efdd-bf44-4de1-8172-4d87819d84ee'"}
{"L":"INFO","T":"2025-02-25T18:29:37.106+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/c69b54b8-126e-4e25-b8f7-793620c200cc"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.128+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.369042ms","rows_affected":6,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('49289247-3036-4f48-8694-8f5ff80adf2c','6c5c7a5f-23ba-45b1-98e9-1873eeccc574','cf0c311a-67af-4502-90f3-a79ec9ee5f2f','e522a3f8-b1ff-4385-a4eb-a6b5f83bebfb')"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.128+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.768417ms","rows_affected":4,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.137+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.202042ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '9dffedcf-7403-4733-a994-32b95d29314f'"}
{"L":"DEBUG","T":"2025-02-25T18:29:37.137+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"30.292459ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '9dffedcf-7403-4733-a994-32b95d29314f' ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T18:29:37.137+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"9dffedcf-7403-4733-a994-32b95d29314f","file_path":"videos/9dffedcf-7403-4733-a994-32b95d29314f/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:29:37.137+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":26949,"client_ip":"::1","method":"POST","path":"/video/upload","status":200}
{"L":"INFO","T":"2025-02-25T18:35:01.520+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T18:35:01.521+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:35:01.526+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-25T18:35:12.618+0300","C":"database/service.go:34","M":"Attempting to connect to database","host":"localhost","port":26257,"database":"pavilion_db"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.635+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"4.579042ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-25T18:35:12.642+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-25T18:35:12.664+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.796ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.736+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"69.038459ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.743+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.204916ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-25T18:35:12.743+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-25T18:35:12.743+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-25T18:35:12.797+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"54.10625ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:12.797+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-25T18:35:12.800+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-25T18:35:12.800+0300","C":"s3/service.go:26","M":"S3 Service Configuration","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":""}
{"L":"INFO","T":"2025-02-25T18:35:12.801+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.528+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"16.580292ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.541+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507',NULL,'pending','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"13.56875ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.571+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:17.507') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"19.06575ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:17.589+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"38.543333ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='3632bb3f-4ad0-4f07-a3d2-ab964aa50cae',\"updated_at\"='2025-02-25 18:35:17.571' WHERE \"id\" = '3822c098-119c-46cc-8b48-fda7ef57d66e'"}
{"L":"INFO","T":"2025-02-25T18:35:17.590+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e"}
{"L":"INFO","T":"2025-02-25T18:35:17.742+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae"}
{"L":"INFO","T":"2025-02-25T18:35:28.271+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-25T18:35:28.569+0300","C":"ffmpeg/service.go:144","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","original_width":854}
{"L":"INFO","T":"2025-02-25T18:35:28.569+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:28.614+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:28.614+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.624+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.628+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.649+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x13a005940] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n"}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"        vendor_id       : "}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: "}
{"L":"INFO","T":"2025-02-25T18:35:28.650+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:29.133+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   22 fps=0.0 q=29.0 size=     512KiB time=00:00:00.66 bitrate=6292.0kbits/s speed=1.32x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:29.637+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   65 fps= 64 q=29.0 size=    2816KiB time=00:00:02.10 bitrate=10985.3kbits/s speed=2.08x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:30.140+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  113 fps= 75 q=29.0 size=    4608KiB time=00:00:03.70 bitrate=10202.5kbits/s speed=2.45x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13a004a70] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 86 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.83x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x13a005940] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x13a005940] frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x13a005940] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x13a005940] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x13a005940] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n"}
{"L":"INFO","T":"2025-02-25T18:35:30.374+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x13a005940] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x13a005940] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x13a005940] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x13a005940] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x13a005940] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x13a005940] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x13a005940] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x13a005940] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13a005940] ref P L0: 81.6% 18.4%\n[libx264 @ 0x13a005940] ref B L0: 90.7%  9.3%\n[libx264 @ 0x13a005940] "}
{"L":"INFO","T":"2025-02-25T18:35:30.375+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ref B L1: 97.9%  2.1%\n[libx264 @ 0x13a005940] kb/s:9397.04\n"}
{"L":"INFO","T":"2025-02-25T18:35:30.384+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-25T18:35:35.584+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/720p.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:35.922+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4","resolution_name":"480p","dimensions":"854x480","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-25T18:35:35.963+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:35.963+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.973+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.974+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:35.974+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.000+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] using cpu capabilities: ARMv8 NEON\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.001+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x145005850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y"}
{"L":"INFO","T":"2025-02-25T18:35:36.002+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:36.479+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   39 fps=0.0 q=29.0 size=     768KiB time=00:00:01.23 bitrate=5101.5kbits/s speed=2.44x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:36.983+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=  138 fps=137 q=29.0 size=    3328KiB time=00:00:04.53 bitrate=6014.0kbits/s speed=4.49x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x145004980] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=145 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.76x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x145005850] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x145005850] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x145005850] "}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x145005850] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x145005850] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x145005850] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x145005850] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x145005850] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x145005850] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x145005850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x145005850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x145005850] i8c dc,h,v,p: 48% 26% 16% 11%\n"}
{"L":"INFO","T":"2025-02-25T18:35:37.012+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x145005850] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x145005850] ref P L0: 87.8% 12.2%\n[libx264 @ 0x145005850] ref B L0: 91.9%  8.1%\n[libx264 @ 0x145005850] ref B L1: 98.6%  1.4%\n[libx264 @ 0x145005850] kb/s:5948.23\n"}
{"L":"INFO","T":"2025-02-25T18:35:37.018+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/480p.mp4","resolution_name":"480p","dimensions":"854x480","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:40.170+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/480p.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"480p"}
{"L":"INFO","T":"2025-02-25T18:35:40.468+0300","C":"ffmpeg/service.go:181","M":"Starting transcoding","original_width":854,"original_height":480,"input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4","resolution_name":"360p","dimensions":"640x360"}
{"L":"INFO","T":"2025-02-25T18:35:40.509+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-25T18:35:40.510+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.520+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.520+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.523+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.523+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.547+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x10fe05090] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x10fe05090] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x10fe05090] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-25T18:35:40.548+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n"}
{"L":"INFO","T":"2025-02-25T18:35:41.028+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"frame=   86 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.80 bitrate=3745.1kbits/s speed=5.54x    \r"}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[out#0/mp4 @ 0x10fe041c0] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed= 7.4x    \n"}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"[libx264 @ 0x10fe05090] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x10fe05090] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x10fe05090] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x10fe05090] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x10fe05090] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x10fe05090] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x10fe05090] "}
{"L":"INFO","T":"2025-02-25T18:35:41.190+0300","C":"ffmpeg/service.go:220","M":"FFmpeg output","output":"mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x10fe05090] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x10fe05090] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x10fe05090] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x10fe05090] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x10fe05090] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x10fe05090] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x10fe05090] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x10fe05090] ref P L0: 84.8% 15.2%\n[libx264 @ 0x10fe05090] ref B L0: 91.1%  8.9%\n[libx264 @ 0x10fe05090] ref B L1: 97.0%  3.0%\n[libx264 @ 0x10fe05090] kb/s:3420.83\n"}
{"L":"INFO","T":"2025-02-25T18:35:41.194+0300","C":"ffmpeg/service.go:237","M":"Transcoding completed successfully","dimensions":"640x360","input":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/original.mp4","output":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-25T18:35:44.612+0300","C":"s3/service.go:87","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/360p.mp4","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","resolution":"360p"}
{"L":"INFO","T":"2025-02-25T18:35:44.820+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3,"total_failed":0,"video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.831+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.38675ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-25 18:35:44.823' WHERE \"id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.839+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:28.489','2025-02-25 18:35:28.489') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"7.29525ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.845+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.643917ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('fd2c83e3-d782-4cae-8b38-557f78c6929f','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-25 18:35:44.839','2025-02-25 18:35:44.839') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.849+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.820292ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:35.867','2025-02-25 18:35:35.867') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.853+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('a91f8115-4730-4113-b571-dd63180b8816','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-25 18:35:44.849','2025-02-25 18:35:44.849') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.211833ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.677083ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','mp4','2025-02-25 18:35:40.414','2025-02-25 18:35:40.414') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-25T18:35:44.864+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('37a9ab5b-9085-4741-993e-098d7caa92ca','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-25 18:35:44.859','2025-02-25 18:35:44.859') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.497125ms"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.875+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('aebf2c79-3519-4d6e-b967-7cd008472e79','dsfds','fsdfd','videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','2025-02-25 18:35:17.507','2025-02-25 18:35:44.823') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"10.963ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-25T18:35:44.883+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"18.96375ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-25 18:35:44.864',\"status\"='completed',\"updated_at\"='2025-02-25 18:35:44.864',\"video_id\"='3632bb3f-4ad0-4f07-a3d2-ab964aa50cae' WHERE \"id\" = '3822c098-119c-46cc-8b48-fda7ef57d66e'","source":"gorm"}
{"L":"INFO","T":"2025-02-25T18:35:44.895+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/ca10dce6-bd47-4d44-984f-85d630c4797e"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.918+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.408584ms","rows_affected":3,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('37a9ab5b-9085-4741-993e-098d7caa92ca','a91f8115-4730-4113-b571-dd63180b8816','fd2c83e3-d782-4cae-8b38-557f78c6929f')"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.918+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"14.857708ms","rows_affected":3,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.27475ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae'"}
{"L":"DEBUG","T":"2025-02-25T18:35:44.928+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.692666ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '3632bb3f-4ad0-4f07-a3d2-ab964aa50cae' ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-25T18:35:44.928+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"3632bb3f-4ad0-4f07-a3d2-ab964aa50cae","file_path":"videos/3632bb3f-4ad0-4f07-a3d2-ab964aa50cae/original.mp4"}
{"L":"INFO","T":"2025-02-25T18:35:44.928+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":27457,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-25T19:14:19.935+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-25T19:14:19.936+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-25T19:14:19.949+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-27T14:16:40.180+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-27T14:16:40.203+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"4.802083ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-27T14:16:40.207+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-27T14:16:40.207+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-27T14:16:40.207+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-27T14:16:40.227+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"18.481458ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T14:16:40.297+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"67.680083ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-27T14:16:40.306+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.156ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-27T14:16:40.306+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-27T14:16:40.306+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-27T14:16:40.350+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"42.83225ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-27T14:16:40.350+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-27T14:16:40.360+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-27T14:16:40.360+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-27T14:16:40.362+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-27T14:19:24.694+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T14:19:24.723+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1","source":"gorm","duration":"27.784042ms","rows_affected":1}
{"L":"INFO","T":"2025-02-27T14:19:24.816+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T14:19:24.816+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T14:19:24.816+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T14:19:24.816+0300"}
{"L":"DEBUG","T":"2025-02-27T14:19:24.825+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNTk5NjQsIm5iZiI6MTc0MDY1NTE2NCwiaWF0IjoxNzQwNjU1MTY0LCJqdGkiOiI5ZGNmNGVmMy03MDMwLTRlZmEtODkwOS04MjY2Zjg2MGI3MWUifQ.gBLZ7tiFU21WmdXEOcR4sC5myw6-vwvPFrryGgFmXeg'","source":"gorm","duration":"9.562083ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-27T14:19:24.841+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"15.488ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNTk5NjQsIm5iZiI6MTc0MDY1NTE2NCwiaWF0IjoxNzQwNjU1MTY0LCJqdGkiOiI5ZGNmNGVmMy03MDMwLTRlZmEtODkwOS04MjY2Zjg2MGI3MWUifQ.gBLZ7tiFU21WmdXEOcR4sC5myw6-vwvPFrryGgFmXeg','2025-03-06 14:19:24.816','2025-02-27 14:19:24.825',NULL) RETURNING \"id\"","source":"gorm"}
{"L":"INFO","T":"2025-02-27T14:19:24.841+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T14:19:24.862+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.617417ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 14:19:24.841',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 14:19:24.842' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T14:19:24.862+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T14:19:24.862+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":168,"client_ip":"::1","method":"POST","path":"/auth/login","status":200}
{"L":"DEBUG","T":"2025-02-27T14:19:55.211+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.175291ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('464353a1-5980-48f2-b43a-7c228de9ec9d','dsfds1','fsdfd1','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4','','',10064431,'3db64ea0-dcf2-4545-82d9-13312dcbbf13','2025-02-27 14:19:55.195','2025-02-27 14:19:55.195') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:19:55.225+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.336083ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('3db64ea0-dcf2-4545-82d9-13312dcbbf13','2025-02-27 14:19:55.195',NULL,'pending','2025-02-27 14:19:55.195','2025-02-27 14:19:55.195') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:19:55.257+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.565875ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('464353a1-5980-48f2-b43a-7c228de9ec9d','dsfds1','fsdfd1','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4','','',10064431,'3db64ea0-dcf2-4545-82d9-13312dcbbf13','2025-02-27 14:19:55.195','2025-02-27 14:19:55.195') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:19:55.276+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='3db64ea0-dcf2-4545-82d9-13312dcbbf13',\"updated_at\"='2025-02-27 14:19:55.257' WHERE \"id\" = '1f05c11d-abaa-46dd-9331-9bce669ad061'","source":"gorm","duration":"38.362458ms","rows_affected":1}
{"L":"INFO","T":"2025-02-27T14:19:55.277+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13"}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"s3/service.go:68","M":"Starting S3 upload","secret_key_set":true,"video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"original","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"original"}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length_mb":9.598189353942871,"content_length":10064431}
{"L":"INFO","T":"2025-02-27T14:19:55.459+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:05.227+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4","etag":"\"f484c8cdc45d0f1b9d1b0e2ded036b48\"","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"original"}
{"L":"INFO","T":"2025-02-27T14:20:05.229+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T14:20:05.832+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow","gateway_url":"http://localhost:8080QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow"}
{"L":"INFO","T":"2025-02-27T14:20:05.832+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","output_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4","resolution":"720p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","ffprobe_path":"/opt/homebrew/bin/ffprobe","video_codec":"libx264","preset":"fast","audio_codec":"copy","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:05.833+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"INFO","T":"2025-02-27T14:20:05.833+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:05.972+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264","bitrate":16073835}
{"L":"INFO","T":"2025-02-27T14:20:05.972+0300","C":"ffmpeg/service.go:188","M":"Skipping upscaling","target_width":1280,"target_height":720,"resolution":"720p","action":"adjusting dimensions to avoid upscaling","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-27T14:20:05.972+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","audio_codec":"copy","preset":"fast","input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","dimensions":"1280x720","video_codec":"libx264","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4","resolution_name":"720p","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-27T14:20:05.972+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4 -c:v libx264 -c:a copy -s 1280x720 -preset fast -y /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","-c:v","libx264","-c:a","copy","-s","1280x720","-preset","fast","-y","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4"]}
{"L":"INFO","T":"2025-02-27T14:20:05.973+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.028+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.028+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.040+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.040+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.044+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.044+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.074+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14e607a00] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x14e607a00] profile High, level 3.1, 4:2:0, 8-bit\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.074+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8684,"output":"[libx264 @ 0x14e607a00] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n"}
{"L":"INFO","T":"2025-02-27T14:20:06.075+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:06.549+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.06x    \r","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:07.053+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8684,"output":"frame=   61 fps= 60 q=29.0 size=    2560KiB time=00:00:01.96 bitrate=10663.7kbits/s speed=1.95x    \r"}
{"L":"INFO","T":"2025-02-27T14:20:07.556+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8684,"output":"frame=  109 fps= 72 q=29.0 size=    4608KiB time=00:00:03.56 bitrate=10583.9kbits/s speed=2.36x    \r"}
{"L":"INFO","T":"2025-02-27T14:20:07.931+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x600003aa83c0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 79 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.61x    \n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:07.931+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14e607a00] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x14e607a00] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x14e607a00] frame B:111   Avg QP:29.43  size: 29595\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:07.931+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14e607a00] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x14e607a00] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x14e607a00] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x14e607a00] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x14e607a00] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x14e607a00] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x14e607a00] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x14e607a00] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x14e607a00] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x14e607a00] i8c dc,h,v,p: 46% 26% 17% 12%\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:07.931+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14e607a00] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x14e607a00] ref P L0: 81.6% 18.4%\n[libx264 @ 0x14e607a00] ref B L0: 90.7%  9.3%\n[libx264 @ 0x14e607a00] ref B L1: 97.9%  2.1%\n[libx264 @ 0x14e607a00] kb/s:9397.04\n","pid":8684}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/720p.mp4","resolution_name":"720p","dimensions":"1280x720","file_size":5876569,"output_exists":true}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"s3/service.go:68","M":"Starting S3 upload","secret_key_set":true,"video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"720p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13"}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":5876569,"content_length_mb":5.60433292388916}
{"L":"INFO","T":"2025-02-27T14:20:07.944+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:13.070+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","etag":"\"b3d91740883bf6f005494b3948382cb8\"","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:13.072+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T14:20:13.493+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj","gateway_url":"http://localhost:8080QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj"}
{"L":"INFO","T":"2025-02-27T14:20:13.581+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","ffprobe_path":"/opt/homebrew/bin/ffprobe","video_codec":"libx264","preset":"fast","resolution":"480p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","audio_codec":"copy","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:13.581+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"INFO","T":"2025-02-27T14:20:13.581+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:13.633+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264","bitrate":16073835}
{"L":"INFO","T":"2025-02-27T14:20:13.633+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4","original_width":854,"audio_codec":"copy","preset":"fast","resolution_name":"480p","dimensions":"854x480","original_height":480,"video_codec":"libx264"}
{"L":"INFO","T":"2025-02-27T14:20:13.633+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","-c:v","libx264","-c:a","copy","-s","854x480","-preset","fast","-y","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4"],"command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4 -c:v libx264 -c:a copy -s 854x480 -preset fast -y /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:13.634+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.672+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.672+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.682+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.682+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"        vendor_id       : [0][0][0][0]\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.685+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\nPress [q] to stop, [?] for help\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.709+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13e0058b0] using cpu capabilities: ARMv8 NEON\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.710+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13e0058b0] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x13e0058b0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), y","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:13.710+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"uv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:14.190+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   54 fps=0.0 q=29.0 size=    1280KiB time=00:00:01.73 bitrate=6049.7kbits/s speed=3.43x    \r","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:14.581+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8739,"output":"[out#0/mp4 @ 0x600001c08000] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=0.0 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed= 5.5x    \n"}
{"L":"INFO","T":"2025-02-27T14:20:14.582+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13e0058b0] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x13e0058b0] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x13e0058b0] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x13e0058b0] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x13e0058b0] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x13e0058b0] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x13e0058b0] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n","pid":8739}
{"L":"INFO","T":"2025-02-27T14:20:14.582+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13e0058b0] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x13e0058b0] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x13e0058b0] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x13e0058b0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x13e0058b0] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x13e0058b0] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x13e0058b0] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13e0058b0] ref P L0: 87.8% 12.2%\n[libx264 @ 0x13e0058b0] ref B L0: 91.9%  8.1%\n[libx264 @ 0x13e0058b0] ref B L1: 98.6%  1.4%\n[libx264 @ 0x13e0058b0] kb/s:5948.23\n","pid":8739}
{"L":"ERROR","T":"2025-02-27T14:20:14.589+0300","C":"ffmpeg/service.go:286","M":"Error reading FFmpeg stderr","error":"read |0: file already closed","S":"github.com/consensuslabs/pavilion-network/backend/internal/video/ffmpeg.(*Service).Transcode.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/ffmpeg/service.go:286"}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","resolution_name":"480p","dimensions":"854x480","file_size":3721042,"output_exists":true,"input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/480p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"s3/service.go:68","M":"Starting S3 upload","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"480p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true,"secret_key_set":true}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":3721042,"content_length_mb":3.5486621856689453}
{"L":"INFO","T":"2025-02-27T14:20:14.589+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:19.716+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4","etag":"\"e2d0c77035e1ed11d2ac2c79bfe3a7ba\"","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"480p","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T14:20:19.716+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T14:20:20.084+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW","gateway_url":"http://localhost:8080QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW"}
{"L":"INFO","T":"2025-02-27T14:20:20.175+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4","ffprobe_path":"/opt/homebrew/bin/ffprobe","video_codec":"libx264","audio_codec":"copy","preset":"fast","resolution":"360p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"INFO","T":"2025-02-27T14:20:20.175+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"INFO","T":"2025-02-27T14:20:20.175+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:20.228+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2"}
{"L":"INFO","T":"2025-02-27T14:20:20.228+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","audio_codec":"copy","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4","resolution_name":"360p","dimensions":"640x360","original_width":854,"original_height":480,"video_codec":"libx264","preset":"fast"}
{"L":"INFO","T":"2025-02-27T14:20:20.228+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4 -c:v libx264 -c:a copy -s 640x360 -preset fast -y /tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","-c:v","libx264","-c:a","copy","-s","640x360","-preset","fast","-y","/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4"]}
{"L":"INFO","T":"2025-02-27T14:20:20.229+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.269+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.269+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8786,"output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-27T14:20:20.280+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8786,"output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n"}
{"L":"INFO","T":"2025-02-27T14:20:20.281+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.281+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.301+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x1476076d0] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x1476076d0] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x1476076d0] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.301+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.785+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   90 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.93 bitrate=3574.8kbits/s speed=5.82x    \r","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.907+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8786,"output":"[out#0/mp4 @ 0x6000031b4000] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=7.88x    \n"}
{"L":"INFO","T":"2025-02-27T14:20:20.907+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x1476076d0] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x1476076d0] frame P:38    Avg QP:28.18  size: 27668\n","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.907+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x1476076d0] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x1476076d0] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x1476076d0] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x1476076d0] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x1476076d0] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x1476076d0] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x1476076d0] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x1476076d0] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x1476076d0] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x1476076d0] ","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.907+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x1476076d0] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x1476076d0] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x1476076d0] ref P L0: 84.8% 15.2%\n[libx264 @ 0x1476076d0] ref B L0: 91.1%  8.9%\n[libx264 @ 0x1476076d0] ref B L1: 97.0%  3.0%\n[libx264 @ 0x1476076d0] kb/s:3420.83\n","pid":8786}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","dimensions":"640x360","file_size":2141391,"output_exists":true,"input":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/original.mp4","output":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252/360p.mp4","resolution_name":"360p"}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"s3/service.go:68","M":"Starting S3 upload","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"360p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true,"secret_key_set":true}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"360p"}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":2141391,"content_length_mb":2.042189598083496}
{"L":"INFO","T":"2025-02-27T14:20:20.912+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:23.023+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4","etag":"\"091494dab7a85643f5409168977618b8\"","full_path":"s3://octopus-doganbros-storage/videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:23.024+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T14:20:23.263+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW","gateway_url":"http://localhost:8080QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW"}
{"L":"INFO","T":"2025-02-27T14:20:23.344+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":0,"video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3}
{"L":"DEBUG","T":"2025-02-27T14:20:23.358+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"11.216792ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-27 14:20:23.347' WHERE \"id\" = '3db64ea0-dcf2-4545-82d9-13312dcbbf13'"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.740417ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3db64ea0-dcf2-4545-82d9-13312dcbbf13','mp4','2025-02-27 14:20:05.832','2025-02-27 14:20:05.832') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:20:23.374+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.552209ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('ff583085-0083-4b2c-9414-18b6e6a664c3','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-27 14:20:23.367','2025-02-27 14:20:23.367') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:20:23.379+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.631833ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3db64ea0-dcf2-4545-82d9-13312dcbbf13','mp4','2025-02-27 14:20:13.581','2025-02-27 14:20:13.581') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:20:23.383+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('dcbd860f-83a7-4744-a181-5f3db55228ae','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-27 14:20:23.379','2025-02-27 14:20:23.379') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"3.772375ms"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.387+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.144125ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3db64ea0-dcf2-4545-82d9-13312dcbbf13','mp4','2025-02-27 14:20:20.175','2025-02-27 14:20:20.175') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:20:23.393+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.449625ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-27 14:20:23.387','2025-02-27 14:20:23.387') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T14:20:23.402+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('464353a1-5980-48f2-b43a-7c228de9ec9d','dsfds1','fsdfd1','videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'3db64ea0-dcf2-4545-82d9-13312dcbbf13','2025-02-27 14:19:55.195','2025-02-27 14:20:23.347') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.596ms"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.413+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-27 14:20:23.393',\"status\"='completed',\"updated_at\"='2025-02-27 14:20:23.393',\"video_id\"='3db64ea0-dcf2-4545-82d9-13312dcbbf13' WHERE \"id\" = '1f05c11d-abaa-46dd-9331-9bce669ad061'","source":"gorm","duration":"20.418042ms"}
{"L":"INFO","T":"2025-02-27T14:20:23.423+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/236eba9c-7c0a-4d75-9fc7-a6a06aff2252"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.448+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','dcbd860f-83a7-4744-a181-5f3db55228ae','ff583085-0083-4b2c-9414-18b6e6a664c3')","source":"gorm","duration":"7.139334ms","rows_affected":3}
{"L":"DEBUG","T":"2025-02-27T14:20:23.448+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"15.914ms","rows_affected":3,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '3db64ea0-dcf2-4545-82d9-13312dcbbf13'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.457+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '3db64ea0-dcf2-4545-82d9-13312dcbbf13'","source":"gorm","duration":"9.603167ms"}
{"L":"DEBUG","T":"2025-02-27T14:20:23.457+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"33.8915ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '3db64ea0-dcf2-4545-82d9-13312dcbbf13' ORDER BY \"videos\".\"id\" LIMIT 1","source":"gorm"}
{"L":"INFO","T":"2025-02-27T14:20:23.457+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","request_id":"","video_id":"3db64ea0-dcf2-4545-82d9-13312dcbbf13","file_path":"videos/3db64ea0-dcf2-4545-82d9-13312dcbbf13/original.mp4"}
{"L":"INFO","T":"2025-02-27T14:20:23.457+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":200,"latency_ms":28296,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:35:26.616+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-27T15:35:26.743+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"7.001333ms","rows_affected":0}
{"L":"INFO","T":"2025-02-27T15:35:26.750+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-27T15:35:26.750+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-27T15:35:26.750+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-27T15:35:26.769+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.236709ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-27T15:35:26.832+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"61.091041ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-27T15:35:26.838+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.278625ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-27T15:35:26.839+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-27T15:35:26.839+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-27T15:35:26.887+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"48.493ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-27T15:35:26.887+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-27T15:35:26.894+0300","C":"backend/app.go:133","M":"S3 Configuration in App","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-27T15:35:26.894+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-27T15:35:26.895+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-27T15:35:33.065+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/index.html","status":200,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T15:35:33.133+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui.css","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:35:33.133+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui-standalone-preset.js","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:35:33.135+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui-bundle.js","status":200,"latency_ms":2,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:35:33.292+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/doc.json","status":200}
{"L":"INFO","T":"2025-02-27T15:35:33.311+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/favicon-32x32.png","status":200}
{"L":"INFO","T":"2025-02-27T15:35:46.337+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T15:35:46.369+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.044709ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T15:35:46.462+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T15:35:46.462+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T15:35:46.462+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T15:35:46.462+0300"}
{"L":"DEBUG","T":"2025-02-27T15:35:46.472+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.493208ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ1NDYsIm5iZiI6MTc0MDY1OTc0NiwiaWF0IjoxNzQwNjU5NzQ2LCJqdGkiOiI1NWU2MzNhNC1iMDVkLTRjYWItYmU4ZC03YWVjOTBlZGM2OWEifQ.QJvEvJVF6ghZDnZnHKm1hlPMDKrlQiWD7IpvKFEhhlQ'"}
{"L":"DEBUG","T":"2025-02-27T15:35:46.489+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.167542ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ1NDYsIm5iZiI6MTc0MDY1OTc0NiwiaWF0IjoxNzQwNjU5NzQ2LCJqdGkiOiI1NWU2MzNhNC1iMDVkLTRjYWItYmU4ZC03YWVjOTBlZGM2OWEifQ.QJvEvJVF6ghZDnZnHKm1hlPMDKrlQiWD7IpvKFEhhlQ','2025-03-06 15:35:46.462','2025-02-27 15:35:46.472',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T15:35:46.489+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T15:35:46.507+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.750792ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 15:35:46.489',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 15:35:46.49' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T15:35:46.507+0300","C":"auth/service.go:110","M":"Login successful","email":"user@example.com","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T15:35:46.507+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/auth/login","status":200,"latency_ms":170,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:36:49.642+0300","C":"http/middleware.go:44","M":"HTTP Request","status":401,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/video/list"}
{"L":"INFO","T":"2025-02-27T15:37:02.237+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T15:37:02.255+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.865167ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T15:37:02.346+0300","C":"auth/service.go:67","M":"Generating tokens","email":"user@example.com","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T15:37:02.347+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T15:37:02.347+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T15:37:02.347+0300"}
{"L":"DEBUG","T":"2025-02-27T15:37:02.354+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.076417ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ2MjIsIm5iZiI6MTc0MDY1OTgyMiwiaWF0IjoxNzQwNjU5ODIyLCJqdGkiOiIxOTdhNGZmYi1jYTkxLTQ2MzAtOTkxNS0zMDllYzIwZTZkZGEifQ.giN6ezoEZI_1WnJY41FBvebN4RNilYjJWezS1sUsN9I'"}
{"L":"DEBUG","T":"2025-02-27T15:37:02.369+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.986958ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ2MjIsIm5iZiI6MTc0MDY1OTgyMiwiaWF0IjoxNzQwNjU5ODIyLCJqdGkiOiIxOTdhNGZmYi1jYTkxLTQ2MzAtOTkxNS0zMDllYzIwZTZkZGEifQ.giN6ezoEZI_1WnJY41FBvebN4RNilYjJWezS1sUsN9I','2025-03-06 15:37:02.347','2025-02-27 15:37:02.354',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T15:37:02.369+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T15:37:02.386+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.347584ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 15:37:02.369',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 15:37:02.37' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T15:37:02.386+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T15:37:02.386+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"POST","path":"/auth/login","status":200,"latency_ms":149}
{"L":"INFO","T":"2025-02-27T15:37:32.177+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/video/list","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:37:51.439+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/video/list","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:37:52.854+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/video/list","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:39:19.749+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/index.html","status":200}
{"L":"INFO","T":"2025-02-27T15:39:19.765+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/swagger/swagger-ui-standalone-preset.js","status":304,"latency_ms":0,"client_ip":"::1","method":"GET"}
{"L":"INFO","T":"2025-02-27T15:39:19.765+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui.css","status":304,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:39:19.765+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui-bundle.js","status":304,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:39:19.866+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/doc.json","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:39:19.871+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/favicon-32x32.png","status":304,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T15:39:53.478+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/video/upload","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:40:18.614+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T15:40:18.638+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.796125ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T15:40:18.719+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T15:40:18.719+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T15:40:18.719+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T15:40:18.719+0300"}
{"L":"DEBUG","T":"2025-02-27T15:40:18.730+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ4MTgsIm5iZiI6MTc0MDY2MDAxOCwiaWF0IjoxNzQwNjYwMDE4LCJqdGkiOiI2NjM4NWVkYS02MDNkLTQyY2MtOGZlMi0wOGQxYjliZjE4MzkifQ.kLog-wGA2Ffnmwj3woqOYeH8i3cmW8hRnlmyJuMwQ0Q'","source":"gorm","duration":"10.962958ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-27T15:40:18.745+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.208875ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNjQ4MTgsIm5iZiI6MTc0MDY2MDAxOCwiaWF0IjoxNzQwNjYwMDE4LCJqdGkiOiI2NjM4NWVkYS02MDNkLTQyY2MtOGZlMi0wOGQxYjliZjE4MzkifQ.kLog-wGA2Ffnmwj3woqOYeH8i3cmW8hRnlmyJuMwQ0Q','2025-03-06 15:40:18.719','2025-02-27 15:40:18.73',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T15:40:18.745+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T15:40:18.764+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.706541ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 15:40:18.745',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 15:40:18.747' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T15:40:18.764+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T15:40:18.764+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/auth/login","status":200,"latency_ms":150,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:41:22.176+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/video/list","status":401,"latency_ms":0}
{"L":"DEBUG","T":"2025-02-27T15:42:06.448+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.776333ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('795774a9-9273-43e2-ab8f-763ad81cb048','tiigsd','dgdfg','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4','','',10064431,'3e482c75-cf3d-4497-a023-9d9956a82c52','2025-02-27 15:42:06.43','2025-02-27 15:42:06.43') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T15:42:06.462+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.116291ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('3e482c75-cf3d-4497-a023-9d9956a82c52','2025-02-27 15:42:06.43',NULL,'pending','2025-02-27 15:42:06.43','2025-02-27 15:42:06.43') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T15:42:06.487+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"15.286291ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('795774a9-9273-43e2-ab8f-763ad81cb048','tiigsd','dgdfg','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4','','',10064431,'3e482c75-cf3d-4497-a023-9d9956a82c52','2025-02-27 15:42:06.43','2025-02-27 15:42:06.43') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T15:42:06.521+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='3e482c75-cf3d-4497-a023-9d9956a82c52',\"updated_at\"='2025-02-27 15:42:06.487' WHERE \"id\" = '363f2562-7ef0-406a-9e2b-a6013785d9c8'","source":"gorm","duration":"50.429709ms"}
{"L":"INFO","T":"2025-02-27T15:42:06.522+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c"}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","duration":5,"width":854,"height":480}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"s3/service.go:68","M":"Starting S3 upload","region":"eu-central-1","root_directory":"","access_key_set":true,"secret_key_set":true,"video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":10064431,"content_length_mb":9.598189353942871}
{"L":"INFO","T":"2025-02-27T15:42:06.701+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:16.409+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4","etag":"\"f484c8cdc45d0f1b9d1b0e2ded036b48\"","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"original"}
{"L":"INFO","T":"2025-02-27T15:42:16.409+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T15:42:17.007+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow","gateway_url":"http://localhost:8080QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow"}
{"L":"INFO","T":"2025-02-27T15:42:17.007+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","output_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4","resolution":"720p","preset":"fast","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","ffprobe_path":"/opt/homebrew/bin/ffprobe","video_codec":"libx264","audio_codec":"copy"}
{"L":"INFO","T":"2025-02-27T15:42:17.007+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c"}
{"L":"INFO","T":"2025-02-27T15:42:17.007+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:17.154+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","bitrate":16073835,"duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264"}
{"L":"INFO","T":"2025-02-27T15:42:17.154+0300","C":"ffmpeg/service.go:188","M":"Skipping upscaling","target_height":720,"resolution":"720p","action":"adjusting dimensions to avoid upscaling","original_width":854,"original_height":480,"target_width":1280}
{"L":"INFO","T":"2025-02-27T15:42:17.154+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4","resolution_name":"720p","original_height":480,"video_codec":"libx264","audio_codec":"copy","preset":"fast","input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","dimensions":"1280x720","original_width":854}
{"L":"INFO","T":"2025-02-27T15:42:17.154+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4 -c:v libx264 -c:a copy -s 1280x720 -preset fast -y /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","-c:v","libx264","-c:a","copy","-s","1280x720","-preset","fast","-y","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4"]}
{"L":"INFO","T":"2025-02-27T15:42:17.155+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.197+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.197+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":49389,"output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n"}
{"L":"INFO","T":"2025-02-27T15:42:17.208+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.215+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.215+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.238+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] using cpu capabilities: ARMv8 NEON\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.239+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] profile High, level 3.1, 4:2:0, 8-bit\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.239+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.239+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:17.726+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   18 fps=0.0 q=29.0 size=     512KiB time=00:00:00.53 bitrate=7865.0kbits/s speed=1.06x    \r","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:18.221+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   55 fps= 55 q=29.0 size=    2304KiB time=00:00:01.76 bitrate=10683.8kbits/s speed=1.76x    \r","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:18.723+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   98 fps= 65 q=29.0 size=    4096KiB time=00:00:03.20 bitrate=10485.9kbits/s speed=2.12x    \r","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.150+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13d60fbc0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 77 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.55x    \n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.151+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x13d610990] frame P:38    Avg QP:27.15  size: 65044\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.151+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] frame B:111   Avg QP:29.43  size: 29595\n[libx264 @ 0x13d610990] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x13d610990] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x13d610990] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x13d610990] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x13d610990] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x13d610990] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x13d610990] ","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.151+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x13d610990] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n[libx264 @ 0x13d610990] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x13d610990] i8c dc,h,v,p: 46% 26% 17% 12%\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.151+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13d610990] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x13d610990] ref P L0: 81.6% 18.4%\n[libx264 @ 0x13d610990] ref B L0: 90.7%  9.3%\n[libx264 @ 0x13d610990] ref B L1: 97.9%  2.1%\n[libx264 @ 0x13d610990] ","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.151+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"kb/s:9397.04\n","pid":49389}
{"L":"INFO","T":"2025-02-27T15:42:19.165+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/720p.mp4","resolution_name":"720p","dimensions":"1280x720","file_size":5876569,"output_exists":true}
{"L":"INFO","T":"2025-02-27T15:42:19.166+0300","C":"s3/service.go:68","M":"Starting S3 upload","access_key_set":true,"secret_key_set":true,"video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"720p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":""}
{"L":"INFO","T":"2025-02-27T15:42:19.166+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T15:42:19.166+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:19.166+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":5876569,"content_length_mb":5.60433292388916}
{"L":"INFO","T":"2025-02-27T15:42:19.166+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:20.428+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/video/list","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T15:42:21.291+0300","C":"http/middleware.go:44","M":"HTTP Request","status":401,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/video/list"}
{"L":"INFO","T":"2025-02-27T15:42:26.222+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4","etag":"\"b3d91740883bf6f005494b3948382cb8\"","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"720p"}
{"L":"INFO","T":"2025-02-27T15:42:26.223+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T15:42:26.762+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj","gateway_url":"http://localhost:8080QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj"}
{"L":"INFO","T":"2025-02-27T15:42:26.836+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","ffprobe_path":"/opt/homebrew/bin/ffprobe","preset":"fast","output_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4","video_codec":"libx264","audio_codec":"copy","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","resolution":"480p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg"}
{"L":"INFO","T":"2025-02-27T15:42:26.836+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c"}
{"L":"INFO","T":"2025-02-27T15:42:26.836+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:26.891+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5}
{"L":"INFO","T":"2025-02-27T15:42:26.891+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4","dimensions":"854x480","audio_codec":"copy","resolution_name":"480p","original_width":854,"original_height":480,"video_codec":"libx264","preset":"fast","input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:26.891+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4 -c:v libx264 -c:a copy -s 854x480 -preset fast -y /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","-c:v","libx264","-c:a","copy","-s","854x480","-preset","fast","-y","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4"]}
{"L":"INFO","T":"2025-02-27T15:42:26.892+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.933+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":49473,"output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-"}
{"L":"INFO","T":"2025-02-27T15:42:26.934+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.944+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.947+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.947+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.975+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x129e05c90] using cpu capabilities: ARMv8 NEON\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.977+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x129e05c90] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x129e05c90] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:26.978+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.453+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   49 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.56 bitrate=5354.7kbits/s speed= 3.1x    \r","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.957+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=  146 fps=145 q=-1.0 size=    3328KiB time=00:00:04.80 bitrate=5679.9kbits/s speed=4.75x    \r","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.967+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x129e04dd0] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=147 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.84x    \n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.967+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x129e05c90] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x129e05c90] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x129e05c90] frame B:111   Avg QP:30.29  size: 18000\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.967+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x129e05c90] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x129e05c90] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x129e05c90] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x129e05c90] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x129e05c90] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x129e05c90] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x129e05c90] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x129e05c90] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x129e05c90] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x129e05c90] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x129e05c90] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x129e05c90] ref P L0: 87.8% 12.2%\n[libx264 @ 0x129e05c90] ref B L0: 91.9%  8.1%\n[libx264 @ 0x129e05c90] ref B L1: 98.6%  1.4%\n[libx264 @","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.967+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":" 0x129e05c90] kb/s:5948.23\n","pid":49473}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","file_size":3721042,"output_exists":true,"input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/480p.mp4","resolution_name":"480p","dimensions":"854x480"}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"s3/service.go:68","M":"Starting S3 upload","root_directory":"","access_key_set":true,"secret_key_set":true,"video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"480p","bucket":"octopus-doganbros-storage","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":3721042,"content_length_mb":3.5486621856689453}
{"L":"INFO","T":"2025-02-27T15:42:27.974+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:31.269+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4","etag":"\"e2d0c77035e1ed11d2ac2c79bfe3a7ba\"","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:31.269+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T15:42:31.646+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW","gateway_url":"http://localhost:8080QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW"}
{"L":"INFO","T":"2025-02-27T15:42:31.722+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","audio_codec":"copy","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","output_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","ffprobe_path":"/opt/homebrew/bin/ffprobe","video_codec":"libx264","preset":"fast","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c","resolution":"360p"}
{"L":"INFO","T":"2025-02-27T15:42:31.722+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c"}
{"L":"INFO","T":"2025-02-27T15:42:31.722+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:31.776+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5}
{"L":"INFO","T":"2025-02-27T15:42:31.776+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","resolution_name":"360p","video_codec":"libx264","audio_codec":"copy","preset":"fast","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4","dimensions":"640x360","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-27T15:42:31.776+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4 -c:v libx264 -c:a copy -s 640x360 -preset fast -y /tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","-c:v","libx264","-c:a","copy","-s","640x360","-preset","fast","-y","/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4"]}
{"L":"INFO","T":"2025-02-27T15:42:31.778+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.930+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.931+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.955+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.955+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.958+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.958+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.988+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14c904970] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x14c904970] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x14c904970] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:31.990+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.463+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   79 fps=0.0 q=29.0 size=    1280KiB time=00:00:02.56 bitrate=4085.5kbits/s speed=5.08x    \r","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.664+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x12be041c0] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.99x    \n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.664+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14c904970] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x14c904970] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x14c904970] frame B:111   Avg QP:30.81  size:  9314\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.664+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14c904970] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x14c904970] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x14c904970] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x14c904970] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x14c904970] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x14c904970] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x14c904970] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x14c904970] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.664+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x14c904970] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x14c904970] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x14c904970] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x14c904970] ref P L0: 84.8% 15.2%\n[libx264 @ 0x14c904970] ref B L0: 91.1%  8.9%\n[libx264 @ 0x14c904970] ref B L1: 97.0%  3.0%\n[libx264 @ 0x14c904970] kb/s:3420.83\n","pid":49510}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","input":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/original.mp4","output":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c/360p.mp4","resolution_name":"360p","dimensions":"640x360","file_size":2141391,"output_exists":true}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"s3/service.go:68","M":"Starting S3 upload","root_directory":"","access_key_set":true,"secret_key_set":true,"video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"360p","bucket":"octopus-doganbros-storage","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"360p","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":2141391,"content_length_mb":2.042189598083496}
{"L":"INFO","T":"2025-02-27T15:42:32.669+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:34.448+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","etag":"\"091494dab7a85643f5409168977618b8\"","full_path":"s3://octopus-doganbros-storage/videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4"}
{"L":"INFO","T":"2025-02-27T15:42:34.448+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T15:42:34.735+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW","gateway_url":"http://localhost:8080QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW"}
{"L":"INFO","T":"2025-02-27T15:42:34.805+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_successful":3,"total_failed":0,"video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[]}
{"L":"DEBUG","T":"2025-02-27T15:42:34.821+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.50125ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-27 15:42:34.808' WHERE \"id\" = '3e482c75-cf3d-4497-a023-9d9956a82c52'"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.831+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.864667ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3e482c75-cf3d-4497-a023-9d9956a82c52','mp4','2025-02-27 15:42:17.007','2025-02-27 15:42:17.007') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T15:42:34.840+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.735709ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-27 15:42:34.831','2025-02-27 15:42:34.831') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T15:42:34.847+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.223792ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3e482c75-cf3d-4497-a023-9d9956a82c52','mp4','2025-02-27 15:42:26.836','2025-02-27 15:42:26.836') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T15:42:34.851+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('dcc24b2e-c205-4062-91fd-a77c581cea6b','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-27 15:42:34.847','2025-02-27 15:42:34.847') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.465416ms"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.856+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('3e482c75-cf3d-4497-a023-9d9956a82c52','mp4','2025-02-27 15:42:31.721','2025-02-27 15:42:31.721') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"4.281041ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-27T15:42:34.862+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('4756d24f-c26f-4ce9-ab48-29bd5016694a','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-27 15:42:34.856','2025-02-27 15:42:34.856') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"5.856875ms"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.877+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('795774a9-9273-43e2-ab8f-763ad81cb048','tiigsd','dgdfg','videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'3e482c75-cf3d-4497-a023-9d9956a82c52','2025-02-27 15:42:06.43','2025-02-27 15:42:34.808') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"15.433333ms"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.890+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"27.691125ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-27 15:42:34.862',\"status\"='completed',\"updated_at\"='2025-02-27 15:42:34.862',\"video_id\"='3e482c75-cf3d-4497-a023-9d9956a82c52' WHERE \"id\" = '363f2562-7ef0-406a-9e2b-a6013785d9c8'"}
{"L":"INFO","T":"2025-02-27T15:42:34.903+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/3fa530e5-ad66-49c5-be5b-367935b70c1c"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.932+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"9.121708ms","rows_affected":3,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','4756d24f-c26f-4ce9-ab48-29bd5016694a','dcc24b2e-c205-4062-91fd-a77c581cea6b')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.932+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":3,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '3e482c75-cf3d-4497-a023-9d9956a82c52'","source":"gorm","duration":"19.9575ms"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.942+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.65625ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '3e482c75-cf3d-4497-a023-9d9956a82c52'"}
{"L":"DEBUG","T":"2025-02-27T15:42:34.942+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"39.471167ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '3e482c75-cf3d-4497-a023-9d9956a82c52' ORDER BY \"videos\".\"id\" LIMIT 1","source":"gorm"}
{"L":"INFO","T":"2025-02-27T15:42:34.942+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","file_path":"videos/3e482c75-cf3d-4497-a023-9d9956a82c52/original.mp4","request_id":"","video_id":"3e482c75-cf3d-4497-a023-9d9956a82c52"}
{"L":"INFO","T":"2025-02-27T15:42:34.942+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":28543,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-27T19:22:25.492+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-27T19:22:25.498+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:22:25.519+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:23:00.498+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-27T19:23:00.547+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"16.642792ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-27T19:23:00.557+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-27T19:23:00.558+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-27T19:23:00.558+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-27T19:23:00.588+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"25.6685ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-27T19:23:00.659+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"67.105292ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-27T19:23:00.670+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm","duration":"10.880417ms","rows_affected":0}
{"L":"INFO","T":"2025-02-27T19:23:00.670+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-27T19:23:00.670+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-27T19:23:00.718+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"47.429125ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-27T19:23:00.718+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-27T19:23:00.725+0300","C":"backend/app.go:133","M":"S3 Configuration in App","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-27T19:23:00.726+0300","C":"s3/service.go:26","M":"S3 Service Configuration","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-27T19:23:00.726+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-27T19:23:13.478+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/video/list","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:23:25.324+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T19:23:25.359+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"35.171833ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T19:23:25.453+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:23:25.453+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T19:23:25.453+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T19:23:25.453+0300"}
{"L":"DEBUG","T":"2025-02-27T19:23:25.468+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.824459ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzgyMDUsIm5iZiI6MTc0MDY3MzQwNSwiaWF0IjoxNzQwNjczNDA1LCJqdGkiOiIwMDgyNDNiMi04MTg1LTRhNmQtOGMwYy0xZjVmMzA1MWE3NTcifQ.7WI-vrO8STOy7KmCEUoTzw9Skqbu9iODvVKOdTuOSLw'"}
{"L":"DEBUG","T":"2025-02-27T19:23:25.491+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"22.910916ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzgyMDUsIm5iZiI6MTc0MDY3MzQwNSwiaWF0IjoxNzQwNjczNDA1LCJqdGkiOiIwMDgyNDNiMi04MTg1LTRhNmQtOGMwYy0xZjVmMzA1MWE3NTcifQ.7WI-vrO8STOy7KmCEUoTzw9Skqbu9iODvVKOdTuOSLw','2025-03-06 19:23:25.453','2025-02-27 19:23:25.468',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T19:23:25.491+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T19:23:25.516+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"24.684375ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 19:23:25.491',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 19:23:25.493' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T19:23:25.516+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:23:25.516+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":192,"client_ip":"::1","method":"POST","path":"/auth/login"}
{"L":"INFO","T":"2025-02-27T19:23:27.834+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/index.html"}
{"L":"INFO","T":"2025-02-27T19:23:27.862+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui-standalone-preset.js"}
{"L":"INFO","T":"2025-02-27T19:23:27.863+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/swagger-ui.css","status":200,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T19:23:27.867+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":5,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui-bundle.js","status":200}
{"L":"INFO","T":"2025-02-27T19:23:27.959+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/doc.json","status":200,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T19:23:27.968+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/favicon-32x32.png","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:23:36.765+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T19:23:36.784+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.933292ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T19:23:36.880+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:23:36.880+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T19:23:36.880+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T19:23:36.880+0300"}
{"L":"DEBUG","T":"2025-02-27T19:23:36.893+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzgyMTYsIm5iZiI6MTc0MDY3MzQxNiwiaWF0IjoxNzQwNjczNDE2LCJqdGkiOiIxZDg0NmM3Zi03ZDkwLTQ5ZmYtYTVjOS02NWQ2MjRjZTdhMjcifQ.JMYwppN9V2o0nXUjqmCBHSUBSzgi-RkdQCNFL_LKSak'","source":"gorm","duration":"13.128875ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-27T19:23:36.908+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.820125ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzgyMTYsIm5iZiI6MTc0MDY3MzQxNiwiaWF0IjoxNzQwNjczNDE2LCJqdGkiOiIxZDg0NmM3Zi03ZDkwLTQ5ZmYtYTVjOS02NWQ2MjRjZTdhMjcifQ.JMYwppN9V2o0nXUjqmCBHSUBSzgi-RkdQCNFL_LKSak','2025-03-06 19:23:36.88','2025-02-27 19:23:36.893',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T19:23:36.908+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T19:23:36.924+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 19:23:36.908',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 19:23:36.91' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm","duration":"15.61475ms","rows_affected":1}
{"L":"INFO","T":"2025-02-27T19:23:36.924+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:23:36.924+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/auth/login","status":200,"latency_ms":159,"client_ip":"::1","method":"POST"}
{"L":"DEBUG","T":"2025-02-27T19:24:59.841+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.385ms","rows_affected":11,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-27T19:24:59.841+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"49.644542ms","rows_affected":11,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','8909233f-2ee5-4e7b-bf9e-f170df3178a5')"}
{"L":"DEBUG","T":"2025-02-27T19:24:59.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"17.680167ms","rows_affected":10,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','8909233f-2ee5-4e7b-bf9e-f170df3178a5')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T19:24:59.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"videos\" LIMIT 10","source":"gorm","duration":"117.589042ms","rows_affected":10}
{"L":"INFO","T":"2025-02-27T19:24:59.860+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","page":1,"limit":10,"request_id":"","count":10}
{"L":"INFO","T":"2025-02-27T19:24:59.860+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/videos","status":200,"latency_ms":118}
{"L":"DEBUG","T":"2025-02-27T19:27:01.531+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"16.496833ms","rows_affected":1,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('255a6dfc-62a4-4e15-ae74-3c54ce1ae2c3','asc','asds','videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4','','',10064431,'720bc366-2dd8-4306-9869-564fc99d3224','2025-02-27 19:27:01.501','2025-02-27 19:27:01.501') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:01.545+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.975583ms","rows_affected":1,"sql":"INSERT INTO \"video_uploads\" (\"video_id\",\"start_time\",\"end_time\",\"status\",\"created_at\",\"updated_at\") VALUES ('720bc366-2dd8-4306-9869-564fc99d3224','2025-02-27 19:27:01.501',NULL,'pending','2025-02-27 19:27:01.501','2025-02-27 19:27:01.501') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:01.580+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"24.767875ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('255a6dfc-62a4-4e15-ae74-3c54ce1ae2c3','asc','asds','videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4','','',10064431,'720bc366-2dd8-4306-9869-564fc99d3224','2025-02-27 19:27:01.501','2025-02-27 19:27:01.501') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:01.604+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"status\"='uploading',\"video_id\"='720bc366-2dd8-4306-9869-564fc99d3224',\"updated_at\"='2025-02-27 19:27:01.58' WHERE \"id\" = '48e48691-08ab-4aae-8afa-af53fb1e36c5'","source":"gorm","duration":"49.56575ms"}
{"L":"INFO","T":"2025-02-27T19:27:01.604+0300","C":"tempfile/manager.go:61","M":"Created temporary directory","path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"video/logger_adapter.go:17","M":"Video metadata extracted","duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2","video_id":"720bc366-2dd8-4306-9869-564fc99d3224"}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"s3/service.go:68","M":"Starting S3 upload","secret_key_set":true,"video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"original","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"original","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":10064431,"content_length_mb":9.598189353942871}
{"L":"INFO","T":"2025-02-27T19:27:01.804+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:13.502+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4","etag":"\"f484c8cdc45d0f1b9d1b0e2ded036b48\"","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"original","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T19:27:13.502+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","gateway":"http://localhost:8080","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original"}
{"L":"INFO","T":"2025-02-27T19:27:14.100+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","resolution":"original","cid":"QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow","gateway_url":"http://localhost:8080QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow","video_id":"00000000-0000-0000-0000-000000000000"}
{"L":"INFO","T":"2025-02-27T19:27:14.100+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","resolution":"720p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","ffprobe_path":"/opt/homebrew/bin/ffprobe","audio_codec":"copy","preset":"fast","output_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4","video_codec":"libx264","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"INFO","T":"2025-02-27T19:27:14.100+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"INFO","T":"2025-02-27T19:27:14.100+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:14.234+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2"}
{"L":"INFO","T":"2025-02-27T19:27:14.235+0300","C":"ffmpeg/service.go:188","M":"Skipping upscaling","original_height":480,"target_width":1280,"target_height":720,"resolution":"720p","action":"adjusting dimensions to avoid upscaling","original_width":854}
{"L":"INFO","T":"2025-02-27T19:27:14.235+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","audio_codec":"copy","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4","resolution_name":"720p","dimensions":"1280x720","original_width":854,"original_height":480,"video_codec":"libx264","preset":"fast"}
{"L":"INFO","T":"2025-02-27T19:27:14.235+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4 -c:v libx264 -c:a copy -s 1280x720 -preset fast -y /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","-c:v","libx264","-c:a","copy","-s","1280x720","-preset","fast","-y","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4"]}
{"L":"INFO","T":"2025-02-27T19:27:14.236+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.277+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.278+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.288+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.293+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.293+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":8941,"output":"Press [q] to stop, [?] for help\n"}
{"L":"INFO","T":"2025-02-27T19:27:14.322+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x150f22c10] using cpu capabilities: ARMv8 NEON\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.325+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x150f22c10] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x150f22c10] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.325+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Output #0, mp4, to '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4':\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.325+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7.100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 1280x720, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : ","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.325+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:14.800+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   14 fps=0.0 q=29.0 size=     256KiB time=00:00:00.40 bitrate=5243.8kbits/s speed=0.793x    \r","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:15.298+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   49 fps= 49 q=29.0 size=    1792KiB time=00:00:01.56 bitrate=9370.5kbits/s speed=1.56x    \r","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:15.798+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   89 fps= 59 q=29.0 size=    3840KiB time=00:00:02.90 bitrate=10847.5kbits/s speed=1.93x    \r","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.304+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=  131 fps= 65 q=29.0 size=    5120KiB time=00:00:04.30 bitrate=9754.3kbits/s speed=2.14x    \r","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.417+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x150f228f0] video:5736KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.046494%\nframe=  150 fps= 71 q=-1.0 Lsize=    5739KiB time=00:00:04.93 bitrate=9529.6kbits/s speed=2.32x    \n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.417+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x150f22c10] frame I:1     Avg QP:25.51  size:116409\n[libx264 @ 0x150f22c10] frame P:38    Avg QP:27.15  size: 65044\n[libx264 @ 0x150f22c10] frame B:111   Avg QP:29.43  size: 29595\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.417+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x150f22c10] consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x150f22c10] mb I  I16..4:  5.8% 45.7% 48.5%\n[libx264 @ 0x150f22c10] mb P  I16..4:  4.8% 26.6% 12.8%  P16..4: 21.2% 21.6% 11.3%  0.0%  0.0%    skip: 1.9%\n[libx264 @ 0x150f22c10] mb B  I16..4:  3.7%  5.6%  6.6%  B16..8: 29.5% 24.4%  4.2%  direct:10.4%  skip:15.6%  L0:50.9% L1:26.3% BI:22.8%\n[libx264 @ 0x150f22c10] 8x8 transform intra:47.3% inter:36.7%\n[libx264 @ 0x150f22c10] coded y,uvDC,uvAC intra: 66.8% 86.3% 58.7% inter: 34.9% 49.5% 8.9%\n[libx264 @ 0x150f22c10] i16 v,h,dc,p: 28% 35% 18% 18%\n[libx264 @ 0x150f22c10] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 13% 24% 21%  5%  9%  7%  8%  6%  7%\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.417+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x150f22c10] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 16% 19% 17%  4% 15%  9% 10%  5%  6%\n[libx264 @ 0x150f22c10] i8c dc,h,v,p: 46% 26% 17% 12%\n[libx264 @ 0x150f22c10] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x150f22c10] ref P L0: 81.6% 18.4%\n[libx264 @ 0x150f22c10] ref B L0: 90.7%  9.3%\n[libx264 @ 0x150f22c10] ref B L1: 97.9%  2.1%\n[libx264 @ 0x150f22c10] kb/s:9397.04\n","pid":8941}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","file_size":5876569,"output_exists":true,"input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/720p.mp4","resolution_name":"720p","dimensions":"1280x720"}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"s3/service.go:68","M":"Starting S3 upload","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"720p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true,"secret_key_set":true}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":5876569,"content_length_mb":5.60433292388916}
{"L":"INFO","T":"2025-02-27T19:27:16.430+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:22.657+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","resolution":"720p","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4","etag":"\"b3d91740883bf6f005494b3948382cb8\"","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4","video_id":"720bc366-2dd8-4306-9869-564fc99d3224"}
{"L":"INFO","T":"2025-02-27T19:27:22.658+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T19:27:23.263+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj","gateway_url":"http://localhost:8080QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj"}
{"L":"INFO","T":"2025-02-27T19:27:23.392+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","resolution":"480p","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","ffprobe_path":"/opt/homebrew/bin/ffprobe","preset":"fast","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34","video_codec":"libx264","audio_codec":"copy","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:23.392+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"INFO","T":"2025-02-27T19:27:23.392+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:23.461+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","format":"mov,mp4,m4a,3gp,3g2,mj2","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5,"width":854,"height":480}
{"L":"INFO","T":"2025-02-27T19:27:23.462+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","original_height":480,"preset":"fast","resolution_name":"480p","dimensions":"854x480","video_codec":"libx264","audio_codec":"copy","input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4","original_width":854}
{"L":"INFO","T":"2025-02-27T19:27:23.462+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","-c:v","libx264","-c:a","copy","-s","854x480","-preset","fast","-y","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4"],"command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4 -c:v libx264 -c:a copy -s 854x480 -preset fast -y /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:23.463+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.538+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.538+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.552+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.552+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.561+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.561+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.592+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x125604a10] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x125604a10] profile High, level 3.1, 4:2:0, 8-bit\n[libx264 @ 0x125604a10] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=12 lookahead_threads=2 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:23.596+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 854x480, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.066+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=   44 fps=0.0 q=29.0 size=    1024KiB time=00:00:01.40 bitrate=5992.1kbits/s speed=2.77x    \r","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.568+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"frame=  135 fps=134 q=29.0 size=    3328KiB time=00:00:04.46 bitrate=6103.7kbits/s speed=4.44x    \r","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.600+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x126308230] video:3631KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.072801%\nframe=  150 fps=144 q=-1.0 Lsize=    3634KiB time=00:00:04.93 bitrate=6034.1kbits/s speed=4.75x    \n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.600+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x125604a10] frame I:1     Avg QP:26.10  size: 81795\n[libx264 @ 0x125604a10] frame P:38    Avg QP:27.72  size: 43100\n[libx264 @ 0x125604a10] frame B:111   Avg QP:30.29  size: 18000\n[libx264 @ 0x125604a10] consecutive B-frames:  1.3%  0.0%  0.0% 98.7%\n[libx264 @ 0x125604a10] mb I  I16..4:  5.1% 25.9% 69.0%\n[libx264 @ 0x125604a10] mb P  I16..4:  3.6% 14.1% 20.5%  P16..4: 17.5% 24.2% 18.0%  0.0%  0.0%    skip: 2.1%\n[libx264 @ 0x125604a10] mb B  I16..4:  2.2%  3.3%  5.5%  B16..8: 27.4% 31.2%  8.6%  direct: 7.5%  skip:14.4%  L0:50.1% L1:20.6% BI:29.3%\n[libx264 @ 0x125604a10] 8x8 transform intra:33.5% inter:21.9%\n[libx264 @ 0x125604a10] coded y,uvDC,uvAC intra: 72.9% 89.2% 66.1% inter: 38.4% 49.1% 15.5%\n[libx264 @ 0x125604a10] i16 v,h,dc,p: 26% 34% 22% 19%\n[libx264 @ 0x125604a10] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 12% 28% 25%  4%  7%  6%  7%  5%  7%\n[libx264 @ 0x125604a10] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 21% 19%  5% 13%  8%  9%  5%  6%\n[libx264 @ 0x125604a10] i8c dc,h,v,p: 48% 26% 16% 11%\n[libx264 @ 0x125","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.600+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"604a10] Weighted P-Frames: Y:34.2% UV:21.1%\n[libx264 @ 0x125604a10] ref P L0: 87.8% 12.2%\n[libx264 @ 0x125604a10] ref B L0: 91.9%  8.1%\n[libx264 @ 0x125604a10] ref B L1: 98.6%  1.4%\n[libx264 @ 0x125604a10] kb/s:5948.23\n","pid":9052}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/480p.mp4","resolution_name":"480p","dimensions":"854x480","file_size":3721042,"output_exists":true}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"s3/service.go:68","M":"Starting S3 upload","secret_key_set":true,"video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"480p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"480p","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length":3721042,"content_length_mb":3.5486621856689453}
{"L":"INFO","T":"2025-02-27T19:27:24.608+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T19:27:28.825+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4","etag":"\"e2d0c77035e1ed11d2ac2c79bfe3a7ba\"","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"480p","bucket":"octopus-doganbros-storage"}
{"L":"INFO","T":"2025-02-27T19:27:28.826+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T19:27:29.207+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","cid":"QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW","gateway_url":"http://localhost:8080QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original"}
{"L":"INFO","T":"2025-02-27T19:27:29.271+0300","C":"ffmpeg/service.go:115","M":"Beginning transcoding process","output_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4","resolution":"360p","ffprobe_path":"/opt/homebrew/bin/ffprobe","audio_codec":"copy","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","ffmpeg_path":"/opt/homebrew/bin/ffmpeg","video_codec":"libx264","preset":"fast"}
{"L":"INFO","T":"2025-02-27T19:27:29.271+0300","C":"ffmpeg/service.go:142","M":"Output directory created or verified","output_dir":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"INFO","T":"2025-02-27T19:27:29.271+0300","C":"ffmpeg/service.go:147","M":"Getting video metadata","input_path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:29.328+0300","C":"ffmpeg/service.go:158","M":"Video metadata extracted","video_codec":"h264","audio_codec":"h264","bitrate":16073835,"duration":5,"width":854,"height":480,"format":"mov,mp4,m4a,3gp,3g2,mj2"}
{"L":"INFO","T":"2025-02-27T19:27:29.328+0300","C":"ffmpeg/service.go:226","M":"Starting transcoding","preset":"fast","input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4","resolution_name":"360p","dimensions":"640x360","video_codec":"libx264","audio_codec":"copy","original_width":854,"original_height":480}
{"L":"INFO","T":"2025-02-27T19:27:29.328+0300","C":"ffmpeg/service.go:250","M":"Executing FFmpeg command","command":"/opt/homebrew/bin/ffmpeg -i /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4 -c:v libx264 -c:a copy -s 640x360 -preset fast -y /tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4","arguments":["/opt/homebrew/bin/ffmpeg","-i","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","-c:v","libx264","-c:a","copy","-s","640x360","-preset","fast","-y","/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4"]}
{"L":"INFO","T":"2025-02-27T19:27:29.329+0300","C":"ffmpeg/service.go:269","M":"FFmpeg process started","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.368+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"ffmpeg version 7.1 Copyright (c) 2000-2024 the FFmpeg developers\n  built with Apple clang version 13.1.6 (clang-1316.0.21.2.5)\n  configuration: --prefix=/opt/homebrew/Cellar/ffmpeg/7.1_4 --enable-shared --enable-pthreads --enable-version3 --cc=clang --host-cflags= --host-ldflags= --enable-ffplay --enable-gnutls --enable-gpl --enable-libaom --enable-libaribb24 --enable-libbluray --enable-libdav1d --enable-libharfbuzz --enable-libjxl --enable-libmp3lame --enable-libopus --enable-librav1e --enable-librist --enable-librubberband --enable-libsnappy --enable-libsrt --enable-libssh --enable-libsvtav1 --enable-libtesseract --enable-libtheora --enable-libvidstab --enable-libvmaf --enable-libvorbis --enable-libvpx --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxml2 --enable-libxvid --enable-lzma --enable-libfontconfig --enable-libfreetype --enable-frei0r --enable-libass --enable-libopencore-amrnb --enable-libopencore-amrwb --enable-libopenjpeg --enable-libspeex --enable-libsoxr --enable-libzmq --enable-","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.368+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"libzimg --disable-libjack --disable-indev=jack --enable-videotoolbox --enable-audiotoolbox --enable-neon\n  libavutil      59. 39.100 / 59. 39.100\n  libavcodec     61. 19.100 / 61. 19.100\n  libavformat    61.  7.100 / 61.  7.100\n  libavdevice    61.  3.100 / 61.  3.100\n  libavfilter    10.  4.100 / 10.  4.100\n  libswscale      8.  3.100 /  8.  3.100\n  libswresample   5.  3.100 /  5.  3.100\n  libpostproc    58.  3.100 / 58.  3.100\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.379+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Input #0, mov,mp4,m4a,3gp,3g2,mj2, from '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf60.16.100\n  Duration: 00:00:05.00, start: 0.000000, bitrate: 16103 kb/s\n  Stream #0:0[0x1](und): Video: h264 (High) (avc1 / 0x31637661), yuv420p(progressive), 854x480, 16073 kb/s, 30 fps, 30 tbr, 90k tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.380+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Stream mapping:\n  Stream #0:0 -> #0:0 (h264 (native) -> h264 (libx264))\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.380+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"Press [q] to stop, [?] for help\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.403+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[libx264 @ 0x13b805850] using cpu capabilities: ARMv8 NEON\n[libx264 @ 0x13b805850] profile High, level 3.0, 4:2:0, 8-bit\n[libx264 @ 0x13b805850] 264 - core 164 r3108 31e19f9 - H.264/MPEG-4 AVC codec - Copyleft 2003-2023 - http://www.videolan.org/x264.html - options: cabac=1 ref=2 deblock=1:0:0 analyse=0x3:0x113 me=hex subme=6 psy=1 psy_rd=1.00:0.00 mixed_ref=1 me_range=16 chroma_me=1 trellis=1 8x8dct=1 cqm=0 deadzone=21,11 fast_pskip=1 chroma_qp_offset=-2 threads=11 lookahead_threads=1 sliced_threads=0 nr=0 decimate=1 interlaced=0 bluray_compat=0 constrained_intra=0 bframes=3 b_pyramid=2 b_adapt=1 b_bias=0 direct=1 weightb=1 open_gop=0 weightp=1 keyint=250 keyint_min=25 scenecut=40 intra_refresh=0 rc_lookahead=30 rc=crf mbtree=1 crf=23.0 qcomp=0.60 qpmin=0 qpmax=69 qpstep=4 ip_ratio=1.40 aq=1:1.00\nOutput #0, mp4, to '/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4':\n  Metadata:\n    major_brand     : isom\n    minor_version   : 512\n    compatible_brands: isomiso2avc1mp41\n    encoder         : Lavf61.7","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.405+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":".100\n  Stream #0:0(und): Video: h264 (avc1 / 0x31637661), yuv420p(tv, progressive), 640x360, q=2-31, 30 fps, 15360 tbn (default)\n      Metadata:\n        handler_name    : VideoHandler\n        vendor_id       : [0][0][0][0]\n        encoder         : Lavc61.19.100 libx264\n      Side data:\n        cpb: bitrate max/min/avg: 0/0/0 buffer size: 0 vbv_delay: N/A\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:29.885+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":9095,"output":"frame=   68 fps=0.0 q=29.0 size=    1024KiB time=00:00:02.20 bitrate=3813.2kbits/s speed=4.36x    \r"}
{"L":"INFO","T":"2025-02-27T19:27:30.093+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"[out#0/mp4 @ 0x13b804980] video:2089KiB audio:0KiB subtitle:0KiB other streams:0KiB global headers:0KiB muxing overhead: 0.125450%\nframe=  150 fps=0.0 q=-1.0 Lsize=    2091KiB time=00:00:04.93 bitrate=3472.5kbits/s speed=6.93x    \n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:30.093+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","pid":9095,"output":"[libx264 @ 0x13b805850] frame I:1     Avg QP:26.22  size: 52767\n[libx264 @ 0x13b805850] frame P:38    Avg QP:28.18  size: 27668\n[libx264 @ 0x13b805850] frame B:111   Avg QP:30.81  size:  9314\n[libx264 @ 0x13b805850] "}
{"L":"INFO","T":"2025-02-27T19:27:30.093+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"consecutive B-frames:  0.7%  1.3%  2.0% 96.0%\n[libx264 @ 0x13b805850] mb I  I16..4:  4.6% 18.5% 77.0%\n[libx264 @ 0x13b805850] mb P  I16..4:  2.3%  9.5% 17.4%  P16..4: 17.0% 27.6% 24.8%  0.0%  0.0%    skip: 1.3%\n[libx264 @ 0x13b805850] mb B  I16..4:  1.7%  2.2%  4.5%  B16..8: 27.3% 31.9%  8.5%  direct: 7.5%  skip:16.5%  L0:33.6% L1:28.8% BI:37.6%\n[libx264 @ 0x13b805850] 8x8 transform intra:29.4% inter:20.9%\n[libx264 @ 0x13b805850] coded y,uvDC,uvAC intra: 77.4% 90.7% 72.3% inter: 38.2% 46.7% 16.4%\n[libx264 @ 0x13b805850] i16 v,h,dc,p: 24% 33% 25% 18%\n[libx264 @ 0x13b805850] i8 v,h,dc,ddl,ddr,vr,hd,vl,hu: 15% 22% 22%  5%  8%  7%  8%  6%  8%\n[libx264 @ 0x13b805850] i4 v,h,dc,ddl,ddr,vr,hd,vl,hu: 18% 17% 19%  5% 12%  8%  9%  5%  6%\n[libx264 @ 0x13b805850] i8c dc,h,v,p: 50% 22% 17% 10%\n[libx264 @ 0x13b805850] Weighted P-Frames: Y:36.8% UV:21.1%\n[libx264 @ 0x13b805850] ref P L0: 84.8% 15.2%\n[libx264 @ 0x13b805850] ref B L0: 91.1%  8.9%\n[libx264 @ 0x13b805850] ref B L1: 97.0%  3.0%\n[libx264 @ 0x13b805850] kb/s:3420.","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:30.093+0300","C":"ffmpeg/service.go:279","M":"FFmpeg output","output":"83\n","pid":9095}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"ffmpeg/service.go:324","M":"Transcoding completed successfully","input":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/original.mp4","output":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34/360p.mp4","resolution_name":"360p","dimensions":"640x360","file_size":2141391,"output_exists":true}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"s3/service.go:68","M":"Starting S3 upload","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"360p","bucket":"octopus-doganbros-storage","region":"eu-central-1","root_directory":"","access_key_set":true,"secret_key_set":true}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"s3/service.go:93","M":"Using default root directory","root_directory":"videos"}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"s3/service.go:101","M":"Constructed S3 upload key","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"s3/service.go:133","M":"Determined content length for upload","content_length_mb":2.042189598083496,"content_length":2141391}
{"L":"INFO","T":"2025-02-27T19:27:30.098+0300","C":"s3/service.go:142","M":"Sending PutObject request to S3","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4"}
{"L":"INFO","T":"2025-02-27T19:27:32.357+0300","C":"s3/service.go:175","M":"Successfully uploaded video to S3","resolution":"360p","bucket":"octopus-doganbros-storage","key":"videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4","etag":"\"091494dab7a85643f5409168977618b8\"","full_path":"s3://octopus-doganbros-storage/videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4","video_id":"720bc366-2dd8-4306-9869-564fc99d3224"}
{"L":"INFO","T":"2025-02-27T19:27:32.357+0300","C":"ipfs/service.go:32","M":"Starting IPFS upload","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","gateway":"http://localhost:8080"}
{"L":"INFO","T":"2025-02-27T19:27:32.689+0300","C":"ipfs/service.go:46","M":"Successfully uploaded to IPFS","video_id":"00000000-0000-0000-0000-000000000000","resolution":"original","cid":"QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW","gateway_url":"http://localhost:8080QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW"}
{"L":"INFO","T":"2025-02-27T19:27:32.749+0300","C":"video/logger_adapter.go:17","M":"Transcoding process summary","total_failed":0,"video_id":"720bc366-2dd8-4306-9869-564fc99d3224","successful_resolutions":["720p","480p","360p"],"failed_resolutions":[],"total_successful":3}
{"L":"DEBUG","T":"2025-02-27T19:27:32.766+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"13.173208ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"ipfs_cid\"='QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow',\"updated_at\"='2025-02-27 19:27:32.753' WHERE \"id\" = '720bc366-2dd8-4306-9869-564fc99d3224'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T19:27:32.775+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.875542ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('720bc366-2dd8-4306-9869-564fc99d3224','mp4','2025-02-27 19:27:14.1','2025-02-27 19:27:14.1') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.785+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.456333ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','videos/720bc366-2dd8-4306-9869-564fc99d3224/720p.mp4','QmcLJAMDqbzt1cgQNBnxhRYXngUhzLAYiyvSLxr1Vjyimj',5,'2025-02-27 19:27:32.775','2025-02-27 19:27:32.775') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.795+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('720bc366-2dd8-4306-9869-564fc99d3224','mp4','2025-02-27 19:27:23.392','2025-02-27 19:27:23.392') RETURNING \"id\",\"created_at\",\"updated_at\"","source":"gorm","duration":"9.917ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-27T19:27:32.801+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.53125ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('e9b07757-9b0a-4ba0-8805-5b8dca7bdced','videos/720bc366-2dd8-4306-9869-564fc99d3224/480p.mp4','QmbxdQZSvDhwVWCNqnGsf8WbSoD45BXeYyrgbkmyBsx9uW',5,'2025-02-27 19:27:32.795','2025-02-27 19:27:32.795') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.807+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.409333ms","rows_affected":1,"sql":"INSERT INTO \"transcodes\" (\"video_id\",\"format\",\"created_at\",\"updated_at\") VALUES ('720bc366-2dd8-4306-9869-564fc99d3224','mp4','2025-02-27 19:27:29.271','2025-02-27 19:27:29.271') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.817+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.7105ms","rows_affected":1,"sql":"INSERT INTO \"transcode_segments\" (\"transcode_id\",\"storage_path\",\"ipfs_cid\",\"duration\",\"created_at\",\"updated_at\") VALUES ('2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','videos/720bc366-2dd8-4306-9869-564fc99d3224/360p.mp4','QmP4paR1g1bZEbNssoDENrga4B9oW6he9ULbN5s82CZ7AW',5,'2025-02-27 19:27:32.807','2025-02-27 19:27:32.807') RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.841+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"24.244708ms","rows_affected":0,"sql":"INSERT INTO \"videos\" (\"file_id\",\"title\",\"description\",\"storage_path\",\"ipfs_cid\",\"checksum\",\"file_size\",\"id\",\"created_at\",\"updated_at\") VALUES ('255a6dfc-62a4-4e15-ae74-3c54ce1ae2c3','asc','asds','videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4','QmPd7a9AyU6cfFm2DsmhwrpQp2bHN72jVfauzSJdqkkfow','',10064431,'720bc366-2dd8-4306-9869-564fc99d3224','2025-02-27 19:27:01.501','2025-02-27 19:27:32.753') ON CONFLICT DO NOTHING RETURNING \"id\",\"created_at\",\"updated_at\""}
{"L":"DEBUG","T":"2025-02-27T19:27:32.870+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"52.644917ms","rows_affected":1,"sql":"UPDATE \"video_uploads\" SET \"end_time\"='2025-02-27 19:27:32.817',\"status\"='completed',\"updated_at\"='2025-02-27 19:27:32.817',\"video_id\"='720bc366-2dd8-4306-9869-564fc99d3224' WHERE \"id\" = '48e48691-08ab-4aae-8afa-af53fb1e36c5'"}
{"L":"INFO","T":"2025-02-27T19:27:32.882+0300","C":"tempfile/manager.go:87","M":"Cleaned up temporary directory","path":"/tmp/videos/4b4c75bf-3cba-40dc-94e9-27b964188f34"}
{"L":"DEBUG","T":"2025-02-27T19:27:32.915+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"11.477375ms","rows_affected":3,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','e9b07757-9b0a-4ba0-8805-5b8dca7bdced')"}
{"L":"DEBUG","T":"2025-02-27T19:27:32.915+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"22.116542ms","rows_affected":3,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '720bc366-2dd8-4306-9869-564fc99d3224'"}
{"L":"DEBUG","T":"2025-02-27T19:27:32.930+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '720bc366-2dd8-4306-9869-564fc99d3224'","source":"gorm","duration":"14.828625ms"}
{"L":"DEBUG","T":"2025-02-27T19:27:32.930+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"47.942917ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '720bc366-2dd8-4306-9869-564fc99d3224' ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T19:27:32.930+0300","C":"video/logger_adapter.go:17","M":"Video upload completed successfully","video_id":"720bc366-2dd8-4306-9869-564fc99d3224","file_path":"videos/720bc366-2dd8-4306-9869-564fc99d3224/original.mp4","request_id":""}
{"L":"INFO","T":"2025-02-27T19:27:32.930+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/video/upload","status":200,"latency_ms":31464,"client_ip":"::1","method":"POST"}
{"L":"INFO","T":"2025-02-27T19:29:07.853+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-27T19:29:07.854+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:29:07.935+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:30:36.553+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-27T19:30:36.578+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"USE pavilion_db","source":"gorm","duration":"8.708ms","rows_affected":0}
{"L":"INFO","T":"2025-02-27T19:30:36.583+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-27T19:30:36.583+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-27T19:30:36.583+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":false}
{"L":"DEBUG","T":"2025-02-27T19:30:36.602+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.064125ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-27T19:30:36.820+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"152.146584ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-27T19:30:36.828+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.426625ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-27T19:30:36.828+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-27T19:30:36.828+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-27T19:30:36.871+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"42.757084ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-27T19:30:36.871+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-27T19:30:36.874+0300","C":"backend/app.go:133","M":"S3 Configuration in App","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-27T19:30:36.874+0300","C":"s3/service.go:26","M":"S3 Service Configuration","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-27T19:30:36.875+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-27T19:30:46.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.490125ms","rows_affected":14,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','e9b07757-9b0a-4ba0-8805-5b8dca7bdced','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-27T19:30:46.367+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"32.03925ms","rows_affected":14,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')"}
{"L":"DEBUG","T":"2025-02-27T19:30:46.380+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.139709ms","rows_affected":10,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')"}
{"L":"DEBUG","T":"2025-02-27T19:30:46.380+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"76.886125ms","rows_affected":10,"sql":"SELECT * FROM \"videos\" LIMIT 10"}
{"L":"INFO","T":"2025-02-27T19:30:46.381+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","page":1,"limit":10,"request_id":"","count":10}
{"L":"INFO","T":"2025-02-27T19:30:46.381+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/videos","status":200,"latency_ms":77,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:30:54.364+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/index.html","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:30:54.380+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui.css"}
{"L":"INFO","T":"2025-02-27T19:30:54.382+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui-standalone-preset.js","status":200,"latency_ms":1,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:30:54.392+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":12,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui-bundle.js","status":200}
{"L":"INFO","T":"2025-02-27T19:30:54.469+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/doc.json","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:30:54.503+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/swagger/favicon-32x32.png","status":200,"latency_ms":0,"client_ip":"::1","method":"GET"}
{"L":"INFO","T":"2025-02-27T19:31:14.315+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/videos","status":401,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:31:30.794+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T19:31:30.816+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"21.765084ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1","source":"gorm"}
{"L":"INFO","T":"2025-02-27T19:31:30.907+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:31:30.907+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T19:31:30.907+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T19:31:30.907+0300"}
{"L":"DEBUG","T":"2025-02-27T19:31:30.916+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"8.948583ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzg2OTAsIm5iZiI6MTc0MDY3Mzg5MCwiaWF0IjoxNzQwNjczODkwLCJqdGkiOiJkOWMzZThlZS03NDM2LTQzMzEtYWRmNS05MGNlYTg1MmUxYTUifQ.CAlJ7sX-UAtXdvM6BRqpB8Snqf1fLT7X_ADzwsjaF2E'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T19:31:30.932+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzg2OTAsIm5iZiI6MTc0MDY3Mzg5MCwiaWF0IjoxNzQwNjczODkwLCJqdGkiOiJkOWMzZThlZS03NDM2LTQzMzEtYWRmNS05MGNlYTg1MmUxYTUifQ.CAlJ7sX-UAtXdvM6BRqpB8Snqf1fLT7X_ADzwsjaF2E','2025-03-06 19:31:30.907','2025-02-27 19:31:30.916',NULL) RETURNING \"id\"","source":"gorm","duration":"15.846375ms"}
{"L":"INFO","T":"2025-02-27T19:31:30.932+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T19:31:30.952+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"19.841833ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 19:31:30.932',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 19:31:30.933' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T19:31:30.952+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:31:30.952+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":158,"client_ip":"::1","method":"POST","path":"/auth/login"}
{"L":"DEBUG","T":"2025-02-27T19:32:06.098+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.171ms","rows_affected":14,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','e9b07757-9b0a-4ba0-8805-5b8dca7bdced','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-27T19:32:06.098+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":14,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')","source":"gorm","duration":"16.327958ms"}
{"L":"DEBUG","T":"2025-02-27T19:32:06.107+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.602792ms","rows_affected":10,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')"}
{"L":"DEBUG","T":"2025-02-27T19:32:06.107+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":10,"sql":"SELECT * FROM \"videos\" LIMIT 10","source":"gorm","duration":"45.045958ms"}
{"L":"INFO","T":"2025-02-27T19:32:06.107+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","request_id":"","count":10,"page":1,"limit":10}
{"L":"INFO","T":"2025-02-27T19:32:06.107+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/videos","status":200,"latency_ms":45,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:33:17.873+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-27T19:33:17.876+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:33:17.896+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:35:46.675+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-27T19:35:46.717+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.133083ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-27T19:35:46.723+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-27T19:35:46.723+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-27T19:35:46.723+0300","C":"database/service.go:101","M":"Initialized migration config","forceRun":false,"environment":"development","autoMigrate":false}
{"L":"DEBUG","T":"2025-02-27T19:35:46.744+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"17.676417ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-27T19:35:46.810+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"63.819333ms"}
{"L":"DEBUG","T":"2025-02-27T19:35:46.817+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.172625ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-27T19:35:46.817+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-27T19:35:46.817+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-27T19:35:46.868+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"51.2675ms"}
{"L":"INFO","T":"2025-02-27T19:35:46.868+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-27T19:35:46.874+0300","C":"backend/app.go:133","M":"S3 Configuration in App","accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true}
{"L":"INFO","T":"2025-02-27T19:35:46.874+0300","C":"s3/service.go:26","M":"S3 Service Configuration","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC"}
{"L":"INFO","T":"2025-02-27T19:35:46.875+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-27T19:36:00.987+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/index.html","status":200,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T19:36:01.002+0300","C":"http/middleware.go:44","M":"HTTP Request","client_ip":"::1","method":"GET","path":"/swagger/swagger-ui.css","status":200,"latency_ms":0}
{"L":"INFO","T":"2025-02-27T19:36:01.005+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":2,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui-standalone-preset.js"}
{"L":"INFO","T":"2025-02-27T19:36:01.009+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/swagger/swagger-ui-bundle.js","status":200,"latency_ms":6,"client_ip":"::1","method":"GET"}
{"L":"INFO","T":"2025-02-27T19:36:01.101+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/doc.json","status":200,"latency_ms":0,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-27T19:36:01.109+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/favicon-32x32.png","status":200}
{"L":"INFO","T":"2025-02-27T19:36:09.850+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-27T19:36:09.866+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"16.205ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-27T19:36:09.947+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:36:09.948+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-27T19:36:09.948+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-06T19:36:09.948+0300"}
{"L":"DEBUG","T":"2025-02-27T19:36:09.956+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.799375ms","rows_affected":1,"sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzg5NjksIm5iZiI6MTc0MDY3NDE2OSwiaWF0IjoxNzQwNjc0MTY5LCJqdGkiOiJiNTYwOTIwZi0zODMwLTRjZDMtYTZhMi1hOTAxMzViMjg4OTkifQ.3eskpMNGE67MyQB08Pe2wCT9sQqyXYnhPYPZs-W_zB0'"}
{"L":"DEBUG","T":"2025-02-27T19:36:09.980+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"23.497291ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEyNzg5NjksIm5iZiI6MTc0MDY3NDE2OSwiaWF0IjoxNzQwNjc0MTY5LCJqdGkiOiJiNTYwOTIwZi0zODMwLTRjZDMtYTZhMi1hOTAxMzViMjg4OTkifQ.3eskpMNGE67MyQB08Pe2wCT9sQqyXYnhPYPZs-W_zB0','2025-03-06 19:36:09.948','2025-02-27 19:36:09.956',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-27T19:36:09.980+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-27T19:36:10.002+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"21.732416ms","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-27 19:36:09.98',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-27 19:36:09.983' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'"}
{"L":"INFO","T":"2025-02-27T19:36:10.002+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-27T19:36:10.002+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":152,"client_ip":"::1","method":"POST","path":"/auth/login","status":200}
{"L":"DEBUG","T":"2025-02-27T19:36:42.858+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"12.969375ms","rows_affected":14,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','e9b07757-9b0a-4ba0-8805-5b8dca7bdced','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-27T19:36:42.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":14,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')","source":"gorm","duration":"26.423708ms"}
{"L":"DEBUG","T":"2025-02-27T19:36:42.873+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')","source":"gorm","duration":"13.571209ms","rows_affected":10}
{"L":"DEBUG","T":"2025-02-27T19:36:42.873+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":10,"sql":"SELECT * FROM \"videos\" LIMIT 10","source":"gorm","duration":"61.544958ms"}
{"L":"INFO","T":"2025-02-27T19:36:42.873+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","request_id":"","count":10,"page":1,"limit":10}
{"L":"INFO","T":"2025-02-27T19:36:42.873+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/videos","status":200,"latency_ms":62,"client_ip":"::1","method":"GET"}
{"L":"INFO","T":"2025-02-27T19:37:53.471+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-27T19:37:53.474+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-27T19:37:53.483+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-28T21:24:46.127+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-28T21:24:46.152+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.584167ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:24:46.162+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:24:46.162+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-28T21:24:46.162+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":true}
{"L":"DEBUG","T":"2025-02-28T21:24:46.211+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"47.658292ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-28T21:24:46.270+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"54.964583ms"}
{"L":"DEBUG","T":"2025-02-28T21:24:46.285+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.824958ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-28T21:24:46.285+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-28T21:24:46.285+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-28T21:24:46.339+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"54.094209ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:24:46.344+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"4.485209ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm"}
{"L":"ERROR","T":"2025-02-28T21:24:46.354+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: prepared statement had 2 statements, expected 1 (SQLSTATE 42P14)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Exec\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:769\ngithub.com/consensuslabs/pavilion-network/backend/migrations.RunMigrations.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/migrations/main.go:162\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/migrations.RunMigrations\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/migrations/main.go:155\nmain.NewApp\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/app.go:98\nmain.main\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/main.go:93\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/runtime/proc.go:283"}
{"L":"INFO","T":"2025-02-28T21:25:58.087+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-28T21:25:58.117+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"10.433125ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:25:58.124+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:25:58.124+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-28T21:25:58.124+0300","C":"database/service.go:101","M":"Initialized migration config","forceRun":true,"environment":"development","autoMigrate":false}
{"L":"DEBUG","T":"2025-02-28T21:25:58.148+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm","duration":"21.5315ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:25:58.209+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"57.724625ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.216+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.826167ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-28T21:25:58.216+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-28T21:25:58.216+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.262+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"46.495834ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.267+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"4.16225ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.297+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"28.307708ms","rows_affected":0,"sql":"-- Add deleted_at column to videos table for soft delete functionality\nALTER TABLE videos ADD COLUMN deleted_at TIMESTAMP NULL"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.318+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"20.417708ms","rows_affected":0,"sql":"-- Create an index on deleted_at for better query performance\nCREATE INDEX idx_videos_deleted_at ON videos(deleted_at)"}
{"L":"DEBUG","T":"2025-02-28T21:25:58.354+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"35.636084ms","rows_affected":-1,"sql":"SELECT COALESCE(MAX(batch_no), 0) + 1 FROM \"schema_migrations\""}
{"L":"INFO","T":"2025-02-28T21:27:36.631+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-28T21:27:36.664+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.183917ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:27:36.669+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:27:36.669+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-28T21:27:36.669+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":true}
{"L":"DEBUG","T":"2025-02-28T21:27:36.695+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"23.53175ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:27:36.756+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"58.0825ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:27:36.764+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.088875ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-28T21:27:36.764+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-28T21:27:36.764+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-28T21:27:36.818+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"53.887667ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-28T21:27:36.824+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"5.822417ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"DEBUG","T":"2025-02-28T21:27:36.850+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"-- Add deleted_at column to videos table for soft delete functionality\nALTER TABLE videos ADD COLUMN deleted_at TIMESTAMP NULL","source":"gorm","duration":"23.885625ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:27:36.864+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"13.636417ms","rows_affected":0,"sql":"-- Create an index on deleted_at for better query performance\nCREATE INDEX idx_videos_deleted_at ON videos(deleted_at)"}
{"L":"ERROR","T":"2025-02-28T21:27:36.894+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: relation \"schema_migrations\" does not exist (SQLSTATE 42P01)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*DB).Scan\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:543\ngithub.com/consensuslabs/pavilion-network/backend/internal/database.(*MigrationConfig).RecordMigration\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/migration_config.go:90\ngithub.com/consensuslabs/pavilion-network/backend/migrations.RunMigrations.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/migrations/main.go:180\ngorm.io/gorm.(*DB).Transaction\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:651\ngithub.com/consensuslabs/pavilion-network/backend/migrations.RunMigrations\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/migrations/main.go:155\nmain.NewApp\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/app.go:98\nmain.main\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/main.go:93\nruntime.main\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/runtime/proc.go:283"}
{"L":"INFO","T":"2025-02-28T21:42:40.676+0300","C":"database/service.go:34","M":"Attempting to connect to database","database":"pavilion_db","host":"localhost","port":26257}
{"L":"DEBUG","T":"2025-02-28T21:42:40.702+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.055834ms","rows_affected":0,"sql":"USE pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:42:40.708+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:42:40.708+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-28T21:42:40.708+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":false,"forceRun":true}
{"L":"DEBUG","T":"2025-02-28T21:42:40.728+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.682875ms","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')"}
{"L":"DEBUG","T":"2025-02-28T21:42:40.793+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm","duration":"61.497834ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-28T21:42:40.800+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at","source":"gorm","duration":"7.589667ms"}
{"L":"INFO","T":"2025-02-28T21:42:40.800+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-28T21:42:40.800+0300","C":"database/service.go:162","M":"Skipping auto-migration","environment":"development"}
{"L":"DEBUG","T":"2025-02-28T21:42:40.859+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"58.225416ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-28T21:42:40.859+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-28T21:42:40.877+0300","C":"backend/app.go:133","M":"S3 Configuration in App","endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40}
{"L":"INFO","T":"2025-02-28T21:42:40.877+0300","C":"s3/service.go:26","M":"S3 Service Configuration","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":"","region":"eu-central-1"}
{"L":"INFO","T":"2025-02-28T21:42:40.878+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"INFO","T":"2025-02-28T21:43:06.864+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":4,"client_ip":"::1","method":"GET","path":"/swagger/index.html","status":200}
{"L":"INFO","T":"2025-02-28T21:43:07.012+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui.css","status":200,"latency_ms":3,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-28T21:43:07.047+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":41,"client_ip":"::1","method":"GET","path":"/swagger/swagger-ui-standalone-preset.js"}
{"L":"INFO","T":"2025-02-28T21:43:07.054+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/swagger/swagger-ui-bundle.js","status":200,"latency_ms":49,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-28T21:43:07.209+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/doc.json"}
{"L":"INFO","T":"2025-02-28T21:43:07.234+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":0,"client_ip":"::1","method":"GET","path":"/swagger/favicon-32x32.png","status":200}
{"L":"INFO","T":"2025-02-28T21:43:15.411+0300","C":"auth/service.go:36","M":"Login attempt","identifier":"user@example.com"}
{"L":"DEBUG","T":"2025-02-28T21:43:15.445+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"33.399709ms","rows_affected":1,"sql":"SELECT * FROM \"users\" WHERE email = 'user@example.com' OR username = 'user@example.com' ORDER BY \"users\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-28T21:43:15.533+0300","C":"auth/service.go:67","M":"Generating tokens","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-28T21:43:15.534+0300","C":"auth/service.go:85","M":"Generated refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"INFO","T":"2025-02-28T21:43:15.534+0300","C":"auth/refresh_token.go:29","M":"Creating refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","expiresAt":"2025-03-07T21:43:15.534+0300"}
{"L":"DEBUG","T":"2025-02-28T21:43:15.544+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM \"refresh_tokens\" WHERE token = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEzNzI5OTUsIm5iZiI6MTc0MDc2ODE5NSwiaWF0IjoxNzQwNzY4MTk1LCJqdGkiOiI5MDM4ZmViYy1iMWZhLTRhNzEtOGZkNy0yMTZhMmE5ZjQxYmUifQ.A5l7_s1lPFt-qRCGctxiXclqnmy--oYCYKIcnqrYV20'","source":"gorm","duration":"10.429708ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-28T21:43:15.560+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"15.769583ms","rows_affected":1,"sql":"INSERT INTO \"refresh_tokens\" (\"user_id\",\"token\",\"expires_at\",\"created_at\",\"revoked_at\") VALUES ('92547025-3dc4-4b14-bbf5-fcf7fdbbe16e','eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VySWQiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJlbWFpbCI6InVzZXJAZXhhbXBsZS5jb20iLCJzdWIiOiI5MjU0NzAyNS0zZGM0LTRiMTQtYmJmNS1mY2Y3ZmRiYmUxNmUiLCJleHAiOjE3NDEzNzI5OTUsIm5iZiI6MTc0MDc2ODE5NSwiaWF0IjoxNzQwNzY4MTk1LCJqdGkiOiI5MDM4ZmViYy1iMWZhLTRhNzEtOGZkNy0yMTZhMmE5ZjQxYmUifQ.A5l7_s1lPFt-qRCGctxiXclqnmy--oYCYKIcnqrYV20','2025-03-07 21:43:15.534','2025-02-28 21:43:15.544',NULL) RETURNING \"id\""}
{"L":"INFO","T":"2025-02-28T21:43:15.560+0300","C":"auth/refresh_token.go:58","M":"Successfully created refresh token","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e"}
{"L":"DEBUG","T":"2025-02-28T21:43:15.578+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"UPDATE \"users\" SET \"username\"='johndoe',\"email\"='user@example.com',\"password\"='$2a$10$7VdQ7ULm5ZvwWTqCKjZu6.6EUaRrXMWqdUMsJ.eekWfh5LYW8xVJS',\"name\"='John Doe',\"email_verified\"=true,\"last_login_at\"='2025-02-28 21:43:15.56',\"active\"=true,\"created_at\"='2025-02-24 22:26:51.567',\"updated_at\"='2025-02-28 21:43:15.561' WHERE \"id\" = '92547025-3dc4-4b14-bbf5-fcf7fdbbe16e'","source":"gorm","duration":"18.066791ms"}
{"L":"INFO","T":"2025-02-28T21:43:15.578+0300","C":"auth/service.go:110","M":"Login successful","userID":"92547025-3dc4-4b14-bbf5-fcf7fdbbe16e","email":"user@example.com"}
{"L":"INFO","T":"2025-02-28T21:43:15.578+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"POST","path":"/auth/login","status":200,"latency_ms":167,"client_ip":"::1"}
{"L":"ERROR","T":"2025-02-28T21:43:40.354+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Find\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:170\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:384\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:345\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:43:40.355+0300","C":"video/logger_adapter.go:17","M":"Failed to list videos","request_id":"","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-28T21:43:40.355+0300","C":"http/response_handler.go:34","M":"Failed to retrieve videos","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:351\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:43:40.355+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/videos","status":500,"latency_ms":28,"client_ip":"::1"}
{"L":"ERROR","T":"2025-02-28T21:43:53.984+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Find\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:170\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:384\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:345\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:43:53.985+0300","C":"video/logger_adapter.go:17","M":"Failed to list videos","request_id":"","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-28T21:43:53.985+0300","C":"http/response_handler.go:34","M":"Failed to retrieve videos","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:351\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:43:53.985+0300","C":"http/middleware.go:44","M":"HTTP Request","path":"/videos","status":500,"latency_ms":13,"client_ip":"::1","method":"GET"}
{"L":"ERROR","T":"2025-02-28T21:44:05.296+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Find\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:170\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:384\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:345\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:44:05.297+0300","C":"video/logger_adapter.go:17","M":"Failed to list videos","request_id":"","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-28T21:44:05.297+0300","C":"http/response_handler.go:34","M":"Failed to retrieve videos","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:351\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:44:05.297+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":12,"client_ip":"::1","method":"GET","path":"/videos","status":500}
{"L":"ERROR","T":"2025-02-28T21:44:10.787+0300","C":"database/gorm_logger.go:93","M":"SQL error","error":"ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/database.(*GormLogger).Trace\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/database/gorm_logger.go:93\ngorm.io/gorm.(*processor).Execute\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/callbacks.go:134\ngorm.io/gorm.(*DB).Find\n\t/Users/umitdogan/go/pkg/mod/gorm.io/gorm@v1.25.12/finisher_api.go:170\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoServiceImpl).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/service.go:384\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:345\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:44:10.788+0300","C":"video/logger_adapter.go:17","M":"Failed to list videos","request_id":"","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)"}
{"L":"ERROR","T":"2025-02-28T21:44:10.788+0300","C":"http/response_handler.go:34","M":"Failed to retrieve videos","error":"failed to list videos: ERROR: column \"deleted_at\" does not exist (SQLSTATE 42703)","S":"github.com/consensuslabs/pavilion-network/backend/internal/http.(*responseHandler).ErrorResponse\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/response_handler.go:34\ngithub.com/consensuslabs/pavilion-network/backend/internal/video.(*VideoHandler).ListVideos\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/video/handler.go:351\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.SetupRoutes.AuthMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/auth/middleware.go:42\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RecoveryMiddleware.func3\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:58\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.RequestLoggerMiddleware.func2\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:33\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\nmain.(*App).setupRoutes.CORSMiddleware.func1\n\t/Users/umitdogan/workout/dev/pavilion-network-mvp/pavilion-network/backend/internal/http/middleware.go:22\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.CustomRecoveryWithWriter.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/recovery.go:102\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.LoggerWithConfig.func1\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/logger.go:249\ngithub.com/gin-gonic/gin.(*Context).Next\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/context.go:185\ngithub.com/gin-gonic/gin.(*Engine).handleHTTPRequest\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:633\ngithub.com/gin-gonic/gin.(*Engine).ServeHTTP\n\t/Users/umitdogan/go/pkg/mod/github.com/gin-gonic/gin@v1.10.0/gin.go:589\nnet/http.serverHandler.ServeHTTP\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:3301\nnet/http.(*conn).serve\n\t/opt/homebrew/Cellar/go/1.24.0/libexec/src/net/http/server.go:2102"}
{"L":"INFO","T":"2025-02-28T21:44:10.788+0300","C":"http/middleware.go:44","M":"HTTP Request","method":"GET","path":"/videos","status":500,"latency_ms":25,"client_ip":"::1"}
{"L":"INFO","T":"2025-02-28T21:46:22.973+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-02-28T21:46:22.982+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-02-28T21:46:23.047+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
{"L":"INFO","T":"2025-02-28T21:46:27.132+0300","C":"database/service.go:34","M":"Attempting to connect to database","host":"localhost","port":26257,"database":"pavilion_db"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.159+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"6.751667ms","rows_affected":0,"sql":"USE pavilion_db","source":"gorm"}
{"L":"INFO","T":"2025-02-28T21:46:27.165+0300","C":"database/service.go:85","M":"Connected to database","database":"pavilion_db"}
{"L":"INFO","T":"2025-02-28T21:46:27.165+0300","C":"database/service.go:94","M":"Configured connection pool","maxOpenConns":100,"maxIdleConns":10}
{"L":"INFO","T":"2025-02-28T21:46:27.165+0300","C":"database/service.go:101","M":"Initialized migration config","environment":"development","autoMigrate":true,"forceRun":true}
{"L":"DEBUG","T":"2025-02-28T21:46:27.190+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"CREATE TYPE IF NOT EXISTS upload_status AS ENUM ('pending', 'uploading', 'completed', 'failed')","source":"gorm","duration":"22.1205ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.250+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"56.698542ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.256+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.467833ms","rows_affected":0,"sql":"SELECT * FROM \"schema_migrations\" ORDER BY applied_at"}
{"L":"INFO","T":"2025-02-28T21:46:27.256+0300","C":"database/service.go:135","M":"Found applied migrations","count":0}
{"L":"INFO","T":"2025-02-28T21:46:27.256+0300","C":"database/service.go:148","M":"Running auto-migration"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.303+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"46.148167ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.312+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.555041ms","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()"}
{"L":"WARN","T":"2025-02-28T21:46:27.875+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"563.349ms","rows_affected":-1,"sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'users'"}
{"L":"DEBUG","T":"2025-02-28T21:46:27.883+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.180209ms","rows_affected":-1,"sql":"SELECT * FROM \"users\" LIMIT 1"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.046+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"162.404041ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users' AND constraint_type = 'UNIQUE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.199+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"153.039416ms","rows_affected":-1,"sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'users'"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.256+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"56.874792ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'users'"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.421+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"164.172ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.580+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"159.298958ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'username') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"WARN","T":"2025-02-28T21:46:28.803+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"222.345ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'email') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:28.966+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'password') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"162.891ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:29.138+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"171.641167ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'name') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.302+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"163.769208ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'email_verified') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.461+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'last_login_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"158.827167ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.622+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'active') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"161.385667ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.784+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"162.135959ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.944+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"158.989792ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'users' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'users' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:29.983+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND table_type = 'BASE TABLE'","source":"gorm","duration":"38.999792ms","rows_affected":1}
{"L":"DEBUG","T":"2025-02-28T21:46:29.985+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"2.077ms","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()"}
{"L":"WARN","T":"2025-02-28T21:46:30.359+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"373.654542ms","rows_affected":-1,"sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens'"}
{"L":"DEBUG","T":"2025-02-28T21:46:30.365+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"refresh_tokens\" LIMIT 1","source":"gorm","duration":"6.134542ms","rows_affected":-1}
{"L":"DEBUG","T":"2025-02-28T21:46:30.501+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"135.677083ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'refresh_tokens' AND constraint_type = 'UNIQUE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:30.634+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"133.112458ms","rows_affected":-1,"sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'refresh_tokens'"}
{"L":"DEBUG","T":"2025-02-28T21:46:30.684+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"49.572917ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'refresh_tokens'"}
{"L":"DEBUG","T":"2025-02-28T21:46:30.850+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"165.934666ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.029+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"178.37775ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'user_id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.189+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"159.676583ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'token') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.346+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"157.067917ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'expires_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.502+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"155.376083ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:31.659+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"156.5715ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'refresh_tokens' AND column_name = 'revoked_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'refresh_tokens' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.698+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"38.8265ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:31.700+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"2.207042ms","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()"}
{"L":"WARN","T":"2025-02-28T21:46:32.237+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"537.278833ms","rows_affected":-1,"sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'videos'"}
{"L":"DEBUG","T":"2025-02-28T21:46:32.245+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"7.1145ms","rows_affected":-1,"sql":"SELECT * FROM \"videos\" LIMIT 1"}
{"L":"DEBUG","T":"2025-02-28T21:46:32.384+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"139.362875ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'videos' AND constraint_type = 'UNIQUE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:32.523+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'videos'","source":"gorm","duration":"138.788375ms","rows_affected":-1}
{"L":"DEBUG","T":"2025-02-28T21:46:32.573+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"48.866625ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'videos'"}
{"L":"DEBUG","T":"2025-02-28T21:46:32.731+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"158.677083ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:32.892+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"159.99375ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'file_id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:33.066+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"173.697125ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'title') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:33.220+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'description') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"153.917625ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:33.375+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"155.090167ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'storage_path') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:33.533+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'ipfs_cid') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"157.456791ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:33.710+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"177.44175ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'checksum') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:33.867+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"156.600166ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'file_size') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:34.032+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"163.155708ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:34.190+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"157.983042ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'videos' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'videos' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"WARN","T":"2025-02-28T21:46:34.511+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","rows_affected":0,"sql":"ALTER TABLE \"videos\" ADD \"deleted_at\" timestamptz","source":"gorm","duration":"321.226959ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:34.556+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"44.551583ms","rows_affected":1,"sql":"SELECT count(*) FROM pg_indexes WHERE tablename = 'videos' AND indexname = 'idx_videos_deleted_at' AND schemaname = CURRENT_SCHEMA()"}
{"L":"WARN","T":"2025-02-28T21:46:35.182+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"625.985083ms","rows_affected":0,"sql":"CREATE INDEX IF NOT EXISTS \"idx_videos_deleted_at\" ON \"videos\" (\"deleted_at\")"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.226+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"43.702542ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND table_type = 'BASE TABLE'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.230+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"3.840542ms","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()"}
{"L":"WARN","T":"2025-02-28T21:46:35.632+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","source":"gorm","duration":"401.744084ms","rows_affected":-1,"sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads'"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.641+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"8.910042ms","rows_affected":-1,"sql":"SELECT * FROM \"video_uploads\" LIMIT 1"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.783+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"141.726083ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'video_uploads' AND constraint_type = 'UNIQUE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.926+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"142.697666ms","rows_affected":-1,"sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'video_uploads'"}
{"L":"DEBUG","T":"2025-02-28T21:46:35.980+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"54.044ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'video_uploads'"}
{"L":"DEBUG","T":"2025-02-28T21:46:36.151+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"171.070833ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:36.314+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"162.933958ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'video_id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:36.472+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'start_time') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"157.184541ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:36.627+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'end_time') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"155.244625ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:36.791+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"163.885458ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'status') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:36.947+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"155.362708ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.102+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"155.002166ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'video_uploads' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'video_uploads' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.145+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"42.838666ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.148+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()","source":"gorm","duration":"2.434375ms"}
{"L":"WARN","T":"2025-02-28T21:46:37.474+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","duration":"326.15425ms","rows_affected":-1,"sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.481+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":-1,"sql":"SELECT * FROM \"transcodes\" LIMIT 1","source":"gorm","duration":"6.664875ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.617+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"135.182208ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'transcodes' AND constraint_type = 'UNIQUE'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.792+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'transcodes'","source":"gorm","duration":"174.641917ms","rows_affected":-1}
{"L":"DEBUG","T":"2025-02-28T21:46:37.841+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"49.290584ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'transcodes'"}
{"L":"DEBUG","T":"2025-02-28T21:46:37.998+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"156.888375ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcodes' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.156+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND column_name = 'video_id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcodes' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"157.138ms"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.313+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND column_name = 'format') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcodes' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"156.671042ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:38.476+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"163.398708ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcodes' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.638+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"161.477833ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcodes' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.674+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"35.766833ms","rows_affected":1,"sql":"SELECT count(*) FROM INFORMATION_SCHEMA.table_constraints WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcodes' AND constraint_name = 'chk_transcodes_format'"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.714+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"39.69425ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND table_type = 'BASE TABLE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:38.717+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"2.074625ms","rows_affected":1,"sql":"SELECT CURRENT_DATABASE()"}
{"L":"WARN","T":"2025-02-28T21:46:39.161+0300","C":"database/gorm_logger.go:79","M":"SLOW SQL >= 200ms","sql":"SELECT c.column_name, c.is_nullable = 'YES', c.udt_name, c.character_maximum_length, c.numeric_precision, c.numeric_precision_radix, c.numeric_scale, c.datetime_precision, 8 * typlen, c.column_default, pd.description, c.identity_increment FROM information_schema.columns AS c JOIN pg_type AS pgt ON c.udt_name = pgt.typname LEFT JOIN pg_catalog.pg_description as pd ON pd.objsubid = c.ordinal_position AND pd.objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = c.table_name AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = c.table_schema)) where table_catalog = 'pavilion_db' AND table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments'","source":"gorm","duration":"444.629583ms","rows_affected":-1}
{"L":"DEBUG","T":"2025-02-28T21:46:39.168+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"6.225584ms","rows_affected":-1,"sql":"SELECT * FROM \"transcode_segments\" LIMIT 1"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.310+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"142.335666ms","rows_affected":-1,"sql":"SELECT constraint_name FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'transcode_segments' AND constraint_type = 'UNIQUE'"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.450+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"139.983208ms","rows_affected":-1,"sql":"SELECT c.column_name, constraint_name, constraint_type FROM information_schema.table_constraints tc JOIN information_schema.constraint_column_usage AS ccu USING (constraint_schema, constraint_catalog, table_name, constraint_name) JOIN information_schema.columns AS c ON c.table_schema = tc.constraint_schema AND tc.table_name = c.table_name AND ccu.column_name = c.column_name WHERE constraint_type IN ('PRIMARY KEY', 'UNIQUE') AND c.table_catalog = 'pavilion_db' AND c.table_schema = CURRENT_SCHEMA() AND c.table_name = 'transcode_segments'"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.499+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"48.607292ms","rows_affected":-1,"sql":"SELECT a.attname as column_name, format_type(a.atttypid, a.atttypmod) AS data_type\n\t\tFROM pg_attribute a JOIN pg_class b ON a.attrelid = b.oid AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA())\n\t\tWHERE a.attnum > 0 -- hide internal columns\n\t\tAND NOT a.attisdropped -- hide deleted columns\n\t\tAND b.relname = 'transcode_segments'"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.657+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"157.52725ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.817+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"159.948625ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'transcode_id') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:39.974+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"156.433041ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'storage_path') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:40.132+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"158.514458ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'ipfs_cid') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:40.290+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'duration') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))","source":"gorm","duration":"157.603458ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:46:40.450+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"159.338125ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'created_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"DEBUG","T":"2025-02-28T21:46:40.639+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"189.38625ms","rows_affected":0,"sql":"SELECT description FROM pg_catalog.pg_description WHERE objsubid = (SELECT ordinal_position FROM information_schema.columns WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'transcode_segments' AND column_name = 'updated_at') AND objoid = (SELECT oid FROM pg_catalog.pg_class WHERE relname = 'transcode_segments' AND relnamespace = (SELECT oid FROM pg_catalog.pg_namespace WHERE nspname = CURRENT_SCHEMA()))"}
{"L":"INFO","T":"2025-02-28T21:46:40.639+0300","C":"database/service.go:160","M":"Auto-migration completed successfully"}
{"L":"DEBUG","T":"2025-02-28T21:46:40.679+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"39.712333ms","rows_affected":1,"sql":"SELECT count(*) FROM information_schema.tables WHERE table_schema = CURRENT_SCHEMA() AND table_name = 'schema_migrations' AND table_type = 'BASE TABLE'"}
{"L":"INFO","T":"2025-02-28T21:46:40.679+0300","C":"backend/app.go:101","M":"Database migrations completed successfully"}
{"L":"INFO","T":"2025-02-28T21:46:40.684+0300","C":"backend/app.go:133","M":"S3 Configuration in App","secretKeyLength":40,"endpoint":"","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20}
{"L":"INFO","T":"2025-02-28T21:46:40.684+0300","C":"s3/service.go:26","M":"S3 Service Configuration","region":"eu-central-1","bucket":"octopus-doganbros-storage","useSSL":true,"accessKeyID":"AKIAQUZ73XIUWQ3LD2WC","secretAccessKey":true,"accessKeyLength":20,"secretKeyLength":40,"endpoint":""}
{"L":"INFO","T":"2025-02-28T21:46:40.685+0300","C":"backend/app.go:333","M":"Starting server on port 8080"}
{"L":"DEBUG","T":"2025-02-28T21:47:14.530+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"14.784875ms","rows_affected":14,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','e9b07757-9b0a-4ba0-8805-5b8dca7bdced','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-28T21:47:14.531+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":14,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')","source":"gorm","duration":"33.725375ms"}
{"L":"DEBUG","T":"2025-02-28T21:47:14.545+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('10077cec-fc55-4ab0-9226-393cb982516b','1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224')","source":"gorm","duration":"13.948542ms","rows_affected":10}
{"L":"DEBUG","T":"2025-02-28T21:47:14.545+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"89.188375ms","rows_affected":10,"sql":"SELECT * FROM \"videos\" WHERE deleted_at IS NULL AND \"videos\".\"deleted_at\" IS NULL LIMIT 10"}
{"L":"INFO","T":"2025-02-28T21:47:14.545+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","page":1,"limit":10,"request_id":"","count":10}
{"L":"INFO","T":"2025-02-28T21:47:14.546+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":90,"client_ip":"::1","method":"GET","path":"/videos"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.903+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM \"videos\" WHERE id = '10077cec-fc55-4ab0-9226-393cb982516b'","source":"gorm","duration":"38.901542ms"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.953+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"25.800625ms","rows_affected":0,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '10077cec-fc55-4ab0-9226-393cb982516b'"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.971+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"17.832292ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '10077cec-fc55-4ab0-9226-393cb982516b'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.971+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"67.177541ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '10077cec-fc55-4ab0-9226-393cb982516b' AND \"videos\".\"deleted_at\" IS NULL ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.978+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":1,"sql":"SELECT count(*) FROM \"videos\" WHERE id = '10077cec-fc55-4ab0-9226-393cb982516b'","source":"gorm","duration":"7.065959ms"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.990+0300","C":"database/gorm_logger.go:98","M":"SQL query","sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" = '10077cec-fc55-4ab0-9226-393cb982516b'","source":"gorm","duration":"5.383459ms","rows_affected":0}
{"L":"DEBUG","T":"2025-02-28T21:47:48.996+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"5.626208ms","rows_affected":1,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" = '10077cec-fc55-4ab0-9226-393cb982516b'","source":"gorm"}
{"L":"DEBUG","T":"2025-02-28T21:47:48.996+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"17.582375ms","rows_affected":1,"sql":"SELECT * FROM \"videos\" WHERE \"videos\".\"id\" = '10077cec-fc55-4ab0-9226-393cb982516b' AND \"videos\".\"deleted_at\" IS NULL ORDER BY \"videos\".\"id\" LIMIT 1"}
{"L":"INFO","T":"2025-02-28T21:47:49.508+0300","C":"s3/service.go:258","M":"Successfully deleted video files from S3","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","prefix":"videos/10077cec-fc55-4ab0-9226-393cb982516b/"}
{"L":"DEBUG","T":"2025-02-28T21:47:49.550+0300","C":"database/gorm_logger.go:98","M":"SQL query","duration":"42.040916ms","rows_affected":1,"sql":"UPDATE \"videos\" SET \"deleted_at\"='2025-02-28 21:47:49.515' WHERE \"videos\".\"id\" = '10077cec-fc55-4ab0-9226-393cb982516b' AND \"videos\".\"deleted_at\" IS NULL","source":"gorm"}
{"L":"INFO","T":"2025-02-28T21:47:49.551+0300","C":"video/logger_adapter.go:17","M":"Video soft deleted successfully","video_id":"10077cec-fc55-4ab0-9226-393cb982516b","request_id":""}
{"L":"INFO","T":"2025-02-28T21:47:49.551+0300","C":"http/middleware.go:44","M":"HTTP Request","latency_ms":687,"client_ip":"::1","method":"DELETE","path":"/video/10077cec-fc55-4ab0-9226-393cb982516b","status":200}
{"L":"DEBUG","T":"2025-02-28T21:48:01.651+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"9.872541ms","rows_affected":14,"sql":"SELECT * FROM \"transcode_segments\" WHERE \"transcode_segments\".\"transcode_id\" IN ('0c1ccdaa-9a61-415c-a8c3-22dcacec3093','0de35c3c-a4b6-41ae-a9b0-88a2e31cbef4','17307256-4b0e-41e7-8fde-9be460103e0a','27db5a47-d550-4b99-89d4-abc4240ab700','2c85cc5d-76bc-4b83-9b66-a13a4faef4fe','37a9ab5b-9085-4741-993e-098d7caa92ca','3c863ad7-2a77-47cf-b3a2-86bfe2dcfc16','4756d24f-c26f-4ce9-ab48-29bd5016694a','a91f8115-4730-4113-b571-dd63180b8816','dcbd860f-83a7-4744-a181-5f3db55228ae','dcc24b2e-c205-4062-91fd-a77c581cea6b','e9b07757-9b0a-4ba0-8805-5b8dca7bdced','fd2c83e3-d782-4cae-8b38-557f78c6929f','ff583085-0083-4b2c-9414-18b6e6a664c3')"}
{"L":"DEBUG","T":"2025-02-28T21:48:01.652+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"18.775083ms","rows_affected":14,"sql":"SELECT * FROM \"transcodes\" WHERE \"transcodes\".\"video_id\" IN ('1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224','8909233f-2ee5-4e7b-bf9e-f170df3178a5')"}
{"L":"DEBUG","T":"2025-02-28T21:48:01.659+0300","C":"database/gorm_logger.go:98","M":"SQL query","rows_affected":10,"sql":"SELECT * FROM \"video_uploads\" WHERE \"video_uploads\".\"video_id\" IN ('1605e779-bb4f-4357-97d1-e8fc09c97244','213557e2-e04a-4b50-99a3-7f7569df5d9d','29cf774c-1076-44de-9b18-dd480be0ac75','2de8f40b-ec33-4b41-8f49-61ce66d362da','3632bb3f-4ad0-4f07-a3d2-ab964aa50cae','3db64ea0-dcf2-4545-82d9-13312dcbbf13','3e482c75-cf3d-4497-a023-9d9956a82c52','67ba96a3-f24a-4021-90a8-5a15ffbe50c5','720bc366-2dd8-4306-9869-564fc99d3224','8909233f-2ee5-4e7b-bf9e-f170df3178a5')","source":"gorm","duration":"7.111208ms"}
{"L":"DEBUG","T":"2025-02-28T21:48:01.659+0300","C":"database/gorm_logger.go:98","M":"SQL query","source":"gorm","duration":"40.57075ms","rows_affected":10,"sql":"SELECT * FROM \"videos\" WHERE deleted_at IS NULL AND \"videos\".\"deleted_at\" IS NULL LIMIT 10"}
{"L":"INFO","T":"2025-02-28T21:48:01.659+0300","C":"video/logger_adapter.go:17","M":"Videos retrieved successfully","count":10,"page":1,"limit":10,"request_id":""}
{"L":"INFO","T":"2025-02-28T21:48:01.660+0300","C":"http/middleware.go:44","M":"HTTP Request","status":200,"latency_ms":41,"client_ip":"::1","method":"GET","path":"/videos"}
{"L":"INFO","T":"2025-03-01T02:08:23.560+0300","C":"backend/app.go:380","M":"Initiating graceful shutdown"}
{"L":"INFO","T":"2025-03-01T02:08:23.566+0300","C":"backend/app.go:393","M":"HTTP server shutdown complete"}
{"L":"INFO","T":"2025-03-01T02:08:23.598+0300","C":"backend/app.go:430","M":"Application shutdown complete"}
